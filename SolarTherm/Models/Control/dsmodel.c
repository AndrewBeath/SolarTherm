/* DSblock model generated by Dymola from Modelica model SolarTherm.Examples.SolarTower.reference_1
 Dymola Version 2017 (32-bit), 2016-04-12 translated this at Mon Oct 17 16:16:17 2016

   */

#include <matrixop.h>
/* Declaration of C-structs */
struct DymStruc0;
struct DymStruc0 {
  int  id_0member;
};
DYMOLA_STATIC struct DymStruc0 DymStruc0_construct(int   id_02) {
  struct DymStruc0 dummy_0;
  dummy_0.id_0member = id_02;
  return dummy_0;
}
/* Prototypes for functions used in model */
DYMOLA_STATIC double   Modelica_Blocks_Sources_CombiTimeTable_getNextTimeEvent_M
  (struct DymStruc0 tableID0_0, double  timeIn0_0, double  tableAvailable0_0);
DYMOLA_STATIC double   Modelica_Blocks_Sources_CombiTimeTable_getTableTimeTmax_M
  (struct DymStruc0 tableID0_0, double  tableAvailable0_0);
DYMOLA_STATIC double   Modelica_Blocks_Sources_CombiTimeTable_getTableTimeTmin_M
  (struct DymStruc0 tableID0_0, double  tableAvailable0_0);
DYMOLA_STATIC double   Modelica_Blocks_Sources_CombiTimeTable_getTableValue_M(
  struct DymStruc0 tableID0_0, int  icol0_0, double  timeIn0_0, double  
  nextTimeEvent0_0, double  prex_0nextTimeEvent, double  tableAvailable0_0);
DYMOLA_STATIC double   Modelica_Blocks_Sources_CombiTimeTable_readTableData_M(
  struct DymStruc0 tableID0_0, int  forceRead0_0, int  verboseRead0_0);
DYMOLA_STATIC double   Modelica_Blocks_Tables_CombiTable2D_getTableValue_M(
  struct DymStruc0 tableID0_0, double  u10_0, double  u20_0, double  
  tableAvailable0_0);
DYMOLA_STATIC double   Modelica_Blocks_Tables_CombiTable2D_readTableData_M(
  struct DymStruc0 tableID0_0, int  forceRead0_0, int  verboseRead0_0);
DYMOLA_STATIC struct DymStruc0  Modelica_Blocks_Types_ExternalCombiTable2D_M(
  const char*  tableName0_0, const char*  fileName0_0, RealArray   table0_0, int 
   smoothness0_0, int id_, int alwaysMakeNew_);
DYMOLA_STATIC void Modelica_Blocks_Types_ExternalCombiTable2D_destructor_M(
  void* externalCombiTable2D0_0);
DYMOLA_STATIC struct DymStruc0  Modelica_Blocks_Types_ExternalCombiTimeTable_M(
  const char*  tableName0_0, const char*  fileName0_0, RealArray   table0_0, 
  double  startTime0_0, IntegerArray   columns0_0, int  smoothness0_0, int  
  extrapolation0_0, int id_, int alwaysMakeNew_);
DYMOLA_STATIC void Modelica_Blocks_Types_ExternalCombiTimeTable_destructor_M(
  void* externalCombiTimeTable0_0);
DYMOLA_STATIC double   Modelica_Media_Water_IF97x_0Utilities_BaseIF97_Basic_tsat
  (double  p0_0);
DYMOLA_STATIC double   Modelica_SIunits_Conversions_fromx_0deg(double  degree0_0);
DYMOLA_STATIC double   Modelica_SIunits_Conversions_tox_0degC(double  Kelvin0_0);
DYMOLA_STATIC double   SolarTherm_Media_MoltenSalt_MoltenSaltx_0Utilities_rhox_0T
  (double  K0_0);
DYMOLA_STATIC double   SolarTherm_Models_Sources_SolarFunctions_aparentSolarZenith
  (double  dec0_0, double  hra0_0, double  lat0_0);
DYMOLA_STATIC double   SolarTherm_Models_Sources_SolarFunctions_eclipticLongitude
  (double  dec0_0);
DYMOLA_STATIC double   SolarTherm_Models_Sources_SolarFunctions_julianDay(int  
  year0_0, int  month0_0, int  day0_0, double  hour0_0);
DYMOLA_STATIC double   SolarTherm_Models_Sources_SolarFunctions_solarAzimuth(
  double  dec0_0, double  hra0_0, double  lat0_0);
DYMOLA_STATIC double   SolarTherm_Models_Sources_SolarFunctions_solarZenith(
  double  dec0_0, double  hra0_0, double  lat0_0);
struct sun_solarPositionx_0Unique1_struct {
  double   dec0_0_0member;
  double   hra0_0_0member;
};
DYMOLA_STATIC struct sun_solarPositionx_0Unique1_struct sun_solarPositionx_0Unique1
  (double  t0_0, double  lon0_0, double  lat0_0, double  tx_0zone, int  year0_0);
/* Codes used in model */

/* Flattened Modelica model:

function Modelica.Blocks.Sources.CombiTimeTable.getNextTimeEvent
input Modelica.Blocks.Types.ExternalCombiTimeTable tableID;
discrete input Real timeIn(unit = "s");
discrete input Real tableAvailable "Dummy input to ensure correct sorting of function calls";
discrete output Real nextTimeEvent(unit = "s") "Next time event in table";

external "C" nextTimeEvent = ModelicaStandardTables_CombiTimeTable_nextTimeEvent(tableID, timeIn);
annotation(Library={"ModelicaMatIO", "ModelicaStandardTables", "zlib"}, LibraryDirectory="C:/Program Files (x86)/Dymola 2017/Modelica/Library/Modelica 3.2.2/Resources/Library");
end Modelica.Blocks.Sources.CombiTimeTable.getNextTimeEvent;

  */
DYMOLA_STATIC double   Modelica_Blocks_Sources_CombiTimeTable_getNextTimeEvent_M
  (struct DymStruc0 tableID0_0, double  timeIn0_0, double  tableAvailable0_0) {
  PushContext("Modelica.Blocks.Sources.CombiTimeTable.getNextTimeEvent")
  {
    /* Declare outputs and temporaries */
    double   nextTimeEvent0_0;
    nextTimeEvent0_0=0;
    /* Start of real code */
    {
      extern double (ModelicaStandardTables_CombiTimeTable_nextTimeEvent)(void*,
         double );
      nextTimeEvent0_0 = (ModelicaStandardTables_CombiTimeTable_nextTimeEvent)(
        externalTable_[tableID0_0.id_0member].obj_, timeIn0_0);
      }
    /* Output section */
    PopContext()
    return nextTimeEvent0_0;
  }}

/* Flattened Modelica model:

function Modelica.Blocks.Sources.CombiTimeTable.getTableTimeTmax
input Modelica.Blocks.Types.ExternalCombiTimeTable tableID;
discrete input Real tableAvailable "Dummy input to ensure correct sorting of function calls";
discrete output Real timeMax(unit = "s") "Maximum time value in table";

external "C" timeMax = ModelicaStandardTables_CombiTimeTable_maximumTime(tableID);
annotation(Library={"ModelicaMatIO", "ModelicaStandardTables", "zlib"}, LibraryDirectory="C:/Program Files (x86)/Dymola 2017/Modelica/Library/Modelica 3.2.2/Resources/Library");
end Modelica.Blocks.Sources.CombiTimeTable.getTableTimeTmax;

  */
DYMOLA_STATIC double   Modelica_Blocks_Sources_CombiTimeTable_getTableTimeTmax_M
  (struct DymStruc0 tableID0_0, double  tableAvailable0_0) {
  PushContext("Modelica.Blocks.Sources.CombiTimeTable.getTableTimeTmax")
  {
    /* Declare outputs and temporaries */
    double   timeMax0_0;
    timeMax0_0=0;
    /* Start of real code */
    {
      extern double (ModelicaStandardTables_CombiTimeTable_maximumTime)(void*);
      timeMax0_0 = (ModelicaStandardTables_CombiTimeTable_maximumTime)(
        externalTable_[tableID0_0.id_0member].obj_);
      }
    /* Output section */
    PopContext()
    return timeMax0_0;
  }}

/* Flattened Modelica model:

function Modelica.Blocks.Sources.CombiTimeTable.getTableTimeTmin
input Modelica.Blocks.Types.ExternalCombiTimeTable tableID;
discrete input Real tableAvailable "Dummy input to ensure correct sorting of function calls";
discrete output Real timeMin(unit = "s") "Minimum time value in table";

external "C" timeMin = ModelicaStandardTables_CombiTimeTable_minimumTime(tableID);
annotation(Library={"ModelicaMatIO", "ModelicaStandardTables", "zlib"}, LibraryDirectory="C:/Program Files (x86)/Dymola 2017/Modelica/Library/Modelica 3.2.2/Resources/Library");
end Modelica.Blocks.Sources.CombiTimeTable.getTableTimeTmin;

  */
DYMOLA_STATIC double   Modelica_Blocks_Sources_CombiTimeTable_getTableTimeTmin_M
  (struct DymStruc0 tableID0_0, double  tableAvailable0_0) {
  PushContext("Modelica.Blocks.Sources.CombiTimeTable.getTableTimeTmin")
  {
    /* Declare outputs and temporaries */
    double   timeMin0_0;
    timeMin0_0=0;
    /* Start of real code */
    {
      extern double (ModelicaStandardTables_CombiTimeTable_minimumTime)(void*);
      timeMin0_0 = (ModelicaStandardTables_CombiTimeTable_minimumTime)(
        externalTable_[tableID0_0.id_0member].obj_);
      }
    /* Output section */
    PopContext()
    return timeMin0_0;
  }}

/* Flattened Modelica model:

function Modelica.Blocks.Sources.CombiTimeTable.getTableValue
input Modelica.Blocks.Types.ExternalCombiTimeTable tableID;
input Integer icol;
discrete input Real timeIn(unit = "s");
discrete input Real nextTimeEvent(unit = "s");
discrete input Real pre_nextTimeEvent(unit = "s");
discrete input Real tableAvailable "Dummy input to ensure correct sorting of function calls";
discrete output Real y;

external "C" y = ModelicaStandardTables_CombiTimeTable_getValue(tableID, icol, timeIn, nextTimeEvent, pre_nextTimeEvent);
annotation(derivative(noDerivative=nextTimeEvent, noDerivative=pre_nextTimeEvent, noDerivative=tableAvailable)=Modelica.Blocks.Sources.CombiTimeTable.getDerTableValue, Library={"ModelicaMatIO", "ModelicaStandardTables", "zlib"}, LibraryDirectory="C:/Program Files (x86)/Dymola 2017/Modelica/Library/Modelica 3.2.2/Resources/Library");
end Modelica.Blocks.Sources.CombiTimeTable.getTableValue;

  */
DYMOLA_STATIC double   Modelica_Blocks_Sources_CombiTimeTable_getTableValue_M(
  struct DymStruc0 tableID0_0, int  icol0_0, double  timeIn0_0, double  
  nextTimeEvent0_0, double  prex_0nextTimeEvent, double  tableAvailable0_0) {
  PushContext("Modelica.Blocks.Sources.CombiTimeTable.getTableValue")
  {
    /* Declare outputs and temporaries */
    double   y0_0;
    y0_0=0;
    /* Start of real code */
    {
      extern double (ModelicaStandardTables_CombiTimeTable_getValue)(void*, int ,
         double , double , double );
      y0_0 = (ModelicaStandardTables_CombiTimeTable_getValue)(externalTable_[
        tableID0_0.id_0member].obj_, icol0_0, timeIn0_0, nextTimeEvent0_0, 
        prex_0nextTimeEvent);
      }
    /* Output section */
    PopContext()
    return y0_0;
  }}

/* Flattened Modelica model:

function Modelica.Blocks.Sources.CombiTimeTable.readTableData
input Modelica.Blocks.Types.ExternalCombiTimeTable tableID;
input Boolean forceRead(start = false) "= true: Force reading of table data; = false: Only read, if not yet read.";
discrete output Real readSuccess "Table read success";
input Boolean verboseRead "= true: Print info message; = false: No info message";

external "C" readSuccess = ModelicaStandardTables_CombiTimeTable_read(tableID, forceRead, verboseRead);
annotation(Library={"ModelicaMatIO", "ModelicaStandardTables", "zlib"}, LibraryDirectory="C:/Program Files (x86)/Dymola 2017/Modelica/Library/Modelica 3.2.2/Resources/Library");
end Modelica.Blocks.Sources.CombiTimeTable.readTableData;

  */
DYMOLA_STATIC double   Modelica_Blocks_Sources_CombiTimeTable_readTableData_M(
  struct DymStruc0 tableID0_0, int  forceRead0_0, int  verboseRead0_0) {
  PushContext("Modelica.Blocks.Sources.CombiTimeTable.readTableData")
  {
    /* Declare outputs and temporaries */
    double   readSuccess0_0;
    readSuccess0_0=0;
    /* Start of real code */
    {
      extern double (ModelicaStandardTables_CombiTimeTable_read)(void*, int , 
        int );
      readSuccess0_0 = (ModelicaStandardTables_CombiTimeTable_read)(
        externalTable_[tableID0_0.id_0member].obj_, forceRead0_0, verboseRead0_0);
      }
    /* Output section */
    PopContext()
    return readSuccess0_0;
  }}

/* Flattened Modelica model:

function Modelica.Blocks.Tables.CombiTable2D.getTableValue
input Modelica.Blocks.Types.ExternalCombiTable2D tableID;
discrete input Real u1;
discrete input Real u2;
discrete input Real tableAvailable "Dummy input to ensure correct sorting of function calls";
discrete output Real y;

external "C" y = ModelicaStandardTables_CombiTable2D_getValue(tableID, u1, u2);
annotation(derivative(noDerivative=tableAvailable)=Modelica.Blocks.Tables.CombiTable2D.getDerTableValue, Library={"ModelicaMatIO", "ModelicaStandardTables", "zlib"}, LibraryDirectory="C:/Program Files (x86)/Dymola 2017/Modelica/Library/Modelica 3.2.2/Resources/Library");
end Modelica.Blocks.Tables.CombiTable2D.getTableValue;

  */
DYMOLA_STATIC double   Modelica_Blocks_Tables_CombiTable2D_getTableValue_M(
  struct DymStruc0 tableID0_0, double  u10_0, double  u20_0, double  
  tableAvailable0_0) {
  PushContext("Modelica.Blocks.Tables.CombiTable2D.getTableValue")
  {
    /* Declare outputs and temporaries */
    double   y0_0;
    y0_0=0;
    /* Start of real code */
    {
      extern double (ModelicaStandardTables_CombiTable2D_getValue)(void*, double ,
         double );
      y0_0 = (ModelicaStandardTables_CombiTable2D_getValue)(externalTable_[
        tableID0_0.id_0member].obj_, u10_0, u20_0);
      }
    /* Output section */
    PopContext()
    return y0_0;
  }}

/* Flattened Modelica model:

function Modelica.Blocks.Tables.CombiTable2D.readTableData
input Modelica.Blocks.Types.ExternalCombiTable2D tableID;
input Boolean forceRead(start = false) "= true: Force reading of table data; = false: Only read, if not yet read.";
input Boolean verboseRead "= true: Print info message; = false: No info message";
discrete output Real readSuccess "Table read success";

external "C" readSuccess = ModelicaStandardTables_CombiTable2D_read(tableID, forceRead, verboseRead);
annotation(Library={"ModelicaMatIO", "ModelicaStandardTables", "zlib"}, LibraryDirectory="C:/Program Files (x86)/Dymola 2017/Modelica/Library/Modelica 3.2.2/Resources/Library");
end Modelica.Blocks.Tables.CombiTable2D.readTableData;

  */
DYMOLA_STATIC double   Modelica_Blocks_Tables_CombiTable2D_readTableData_M(
  struct DymStruc0 tableID0_0, int  forceRead0_0, int  verboseRead0_0) {
  PushContext("Modelica.Blocks.Tables.CombiTable2D.readTableData")
  {
    /* Declare outputs and temporaries */
    double   readSuccess0_0;
    readSuccess0_0=0;
    /* Start of real code */
    {
      extern double (ModelicaStandardTables_CombiTable2D_read)(void*, int , int );
      readSuccess0_0 = (ModelicaStandardTables_CombiTable2D_read)(
        externalTable_[tableID0_0.id_0member].obj_, forceRead0_0, verboseRead0_0);
      }
    /* Output section */
    PopContext()
    return readSuccess0_0;
  }}

/* Flattened Modelica model:

function Modelica.Blocks.Types.ExternalCombiTable2D
input String tableName "Table name";
input String fileName "File name";
discrete input Real table[:, :];
input Modelica.Blocks.Types.Smoothness smoothness;
output Modelica.Blocks.Types.ExternalCombiTable2D externalCombiTable2D;

external "C" externalCombiTable2D = ModelicaStandardTables_CombiTable2D_init(tableName, fileName, table, size(table, 1), size(table, 2), smoothness);
annotation(Library={"ModelicaStandardTables"}, LibraryDirectory="C:/Program Files (x86)/Dymola 2017/Modelica/Library/Modelica 3.2.2/Resources/Library");
end Modelica.Blocks.Types.ExternalCombiTable2D;

  */
DYMOLA_STATIC struct DymStruc0  Modelica_Blocks_Types_ExternalCombiTable2D_M(
  const char*  tableName0_0, const char*  fileName0_0, RealArray   table0_0, int 
   smoothness0_0, int id_, int alwaysMakeNew_) {
  PushContext("Modelica.Blocks.Types.ExternalCombiTable2D")
  {
    /* Declare outputs and temporaries */
    struct DymStruc0  externalCombiTable2D0_0;
    externalCombiTable2D0_0.id_0member=0;
    /* Start of real code */
    {
      extern void* (ModelicaStandardTables_CombiTable2D_init)(const char* , 
        const char* , double  const *, size_t, size_t, int );
      externalCombiTable2D0_0.id_0member=id_;
      if (externalTable_[id_].destructor_ && externalTable_[id_].obj_ && alwaysMakeNew_) {
      void*x_=externalTable_[id_].obj_;
      externalTable_[id_].obj_=0;
      (*(externalTable_[id_].destructor_))(x_);
      } else if (!externalTable_[id_].destructor_) {externalTable_[id_].obj_=0;}
      externalTable_[id_].destructor_=Modelica_Blocks_Types_ExternalCombiTable2D_destructor_M;

        if (!externalTable_[id_].obj_) externalTable_[id_].obj_ = (
        ModelicaStandardTables_CombiTable2D_init)(tableName0_0, fileName0_0, 
        table0_0.data, table0_0.dims[1-1], table0_0.dims[2-1], smoothness0_0);
      }
    /* Output section */
    PopContext()
    return externalCombiTable2D0_0;
  }}

/* Flattened Modelica model:

function Modelica.Blocks.Types.ExternalCombiTable2D.destructor
input Modelica.Blocks.Types.ExternalCombiTable2D externalCombiTable2D;

external "C" ModelicaStandardTables_CombiTable2D_close(externalCombiTable2D);
annotation(Library={"ModelicaStandardTables"}, LibraryDirectory="C:/Program Files (x86)/Dymola 2017/Modelica/Library/Modelica 3.2.2/Resources/Library");
end Modelica.Blocks.Types.ExternalCombiTable2D.destructor;

  */
DYMOLA_STATIC void Modelica_Blocks_Types_ExternalCombiTable2D_destructor_M(
  void* externalCombiTable2D0_0) {
  PushContext("Modelica.Blocks.Types.ExternalCombiTable2D.destructor")
  {
    /* Declare outputs and temporaries */
    /* Start of real code */
    {
      extern void (ModelicaStandardTables_CombiTable2D_close)(void*);
      (ModelicaStandardTables_CombiTable2D_close)(externalCombiTable2D0_0);
      }
    /* Output section */
    PopContext()
    return ;
  }}

/* Flattened Modelica model:

function Modelica.Blocks.Types.ExternalCombiTimeTable
input String tableName "Table name";
input String fileName "File name";
discrete input Real table[:, :];
discrete input Real startTime(unit = "s");
input Integer columns[:];
input Modelica.Blocks.Types.Smoothness smoothness;
input Modelica.Blocks.Types.Extrapolation extrapolation;
output Modelica.Blocks.Types.ExternalCombiTimeTable externalCombiTimeTable;

external "C" externalCombiTimeTable = ModelicaStandardTables_CombiTimeTable_init(tableName, fileName, table, size(table, 1), size(table, 2), startTime, columns, size(columns, 1), smoothness, extrapolation);
annotation(Library={"ModelicaStandardTables"}, LibraryDirectory="C:/Program Files (x86)/Dymola 2017/Modelica/Library/Modelica 3.2.2/Resources/Library");
end Modelica.Blocks.Types.ExternalCombiTimeTable;

  */
DYMOLA_STATIC struct DymStruc0  Modelica_Blocks_Types_ExternalCombiTimeTable_M(
  const char*  tableName0_0, const char*  fileName0_0, RealArray   table0_0, 
  double  startTime0_0, IntegerArray   columns0_0, int  smoothness0_0, int  
  extrapolation0_0, int id_, int alwaysMakeNew_) {
  PushContext("Modelica.Blocks.Types.ExternalCombiTimeTable")
  {
    /* Declare outputs and temporaries */
    struct DymStruc0  externalCombiTimeTable0_0;
    externalCombiTimeTable0_0.id_0member=0;
    /* Start of real code */
    {
      extern void* (ModelicaStandardTables_CombiTimeTable_init)(const char* , 
        const char* , double  const *, size_t, size_t, double , int  const *, 
        size_t, int , int );
      externalCombiTimeTable0_0.id_0member=id_;
      if (externalTable_[id_].destructor_ && externalTable_[id_].obj_ && alwaysMakeNew_) {
      void*x_=externalTable_[id_].obj_;
      externalTable_[id_].obj_=0;
      (*(externalTable_[id_].destructor_))(x_);
      } else if (!externalTable_[id_].destructor_) {externalTable_[id_].obj_=0;}
      externalTable_[id_].destructor_=Modelica_Blocks_Types_ExternalCombiTimeTable_destructor_M;

        if (!externalTable_[id_].obj_) externalTable_[id_].obj_ = (
        ModelicaStandardTables_CombiTimeTable_init)(tableName0_0, fileName0_0, 
        table0_0.data, table0_0.dims[1-1], table0_0.dims[2-1], startTime0_0, 
        columns0_0.data, columns0_0.dims[1-1], smoothness0_0, extrapolation0_0);
      }
    /* Output section */
    PopContext()
    return externalCombiTimeTable0_0;
  }}

/* Flattened Modelica model:

function Modelica.Blocks.Types.ExternalCombiTimeTable.destructor
input Modelica.Blocks.Types.ExternalCombiTimeTable externalCombiTimeTable;

external "C" ModelicaStandardTables_CombiTimeTable_close(externalCombiTimeTable);
annotation(Library={"ModelicaStandardTables"}, LibraryDirectory="C:/Program Files (x86)/Dymola 2017/Modelica/Library/Modelica 3.2.2/Resources/Library");
end Modelica.Blocks.Types.ExternalCombiTimeTable.destructor;

  */
DYMOLA_STATIC void Modelica_Blocks_Types_ExternalCombiTimeTable_destructor_M(
  void* externalCombiTimeTable0_0) {
  PushContext("Modelica.Blocks.Types.ExternalCombiTimeTable.destructor")
  {
    /* Declare outputs and temporaries */
    /* Start of real code */
    {
      extern void (ModelicaStandardTables_CombiTimeTable_close)(void*);
      (ModelicaStandardTables_CombiTimeTable_close)(externalCombiTimeTable0_0);
      }
    /* Output section */
    PopContext()
    return ;
  }}

/* Flattened Modelica model:

function Modelica.Media.Water.IF97_Utilities.BaseIF97.Basic.tsat
discrete input Real p(unit = "Pa", displayUnit = "bar") "Pressure";
discrete output Real t_sat(start = 288.15, nominal = 300.0, unit = "K", displayUnit = "degC", min = 0.0) "Temperature";
protected 
discrete Real pi "Dimensionless pressure";
discrete Real o[20] "Vector of auxiliary variables";
public 
algorithm 
assert(p > 611.657, "IF97 medium function tsat called with too low pressure
p = "+       String(p, true, 0)+" Pa <= "+"611.657"+" Pa (triple point pressure)");
pi := min(p, 22064000.0)*1E-006;
o[1] := pi^0.25;
o[2] :=  -3232555.0322333*o[1];
o[3] := pi^0.5;
o[4] :=  -724213.16703206*o[3];
o[5] := 405113.40542057+o[2]+o[4];
o[6] :=  -17.073846940092*o[1];
o[7] := 14.91510861353+o[3]+o[6];
o[8] :=  -4.0*o[5]*o[7];
o[9] := 12020.82470247*o[1];
o[10] := 1167.0521452767*o[3];
o[11] := (-4823.2657361591)+o[10]+o[9];
o[12] := o[11]*o[11];
o[13] := o[12]+o[8];
o[14] := o[13]^0.5;
o[15] :=  -o[14];
o[16] :=  -12020.82470247*o[1];
o[17] :=  -1167.0521452767*o[3];
o[18] := 4823.2657361591+o[15]+o[16]+o[17];
o[19] := 1/o[18];
o[20] := 2.0*o[19]*o[5];
t_sat := 0.5*(650.17534844798+o[20]-(( -4.0*((-0.23855557567849)+1300.35069689596*o[19]*o[5]))+(650.17534844798+o[20])^2.0)^0.5);
annotation(derivative=Modelica.Media.Water.IF97_Utilities.BaseIF97.Basic.tsat_der);
end Modelica.Media.Water.IF97_Utilities.BaseIF97.Basic.tsat;

  */
DYMOLA_STATIC double   Modelica_Media_Water_IF97x_0Utilities_BaseIF97_Basic_tsat
  (double  p0_0) {
  char*retSMark_=GetStringMark();
  PushContext("Modelica.Media.Water.IF97_Utilities.BaseIF97.Basic.tsat")
  {
    /* Declare outputs and temporaries */
    double   tx_0sat;
    double   pi0_0;
    RealArray    o0_0;
    MarkObject retmark_ = PushMark();
    tx_0sat = 288.15;
    pi0_0=0;
    o0_0=RealTemporary( 1, 20);
    PushMark();
    RealFillAssign( o0_0, 0);
    /* Start of real code */
      AssertModelica(p0_0 > 611.657,"p > 611.657", StringAdd(StringAdd(
        StringAdd(StringAdd("IF97 medium function tsat called with too low pressure\np = ",
        Real2String2(p0_0, true, 0))," Pa <= "),"611.657")," Pa (triple point pressure)"));
      pi0_0 = RealBmin(p0_0, 22064000.0)*1E-006;
      SetRealVectorElement(powmacro(pi0_0,"pi",0.25,"0.25"), o0_0, (SizeType)(1));
      SetRealVectorElement( -3232555.0322333*RealVectorElement( o0_0, (SizeType)
        (1)), o0_0, (SizeType)(2));
      SetRealVectorElement(powmacro(pi0_0,"pi",0.5,"0.5"), o0_0, (SizeType)(3));
      SetRealVectorElement( -724213.16703206*RealVectorElement( o0_0, (SizeType)
        (3)), o0_0, (SizeType)(4));
      SetRealVectorElement(405113.40542057+RealVectorElement( o0_0, (SizeType)(2))
        +RealVectorElement( o0_0, (SizeType)(4)), o0_0, (SizeType)(5));
      SetRealVectorElement( -17.073846940092*RealVectorElement( o0_0, (SizeType)
        (1)), o0_0, (SizeType)(6));
      SetRealVectorElement(14.91510861353+RealVectorElement( o0_0, (SizeType)(3))
        +RealVectorElement( o0_0, (SizeType)(6)), o0_0, (SizeType)(7));
      SetRealVectorElement( -4.0*RealVectorElement( o0_0, (SizeType)(5))*
        RealVectorElement( o0_0, (SizeType)(7)), o0_0, (SizeType)(8));
      SetRealVectorElement(12020.82470247*RealVectorElement( o0_0, (SizeType)(1)),
         o0_0, (SizeType)(9));
      SetRealVectorElement(1167.0521452767*RealVectorElement( o0_0, (SizeType)(3)),
         o0_0, (SizeType)(10));
      SetRealVectorElement((-4823.2657361591)+RealVectorElement( o0_0, 
        (SizeType)(10))+RealVectorElement( o0_0, (SizeType)(9)), o0_0, 
        (SizeType)(11));
      SetRealVectorElement(RealVectorElement( o0_0, (SizeType)(11))*
        RealVectorElement( o0_0, (SizeType)(11)), o0_0, (SizeType)(12));
      SetRealVectorElement(RealVectorElement( o0_0, (SizeType)(12))+
        RealVectorElement( o0_0, (SizeType)(8)), o0_0, (SizeType)(13));
      SetRealVectorElement(powmacro(RealVectorElement( o0_0, (SizeType)(13)),
        "o[13]",0.5,"0.5"), o0_0, (SizeType)(14));
      SetRealVectorElement( -RealVectorElement( o0_0, (SizeType)(14)), o0_0, 
        (SizeType)(15));
      SetRealVectorElement( -12020.82470247*RealVectorElement( o0_0, (SizeType)(1)),
         o0_0, (SizeType)(16));
      SetRealVectorElement( -1167.0521452767*RealVectorElement( o0_0, (SizeType)
        (3)), o0_0, (SizeType)(17));
      SetRealVectorElement(4823.2657361591+RealVectorElement( o0_0, (SizeType)(15))
        +RealVectorElement( o0_0, (SizeType)(16))+RealVectorElement( o0_0, 
        (SizeType)(17)), o0_0, (SizeType)(18));
      SetRealVectorElement(divmacro(1,"1",RealVectorElement( o0_0, (SizeType)(18)),
        "o[18]"), o0_0, (SizeType)(19));
      SetRealVectorElement(2.0*RealVectorElement( o0_0, (SizeType)(19))*
        RealVectorElement( o0_0, (SizeType)(5)), o0_0, (SizeType)(20));
      tx_0sat = 0.5*(650.17534844798+RealVectorElement( o0_0, (SizeType)(20))-
        powmacro(( -4.0*((-0.23855557567849)+1300.35069689596*RealVectorElement( 
        o0_0, (SizeType)(19))*RealVectorElement( o0_0, (SizeType)(5))))+sqr(
        650.17534844798+RealVectorElement( o0_0, (SizeType)(20))),
        "( -4.0*((-0.23855557567849)+1300.35069689596*o[19]*o[5]))+(650.17534844798+o[20])^2.0",
        0.5,"0.5"));
    /* Output section */
    PopMark(retmark_);
    SetStringMark(retSMark_);
    PopContext()
    return tx_0sat;
  }}

/* Flattened Modelica model:

function SolarTherm.Media.MoltenSalt.MoltenSalt_Utilities.rho_T
discrete input Real K(nominal = 300.0, unit = "K", displayUnit = "degC", min = 0.0) "Temperature";
discrete output Real rho(unit = "kg/m3", displayUnit = "g/cm3", min = 0.0) "Density";
protected 
discrete Real T(start = Modelica.SIunits.Conversions.to_degC(K), unit = "degC") "Temperature in degCelsius";
public 
algorithm 
rho := 2090-0.636*T;
end SolarTherm.Media.MoltenSalt.MoltenSalt_Utilities.rho_T;

  */
DYMOLA_STATIC double   SolarTherm_Media_MoltenSalt_MoltenSaltx_0Utilities_rhox_0T
  (double  K0_0) {
  PushContext("SolarTherm.Media.MoltenSalt.MoltenSalt_Utilities.rho_T")
  {
    /* Declare outputs and temporaries */
    double   rho0_0;
    double   T0_0;
    rho0_0=0;
    T0_0 = Modelica_SIunits_Conversions_tox_0degC(K0_0);
    /* Start of real code */
      rho0_0 = 2090-0.636*T0_0;
    /* Output section */
    PopContext()
    return rho0_0;
  }}

/* Flattened Modelica model:

function SolarTherm.Models.Sources.SolarFunctions.aparentSolarZenith
discrete input Real dec(unit = "rad", displayUnit = "deg") "Solar declination (+ve North of equator)";
discrete input Real hra(unit = "rad", displayUnit = "deg") "Solar hour angle (solar noon at 0)";
discrete input Real lat(start = -23.795, unit = "deg") "Latitude (+ve North)";
discrete output Real zen_ap(unit = "rad", displayUnit = "deg") "Solar zenith";
protected 
discrete Real zen(unit = "rad", displayUnit = "deg") "Solar zenith";
constant Real A = 0.004013327;
constant Real B = 0.06476916;
constant Real C = -0.66956539;
constant Real D = 0.019276169;
constant Real E = -0.00051297;
public 
algorithm 
zen := acos(cos(Modelica.SIunits.Conversions.from_deg(lat))*cos(dec)*cos(hra)+sin(Modelica.SIunits.Conversions.from_deg(lat))*sin(dec));
zen_ap := min(1.5707963267948966, zen-(A*(zen/B)^(C+D*zen)-E));
end SolarTherm.Models.Sources.SolarFunctions.aparentSolarZenith;

  */
DYMOLA_STATIC double   SolarTherm_Models_Sources_SolarFunctions_aparentSolarZenith
  (double  dec0_0, double  hra0_0, double  lat0_0) {
  PushContext("SolarTherm.Models.Sources.SolarFunctions.aparentSolarZenith")
  {
    /* Declare outputs and temporaries */
    double   zenx_0ap;
    double   zen0_0;
    double   A0_0;
    double   B0_0;
    double   C0_0;
    double   D0_0;
    double   E0_0;
    zenx_0ap=0;
    zen0_0=0;
    A0_0 = 0.004013327;
    B0_0 = 0.06476916;
    C0_0 = -0.66956539;
    D0_0 = 0.019276169;
    E0_0 = -0.00051297;
    /* Start of real code */
      zen0_0 = acosGuarded(cos(Modelica_SIunits_Conversions_fromx_0deg(lat0_0))*
        cos(dec0_0)*cos(hra0_0)+sin(Modelica_SIunits_Conversions_fromx_0deg(
        lat0_0))*sin(dec0_0),"cos(Modelica.SIunits.Conversions.from_deg(lat))*cos(dec)*cos(hra)+sin(Modelica.SIunits.Conversions.from_deg(lat))*sin(dec)");
      zenx_0ap = RealBmin(1.5707963267948966, zen0_0-(A0_0*powmacro(divmacro(
        zen0_0,"zen",B0_0,"B"),"zen/B",C0_0+D0_0*zen0_0,"C+D*zen")-E0_0));
    /* Output section */
    PopContext()
    return zenx_0ap;
  }}

/* Flattened Modelica model:

function SolarTherm.Models.Sources.SolarFunctions.eclipticLongitude
discrete input Real dec(unit = "rad", displayUnit = "deg") "Solar declination (+ve North of equator)";
parameter Real axial_tilt(unit = "rad", displayUnit = "deg") = Modelica.SIunits.Conversions.from_deg(23.4556);
discrete output Real elo(unit = "rad", displayUnit = "deg");

algorithm 
elo := asin(sin(dec)/sin(axial_tilt));
end SolarTherm.Models.Sources.SolarFunctions.eclipticLongitude;

  */
DYMOLA_STATIC double   SolarTherm_Models_Sources_SolarFunctions_eclipticLongitude
  (double  dec0_0) {
  PushContext("SolarTherm.Models.Sources.SolarFunctions.eclipticLongitude")
  {
    /* Declare outputs and temporaries */
    double   axialx_0tilt;
    double   elo0_0;
    axialx_0tilt = Modelica_SIunits_Conversions_fromx_0deg(23.4556);
    elo0_0=0;
    /* Start of real code */
      elo0_0 = asinGuarded(divmacro(sin(dec0_0),"sin(dec)",sin(axialx_0tilt),
        "sin(axial_tilt)"),"sin(dec)/sin(axial_tilt)");
    /* Output section */
    PopContext()
    return elo0_0;
  }}

/* Flattened Modelica model:

function SolarTherm.Models.Sources.SolarFunctions.solarAzimuth
discrete input Real dec(unit = "rad", displayUnit = "deg") "Solar declination (+ve North of equator)";
discrete input Real hra(unit = "rad", displayUnit = "deg") "Solar hour angle (solar noon at 0)";
discrete input Real lat(start = -23.795, unit = "deg") "Latitude (+ve North)";
discrete output Real azi(unit = "rad", displayUnit = "deg");
protected 
discrete Real zen(unit = "rad", displayUnit = "deg");
public 
algorithm 
zen := SolarTherm.Models.Sources.SolarFunctions.solarZenith(dec, hra, lat);
azi := noEvent((if hra > 0 then 1 else (if hra < 0 then -1 else 0)))*abs(acos((cos(zen)*sin(Modelica.SIunits.Conversions.from_deg(lat))-sin(dec))/(sin(zen)*cos(Modelica.SIunits.Conversions.from_deg(lat))))-3.141592653589793);
end SolarTherm.Models.Sources.SolarFunctions.solarAzimuth;

  */
DYMOLA_STATIC double   SolarTherm_Models_Sources_SolarFunctions_solarAzimuth(
  double  dec0_0, double  hra0_0, double  lat0_0) {
  PushContext("SolarTherm.Models.Sources.SolarFunctions.solarAzimuth")
  {
    /* Declare outputs and temporaries */
    double   azi0_0;
    double   zen0_0;
    azi0_0=0;
    zen0_0=0;
    /* Start of real code */
      zen0_0 = SolarTherm_Models_Sources_SolarFunctions_solarZenith(dec0_0, 
        hra0_0, lat0_0);
      azi0_0 = (IF hra0_0 > 0 THEN 1 ELSE IF hra0_0 < 0 THEN -1 ELSE 0)*fabs(
        acosGuarded(divmacro(cos(zen0_0)*sin(Modelica_SIunits_Conversions_fromx_0deg
        (lat0_0))-sin(dec0_0),"cos(zen)*sin(Modelica.SIunits.Conversions.from_deg(lat))-sin(dec)",
        sin(zen0_0)*cos(Modelica_SIunits_Conversions_fromx_0deg(lat0_0)),
        "sin(zen)*cos(Modelica.SIunits.Conversions.from_deg(lat))"),
        "(cos(zen)*sin(Modelica.SIunits.Conversions.from_deg(lat))-sin(dec))/(sin(zen)*cos(Modelica.SIunits.Conversions.from_deg(lat)))")
        -3.141592653589793);
    /* Output section */
    PopContext()
    return azi0_0;
  }}

/* Flattened Modelica model:

function SolarTherm.Models.Sources.SolarFunctions.solarZenith
discrete input Real dec(unit = "rad", displayUnit = "deg") "Solar declination (+ve North of equator)";
discrete input Real hra(unit = "rad", displayUnit = "deg") "Solar hour angle (solar noon at 0)";
discrete input Real lat(start = -23.795, unit = "deg") "Latitude (+ve North)";
discrete output Real zen(unit = "rad", displayUnit = "deg") "Solar zenith";

algorithm 
zen := acos(cos(Modelica.SIunits.Conversions.from_deg(lat))*cos(dec)*cos(hra)+sin(Modelica.SIunits.Conversions.from_deg(lat))*sin(dec));
end SolarTherm.Models.Sources.SolarFunctions.solarZenith;

  */
DYMOLA_STATIC double   SolarTherm_Models_Sources_SolarFunctions_solarZenith(
  double  dec0_0, double  hra0_0, double  lat0_0) {
  PushContext("SolarTherm.Models.Sources.SolarFunctions.solarZenith")
  {
    /* Declare outputs and temporaries */
    double   zen0_0;
    zen0_0=0;
    /* Start of real code */
      zen0_0 = acosGuarded(cos(Modelica_SIunits_Conversions_fromx_0deg(lat0_0))*
        cos(dec0_0)*cos(hra0_0)+sin(Modelica_SIunits_Conversions_fromx_0deg(
        lat0_0))*sin(dec0_0),"cos(Modelica.SIunits.Conversions.from_deg(lat))*cos(dec)*cos(hra)+sin(Modelica.SIunits.Conversions.from_deg(lat))*sin(dec)");
    /* Output section */
    PopContext()
    return zen0_0;
  }}

/* Flattened Modelica model:

function sun.solarPosition_Unique1
discrete input Real t(unit = "s") "Standard local time";
discrete input Real lon(unit = "deg") "Longitude (E>0, W<0)";
discrete input Real lat(unit = "deg") "Latitude (N>0, S<0)";
discrete input Real t_zone(start = 0, unit = "h") "Local time zone (UT=0)";
input Integer year(start = 1996) "Year";
discrete output Real dec(unit = "rad", displayUnit = "deg") "Solar declination (+ve North of equator)";
discrete output Real hra(unit = "rad", displayUnit = "deg") "Solar hour angle (solar noon at 0)";
protected 
discrete Real t_zone_int(start = noEvent((if t_zone > 0 then 1 else (if t_zone < 0 then -1 else 0)))*integer(abs(t_zone)), unit = "h") "Integer local time zone";
discrete Real longitude(start = lon);
discrete Real latitude(start = lat);
discrete Real julianday(start = SolarTherm.Models.Sources.SolarFunctions.julianDay(year, 1, 1, t/3600-t_zone_int));
discrete Real declination;
discrete Real hourangle;
discrete Real zenithangle;
discrete Real azimuth;
constant Real twopi = 6.283185307179586;
constant Real rad = 0.017453292519943295;
constant Real earthmeanradius = 6371.01;
constant Real astronomicalunit = 149597890;
discrete Real elapsedjuliandays;
discrete Real aux;
discrete Real eclipticlongitude;
discrete Real eclipticobliquity;
discrete Real sineclipticlongitude;
discrete Real y;
discrete Real x;
discrete Real rightascension;
discrete Real greenwichmeansiderealtime;
discrete Real localmeansiderealtime;
discrete Real latitudeinradians;
discrete Real coslatitude;
discrete Real sinlatitude;
discrete Real coshourangle;
discrete Real parallax;
Integer intaux;
public 
algorithm 
elapsedjuliandays := julianday-2451545.0;
aux := 0.0172021241615*elapsedjuliandays;
eclipticlongitude := 4.894969024+0.017202791697*elapsedjuliandays+5.78262765229295E-009*elapsedjuliandays*cos(2.67824+aux)+0.03341656*cos(4.6693+aux)+0.00034894*cos(4.6261+0.03440424832*elapsedjuliandays)-8.339E-005*sin(2.1824-0.00092421755*elapsedjuliandays)+3.934E-005*cos(2.7441+0.01575190938*elapsedjuliandays)+3.461E-005*cos(2.8289+9.64572211E-006*elapsedjuliandays)+3.136E-005*cos(3.6277+0.21276871047*elapsedjuliandays)+2.676E-005*cos(4.4181+0.02152065544*elapsedjuliandays)+3.046E-005*cos(6.1352+0.01076032772*elapsedjuliandays);
eclipticobliquity := 0.409092804039597-6.21395528282155E-009*elapsedjuliandays+4.4596737135516E-005*cos(2.18295428698789-0.000924169576470094*elapsedjuliandays)-2.78266331083708E-006*cos(87.6012025405766-0.0344055570784386*elapsedjuliandays)+1.04358121667584E-007*cos(167.419645046537-0.0698787501985692*elapsedjuliandays);
sineclipticlongitude := sin(eclipticlongitude);
y := cos(eclipticobliquity)*sineclipticlongitude;
x := cos(eclipticlongitude);
rightascension := atan2(y, x);
if (rightascension < 0.0) then 
rightascension := rightascension+twopi;
end if;
declination := asin(sin(eclipticobliquity)*sineclipticlongitude);
greenwichmeansiderealtime := (-60053.302628)+24.065709825*elapsedjuliandays-0.000292222*sin(0.0009242*elapsedjuliandays+0.9574);
localmeansiderealtime := (greenwichmeansiderealtime*15+longitude)*rad;
hourangle := localmeansiderealtime-rightascension;
latitudeinradians := latitude*rad;
coslatitude := cos(latitudeinradians);
sinlatitude := sin(latitudeinradians);
coshourangle := cos(hourangle);
zenithangle := acos(coslatitude*coshourangle*cos(declination)+sin(declination)*sinlatitude);
y :=  -sin(hourangle);
x := tan(declination)*coslatitude-sinlatitude*coshourangle;
azimuth := atan2(y, x);
if (azimuth < 0.0) then 
azimuth := azimuth+twopi;
end if;
parallax := earthmeanradius/astronomicalunit*sin(zenithangle);
zenithangle := zenithangle+parallax;
hourangle := mod(hourangle+3.141592653589793, twopi)-3.141592653589793;
dec := declination;
hra := hourangle;
end sun.solarPosition_Unique1;

  */
DYMOLA_STATIC struct sun_solarPositionx_0Unique1_struct sun_solarPositionx_0Unique1
  (double  t0_0, double  lon0_0, double  lat0_0, double  tx_0zone, int  year0_0)
   {
  PushContext("sun.solarPosition_Unique1")
  {
    /* Declare outputs and temporaries */
    double   dec0_0;
    double   hra0_0;
    double   tx_0zonex_0int;
    double   longitude0_0;
    double   latitude0_0;
    double   julianday0_0;
    double   declination0_0;
    double   hourangle0_0;
    double   zenithangle0_0;
    double   azimuth0_0;
    double   twopi0_0;
    double   rad0_0;
    double   earthmeanradius0_0;
    double   astronomicalunit0_0;
    double   elapsedjuliandays0_0;
    double   aux0_0;
    double   eclipticlongitude0_0;
    double   eclipticobliquity0_0;
    double   sineclipticlongitude0_0;
    double   y0_0;
    double   x0_0;
    double   rightascension0_0;
    double   greenwichmeansiderealtime0_0;
    double   localmeansiderealtime0_0;
    double   latitudeinradians0_0;
    double   coslatitude0_0;
    double   sinlatitude0_0;
    double   coshourangle0_0;
    double   parallax0_0;
    int   intaux0_0;
    dec0_0=0;
    hra0_0=0;
    tx_0zonex_0int = (IF tx_0zone > 0 THEN 1 ELSE IF tx_0zone < 0 THEN -1 ELSE 0)
      *real2integer(fabs(tx_0zone));
    longitude0_0 = lon0_0;
    latitude0_0 = lat0_0;
    julianday0_0 = SolarTherm_Models_Sources_SolarFunctions_julianDay(year0_0, 1,
       1, t0_0/(double)(3600)-tx_0zonex_0int);
    declination0_0=0;
    hourangle0_0=0;
    zenithangle0_0=0;
    azimuth0_0=0;
    twopi0_0 = 6.283185307179586;
    rad0_0 = 0.017453292519943295;
    earthmeanradius0_0 = 6371.01;
    astronomicalunit0_0 = 149597890;
    elapsedjuliandays0_0=0;
    aux0_0=0;
    eclipticlongitude0_0=0;
    eclipticobliquity0_0=0;
    sineclipticlongitude0_0=0;
    y0_0=0;
    x0_0=0;
    rightascension0_0=0;
    greenwichmeansiderealtime0_0=0;
    localmeansiderealtime0_0=0;
    latitudeinradians0_0=0;
    coslatitude0_0=0;
    sinlatitude0_0=0;
    coshourangle0_0=0;
    parallax0_0=0;
    intaux0_0=0;
    /* Start of real code */
      elapsedjuliandays0_0 = julianday0_0-2451545.0;
      aux0_0 = 0.0172021241615*elapsedjuliandays0_0;
      eclipticlongitude0_0 = 4.894969024+0.017202791697*elapsedjuliandays0_0+
        5.78262765229295E-009*elapsedjuliandays0_0*cos(2.67824+aux0_0)+
        0.03341656*cos(4.6693+aux0_0)+0.00034894*cos(4.6261+0.03440424832*
        elapsedjuliandays0_0)-8.339E-005*sin(2.1824-0.00092421755*
        elapsedjuliandays0_0)+3.934E-005*cos(2.7441+0.01575190938*
        elapsedjuliandays0_0)+3.461E-005*cos(2.8289+9.64572211E-006*
        elapsedjuliandays0_0)+3.136E-005*cos(3.6277+0.21276871047*
        elapsedjuliandays0_0)+2.676E-005*cos(4.4181+0.02152065544*
        elapsedjuliandays0_0)+3.046E-005*cos(6.1352+0.01076032772*
        elapsedjuliandays0_0);
      eclipticobliquity0_0 = 0.409092804039597-6.21395528282155E-009*
        elapsedjuliandays0_0+4.4596737135516E-005*cos(2.18295428698789-
        0.000924169576470094*elapsedjuliandays0_0)-2.78266331083708E-006*cos(
        87.6012025405766-0.0344055570784386*elapsedjuliandays0_0)+
        1.04358121667584E-007*cos(167.419645046537-0.0698787501985692*
        elapsedjuliandays0_0);
      sineclipticlongitude0_0 = sin(eclipticlongitude0_0);
      y0_0 = cos(eclipticobliquity0_0)*sineclipticlongitude0_0;
      x0_0 = cos(eclipticlongitude0_0);
      rightascension0_0 = atan2(y0_0, x0_0);
      if (rightascension0_0 < 0.0) {
        rightascension0_0 = rightascension0_0+twopi0_0;
      }
      declination0_0 = asinGuarded(sin(eclipticobliquity0_0)*sineclipticlongitude0_0,
        "sin(eclipticobliquity)*sineclipticlongitude");
      greenwichmeansiderealtime0_0 = (-60053.302628)+24.065709825*
        elapsedjuliandays0_0-0.000292222*sin(0.0009242*elapsedjuliandays0_0+
        0.9574);
      localmeansiderealtime0_0 = (greenwichmeansiderealtime0_0*15+longitude0_0)*
        rad0_0;
      hourangle0_0 = localmeansiderealtime0_0-rightascension0_0;
      latitudeinradians0_0 = latitude0_0*rad0_0;
      coslatitude0_0 = cos(latitudeinradians0_0);
      sinlatitude0_0 = sin(latitudeinradians0_0);
      coshourangle0_0 = cos(hourangle0_0);
      zenithangle0_0 = acosGuarded(coslatitude0_0*coshourangle0_0*cos(
        declination0_0)+sin(declination0_0)*sinlatitude0_0,"coslatitude*coshourangle*cos(declination)+sin(declination)*sinlatitude");
      y0_0 =  -sin(hourangle0_0);
      x0_0 = tan(declination0_0)*coslatitude0_0-sinlatitude0_0*coshourangle0_0;
      azimuth0_0 = atan2(y0_0, x0_0);
      if (azimuth0_0 < 0.0) {
        azimuth0_0 = azimuth0_0+twopi0_0;
      }
      parallax0_0 = divmacro(earthmeanradius0_0,"earthmeanradius",
        astronomicalunit0_0,"astronomicalunit")*sin(zenithangle0_0);
      zenithangle0_0 = zenithangle0_0+parallax0_0;
      hourangle0_0 = modulusDymola(hourangle0_0+3.141592653589793, twopi0_0)-
        3.141592653589793;
      dec0_0 = declination0_0;
      hra0_0 = hourangle0_0;
    /* Output section */
    PopContext()
    {
      struct sun_solarPositionx_0Unique1_struct out_;
      out_.dec0_0_0member = dec0_0;
      out_.hra0_0_0member = hra0_0;
      return out_;
    }
  }}

/* Flattened Modelica model:

function Modelica.SIunits.Conversions.from_deg
discrete input Real degree(unit = "deg") "degree value";
discrete output Real radian(unit = "rad", displayUnit = "deg") "radian value";

algorithm 
radian := 0.017453292519943295*degree;
annotation(Inline=true);
end Modelica.SIunits.Conversions.from_deg;

  */
DYMOLA_STATIC double   Modelica_SIunits_Conversions_fromx_0deg(double  degree0_0)
   {
  PushContext("Modelica.SIunits.Conversions.from_deg")
  {
    /* Declare outputs and temporaries */
    double   radian0_0;
    radian0_0=0;
    /* Start of real code */
      radian0_0 = 0.017453292519943295*degree0_0;
    /* Output section */
    PopContext()
    return radian0_0;
  }}

/* Flattened Modelica model:

function Modelica.SIunits.Conversions.to_degC
discrete input Real Kelvin(nominal = 300.0, unit = "K", displayUnit = "degC", min = 0.0) "Kelvin value";
discrete output Real Celsius(unit = "degC") "Celsius value";

algorithm 
Celsius := Kelvin+(-273.15);
annotation(Inline=true);
end Modelica.SIunits.Conversions.to_degC;

  */
DYMOLA_STATIC double   Modelica_SIunits_Conversions_tox_0degC(double  Kelvin0_0)
   {
  PushContext("Modelica.SIunits.Conversions.to_degC")
  {
    /* Declare outputs and temporaries */
    double   Celsius0_0;
    Celsius0_0=0;
    /* Start of real code */
      Celsius0_0 = Kelvin0_0+(-273.15);
    /* Output section */
    PopContext()
    return Celsius0_0;
  }}

/* Flattened Modelica model:

function SolarTherm.Models.Sources.SolarFunctions.julianDay
input Integer year;
input Integer month;
input Integer day;
discrete input Real hour;
discrete output Real jday;

algorithm 
jday := div(1461*(year+4800+div(month-14, 12)), 4)+div(367*(month-2-12*div(month-14, 12)), 12)-div(3*div(year+4900+div(month-14, 12), 100), 4)+day-32075-0.5+hour/24.0;
end SolarTherm.Models.Sources.SolarFunctions.julianDay;

  */
DYMOLA_STATIC double   SolarTherm_Models_Sources_SolarFunctions_julianDay(int  
  year0_0, int  month0_0, int  day0_0, double  hour0_0) {
  PushContext("SolarTherm.Models.Sources.SolarFunctions.julianDay")
  {
    /* Declare outputs and temporaries */
    double   jday0_0;
    jday0_0=0;
    /* Start of real code */
      jday0_0 = real2integer(divideDymola(1461*(year0_0+4800+real2integer(
        divideDymola(month0_0-14, 12))), 4))+real2integer(divideDymola(367*(
        month0_0-2-12*real2integer(divideDymola(month0_0-14, 12))), 12))-
        real2integer(divideDymola(3*real2integer(divideDymola(year0_0+4900+
        real2integer(divideDymola(month0_0-14, 12)), 100)), 4))+day0_0-32075-0.5
        +hour0_0/(double)(24.0);
    /* Output section */
    PopContext()
    return jday0_0;
  }}
/* DSblock C-code: */

BreakSectionFunctionDef(2)
BreakSectionFunctionDef(0)
#define NX_    8
#define NX2_   3
#define NU_    0
#define NY_    0
#define NW_    228
#define NP_    91
#define NPS_   0
#define MAXAuxStr_   8
#define MAXAuxStrLen_   500
#define NHash1_ 920670578
#define NHash2_ -1437877556
#define NHash3_ 0
#define NI_    0
#define NRelF_ 28
#define NRel_  28
#define NTim_  2
#define NSamp_ 0
#define NCons_ 0
#define NA_    148
#define SizePre_ 8
#define SizeEq_ 6
#define SizeDelay_ 0
#define QNLmax_ 3
#define MAXAux 11
#define NrDymolaTimers_ 0
#define NWhen_ 18
#define NCheckIf_ 0
#define NGlobalHelp_ 178
#define NGlobalHelpI_ 69
#ifndef NExternalObject_
#define NExternalObject_ 2
#endif
#include <moutil.c>
PreNonAliasDef(0)
PreNonAliasDef(1)
PreNonAliasDef(2)
PreNonAliasDef(3)
PreNonAliasDef(4)
PreNonAliasDef(5)
#if !defined(DYM2CCUR)
 DYMOLA_STATIC const char*modelName="SolarTherm.Examples.SolarTower.reference_1";
#endif
DYMOLA_STATIC const char*usedLibraries[]={0};
DYMOLA_STATIC const char*dllLibraryPath[]={0};
DYMOLA_STATIC const char*default_dymosim_license_filename=
 "c:/users/del155/appdata/roaming/dynasim/dymola.lic";
#define QJacobianCGDef_ 1
DYMOLA_STATIC int QJacobianCG_[14]={5 , 4 , 1 , 6 , 7 , 8 , 1 , 2 , 1 , 3 , 1 , 4
   , 1 , 5};
DYMOLA_STATIC int QJacobianGC_[41]={
0 , 1 , 0 , 0 , 0 , 0 , 1 , 1 , 0 , 2 , 0 , 2 , 0 , 2 , 2 , 2 , 0 , 0 , 0 , 3 , 0
   , 0 , 3 , 3 , 4 , 4 , 4 , 4 , 4 , 4 , 4 , 4 , 5 , 5 , 5 , 5 , 5 , 5 , 5 , 5
   , 0};
DYMOLA_STATIC double QJacobianCD_[9]={0  , 44 , 50 , 54 , 56 , 56 , 99 , 110 , 121};
#include <dsblock1.c>

/* Define variable names. */

#define Sections_

TranslatedEquations

InitialSection
#if defined(DynSimStruct) || defined(BUILDFMU)
DYNX(W_,11) = true;
DYNX(W_,12) = true;
DYNX(W_,13) = true;
DYNX(W_,70) = true;
DYNX(W_,72) = true;
DYNX(W_,73) = true;
DYNX(W_,94) = true;
DYNX(W_,96) = true;
DYNX(W_,97) = true;
DYNX(W_,124) = 10;
DYNX(W_,151) = 1.7976931348623157E+308;
DYNX(W_,177) = 1;
DYNX(W_,208) = true;
DYNX(W_,209) = true;
#endif
DYNSetAuxString(did_, "C:/Users/del155/Documents/Dymola/GitHub/Version 0.10/SolarTherm/Data/example_TMY3.motab",
   0);
DYNSetAuxString(did_, "C:/Users/del155/Documents/Dymola/GitHub/Version 0.10/SolarTherm/Data/example_optics.motab",
   1);
DYNSetAuxString(did_, "C:/Users/del155/Documents/Dymola/GitHub/Version 0.10/SolarTherm/Data/example_optics.motab",
   2);
DYNSetAuxString(did_, "optics", 3);
DYNSetAuxString(did_, "C:/Users/del155/Documents/Dymola/GitHub/Version 0.10/SolarTherm/Data/example_optics.motab",
   4);
#if defined(DynSimStruct) || defined(BUILDFMU)
DYNX(W_,54) = false;
DYNX(W_,55) = true;
DYNX(W_,66) = 100000.0;
DYNX(W_,71) = 101325;
DYNX(W_,83) = false;
DYNX(W_,84) = true;
DYNX(W_,95) = 101325;
DYNX(W_,107) = false;
DYNX(W_,108) = true;
#endif
DYNSetAuxString(did_, "C:/Users/del155/Documents/Dymola/GitHub/Version 0.10/SolarTherm/Data/example_TMY3.motab",
   5);
DYNSetAuxString(did_, "data", 6);
DYNSetAuxString(did_, "C:/Users/del155/Documents/Dymola/GitHub/Version 0.10/SolarTherm/Data/example_TMY3.motab",
   7);
#if defined(DynSimStruct) || defined(BUILDFMU)
DYNX(W_,132) = 1;
DYNX(W_,175) = 4;
DYNX(W_,183) = 1.0;
DYNX(W_,184) = 4;
DYNX(W_,191) = false;
DYNX(W_,192) = true;
DYNX(W_,220) = 100000.0;
DYNX(W_,222) = 100000.0;
DYNX(W_,16) = 1;
DYNX(W_,21) = true;
DYNX(W_,22) = 2;
DYNX(W_,74) = 773.15;
DYNX(W_,98) = 553.15;
DYNX(W_,130) = true;
DYNX(W_,131) = 2;
DYNX(W_,171) = 0;
DYNX(W_,45) = 0;
DYNX(W_,52) = 90.9293729084188;
DYNX(W_,81) = 90.9293729084188;
DYNX(W_,105) = 90.9293729084188;
DYNX(W_,172) = 0.0;
DYNX(W_,53) = 0.091438;
DYNX(W_,49) = 0.5;
DYNX(W_,50) = 0.5;
DYNX(W_,106) = 0.091438;
DYNX(W_,102) = 0.5;
DYNX(W_,103) = 0.5;
DYNX(W_,82) = 0.091438;
DYNX(W_,78) = 0.5;
DYNX(W_,79) = 0.5;
#endif
BoundParameterSection
DYNX(W_,3) = DYNX(DP_,37);
DYNX(W_,4) = DYNX(DP_,38);
DYNX(W_,5) = DYNX(DP_,39);
DYNX(W_,6) = DYNX(DP_,40);
DYNX(W_,9) = DYNX(DP_,37);
DYNX(W_,10) = DYNX(DP_,38);
DYNX(W_,15) = DYNX(W_,10);
DYNX(W_,40) = DYNX(DP_,5)*DYNX(DP_,4);
DYNX(W_,41) = DYNX(DP_,6)*DYNX(DP_,4);
DYNX(W_,42) = DYNX(DP_,7)*DYNX(DP_,4);
DYNX(W_,62) = divmacro(DYNX(DP_,14)*3.141592653589793,"receiver.D_rcv*3.141592653589793",
  DYNX(DP_,15),"receiver.N_pa");
DYNX(W_,63) = divideDymola(DYNX(W_,62), DYNX(DP_,16));
DYNX(W_,64) = 3.141592653589793*DYNX(DP_,15)*DYNX(W_,63)*DYNX(DP_,13)*sqr(
  DYNX(DP_,16)/(double)(2)-DYNX(DP_,17));
DYNX(W_,65) = 1.5707963267948966*DYNX(DP_,15)*DYNX(W_,63)*DYNX(DP_,13)*
  DYNX(DP_,16);
DYNX(W_,67) = 1396.0182*DYNX(DP_,20)+0.086*sqr(DYNX(DP_,20));
DYNX(W_,68) = DYNX(W_,67);
DYNX(W_,92) = 0.25*DYNX(DP_,22)*3.141592653589793*sqr(DYNX(DP_,21));
DYNX(W_,116) = 0.25*DYNX(DP_,30)*3.141592653589793*sqr(DYNX(DP_,29));
DYNX(W_,137) = DYNX(DP_,53);
DYNX(W_,138) = DYNX(DP_,53);
DYNX(W_,139) = DYNX(DP_,53);
DYNX(W_,140) = DYNX(DP_,53);
DYNX(W_,141) = DYNX(DP_,53);
DYNX(W_,142) = DYNX(DP_,53);
DYNX(W_,143) = DYNX(DP_,53);
DYNX(W_,144) = DYNX(DP_,53);
DYNX(W_,145) = DYNX(DP_,53);
DYNX(W_,146) = DYNX(DP_,53);
DYNX(W_,155) = DYNX(DP_,59);
DYNX(W_,156) = DYNX(DP_,60);
DYNX(W_,159) = DYNX(DP_,55);
DYNX(W_,160) = DYNX(DP_,55)/(double)(2);
DYNX(W_,161) = DYNX(DP_,57);
DYNX(W_,162) = DYNX(DP_,58);
DYNX(W_,174) = DYNX(DP_,71);
DYNX(W_,176) = DYNX(DP_,70);
DYNX(W_,178) = DYNX(DP_,72);
DYNX(W_,179) = DYNX(DP_,65);
DYNX(W_,180) = DYNX(DP_,66);
DYNX(W_,181) = DYNX(W_,178);
DYNX(W_,185) = divmacro(DYNX(W_,176),"controlCold.PI.y_start",DYNX(W_,178),
  "controlCold.PI.Kp");
DYNX(W_,187) = divmacro(DYNX(W_,178),"controlCold.PI.Kp",DYNX(W_,174),
  "controlCold.PI.Ti");
DYNX(W_,189) = DYNX(W_,179);
DYNX(W_,190) = DYNX(W_,180);
DYNX(W_,194) = divmacro(1,"1",DYNX(DP_,73),"controlCold.PI.Tt");
DYNX(W_,197) = DYNX(DP_,67);
DYNX(W_,200) = DYNX(DP_,69);
DYNX(W_,201) = DYNX(DP_,68);
DYNX(W_,221) = 1396.0182*DYNX(DP_,82)+0.086*sqr(DYNX(DP_,82));
DYNX(W_,224) = DYNX(W_,221);
DYNX(W_,223) = 1396.0182*DYNX(DP_,83)+0.086*sqr(DYNX(DP_,83));
DYNX(W_,225) = DYNX(W_,223);
DYNX(W_,217) = divmacro(DYNX(DP_,85),"powerBlock.Q_flow_ref",DYNX(W_,224)-
  DYNX(W_,225),"powerBlock.h_in_ref-powerBlock.h_out_ref");
DYNX(W_,218) = (PushModelContext(1,"Modelica.Media.Water.IF97_Utilities.BaseIF97.Basic.tsat(powerBlock.p_bo)")
  Modelica_Media_Water_IF97x_0Utilities_BaseIF97_Basic_tsat(DYNX(DP_,84)));
PopModelContext();
InitialBoundSection
{
  struct DymStruc0 dummy_DymStruc0;
  dummy_DymStruc0 = (PushModelContext(1,"Modelica.Blocks.Types.ExternalCombiTimeTable(\"data\", \"C:/Users/del155/Documents/Dymola/GitHub/Version 0.10/SolarTherm/Data/example_TMY3.motab\", data.table.table, data.table.startTime, data.table.columns, Modelica.Blocks.Types.Smoothness.ContinuousDerivative, data.table.extrapolation, 0, 1)")
    Modelica_Blocks_Types_ExternalCombiTimeTable_M("data", "C:/Users/del155/Documents/Dymola/GitHub/Version 0.10/SolarTherm/Data/example_TMY3.motab",
     RealTemporaryDense( (Real*)(0), 2, 0, 2), DYNX(DP_,54), IntegerTemporaryDense( 
    &DYNX(DP_,42), 1, 10), 2, (Integer)(DYNX(DP_,52)), 0, 1));
  DYNX(W_,147) = dummy_DymStruc0.id_0member;
PopAllMarks();
}
{
  struct DymStruc0 dummy_DymStruc0;
  dummy_DymStruc0 = (PushModelContext(1,"Modelica.Blocks.Types.ExternalCombiTable2D(\"optics\", \"C:/Users/del155/Documents/Dymola/GitHub/Version 0.10/SolarTherm/Data/example_optics.motab\", heliostatsField.optical.nu_table.table, Modelica.Blocks.Types.Smoothness.ContinuousDerivative, 1, 0)")
    Modelica_Blocks_Types_ExternalCombiTable2D_M("optics", "C:/Users/del155/Documents/Dymola/GitHub/Version 0.10/SolarTherm/Data/example_optics.motab",
     RealTemporaryDense( (Real*)(0), 2, 0, 2), 2, 1, 0));
  DYNX(W_,23) = dummy_DymStruc0.id_0member;
PopAllMarks();
}
BoundParameterSection
DYNX(W_,89) = 1396.0182*DYNX(DP_,25)+0.086*sqr(DYNX(DP_,25));
DYNX(W_,113) = 1396.0182*DYNX(DP_,33)+0.086*sqr(DYNX(DP_,33));
InitialSection
#if defined(DynSimStruct) || defined(BUILDFMU)
DYNX(W_,7) = 288.15;
DYNX(W_,44) = 100000.0;
DYNX(W_,48) = 1;
DYNX(W_,61) = 288.15;
DYNX(W_,76) = 1;
DYNX(W_,77) = 800;
DYNX(W_,100) = 1;
DYNX(W_,101) = 800;
DYNX(W_,120) = 288.15;
DYNX(W_,148) = 0;
DYNX(W_,149) = 0;
DYNX(W_,157) = false;
DYNX(W_,202) = false;
DYNX(W_,205) = 0;
DYNX(W_,206) = 288.15;
DYNX(W_,207) = 288.15;
#endif
InitialSection
InitialStartSection
InitialStartSection2
DYNX(W_,58) = DYNX(W_,68);
DYNX(X_,4) = DYNX(W_,185);
InitialSection
DefaultSection
InitializeData(0)
InitialSection
DYNX(Aux_,0) = DYNX(W_,202);
DYNX(Aux_,1) = DYNX(W_,198);
DYNX(Aux_,2) = DYNX(W_,157);
DYNX(Aux_,3) = DYNX(W_,166);
DYNX(Aux_,4) = DYNX(W_,164);
DYNX(Aux_,5) = DYNX(W_,167);
DYNX(Aux_,6) = DYNX(W_,168);
DYNX(Aux_,8) = DYNX(W_,149);
DYNX(Aux_,7) = DYNX(W_,148);
DYNX(Aux_,9) = DYNX(W_,37);
DYNX(Aux_,10) = DYNX(W_,36);
InitialSection
InitialSection2
DYNX(W_,168) = 0;
DYNX(W_,167) = 0;
InitialSection
DYNX(Aux_,5) = 0;
DYNX(Aux_,6) = 0;
InitialSection2
DYNX(W_,3) = DYNX(DP_,37);
DYNX(W_,4) = DYNX(DP_,38);
DYNX(W_,5) = DYNX(DP_,39);
DYNX(W_,9) = DYNX(DP_,37);
DYNX(W_,10) = DYNX(DP_,38);
DYNX(W_,15) = DYNX(W_,10);
DYNX(W_,40) = DYNX(DP_,5)*DYNX(DP_,4);
DYNX(W_,41) = DYNX(DP_,6)*DYNX(DP_,4);
DYNX(W_,42) = DYNX(DP_,7)*DYNX(DP_,4);
DYNX(W_,62) = divmacro(DYNX(DP_,14)*3.141592653589793,"receiver.D_rcv*3.141592653589793",
  DYNX(DP_,15),"receiver.N_pa");
DYNX(W_,63) = divideDymola(DYNX(W_,62), DYNX(DP_,16));
DYNX(W_,64) = 3.141592653589793*DYNX(DP_,15)*DYNX(W_,63)*DYNX(DP_,13)*sqr(
  DYNX(DP_,16)/(double)(2)-DYNX(DP_,17));
DYNX(W_,65) = 1.5707963267948966*DYNX(DP_,15)*DYNX(W_,63)*DYNX(DP_,13)*
  DYNX(DP_,16);
DYNX(W_,67) = 1396.0182*DYNX(DP_,20)+0.086*sqr(DYNX(DP_,20));
DYNX(W_,68) = DYNX(W_,67);
DYNX(W_,92) = 0.25*DYNX(DP_,22)*3.141592653589793*sqr(DYNX(DP_,21));
DYNX(W_,116) = 0.25*DYNX(DP_,30)*3.141592653589793*sqr(DYNX(DP_,29));
DYNX(W_,137) = DYNX(DP_,53);
DYNX(W_,138) = DYNX(DP_,53);
DYNX(W_,139) = DYNX(DP_,53);
DYNX(W_,140) = DYNX(DP_,53);
DYNX(W_,141) = DYNX(DP_,53);
DYNX(W_,142) = DYNX(DP_,53);
DYNX(W_,143) = DYNX(DP_,53);
DYNX(W_,144) = DYNX(DP_,53);
DYNX(W_,145) = DYNX(DP_,53);
DYNX(W_,146) = DYNX(DP_,53);
DYNX(W_,155) = DYNX(DP_,59);
DYNX(W_,156) = DYNX(DP_,60);
DYNX(W_,159) = DYNX(DP_,55);
DYNX(W_,160) = DYNX(DP_,55)/(double)(2);
DYNX(W_,161) = DYNX(DP_,57);
DYNX(W_,162) = DYNX(DP_,58);
DYNX(W_,174) = DYNX(DP_,71);
DYNX(W_,176) = DYNX(DP_,70);
DYNX(W_,178) = DYNX(DP_,72);
DYNX(W_,179) = DYNX(DP_,65);
DYNX(W_,180) = DYNX(DP_,66);
DYNX(W_,181) = DYNX(W_,178);
DYNX(W_,185) = divmacro(DYNX(W_,176),"controlCold.PI.y_start",DYNX(W_,178),
  "controlCold.PI.Kp");
DYNX(W_,187) = divmacro(DYNX(W_,178),"controlCold.PI.Kp",DYNX(W_,174),
  "controlCold.PI.Ti");
DYNX(W_,189) = DYNX(W_,179);
DYNX(W_,190) = DYNX(W_,180);
AssertModelica(DYNX(W_,189) >= DYNX(W_,190),"controlCold.PI.limiter.uMax >= controlCold.PI.limiter.uMin",
   StringAdd(StringAdd(StringAdd(StringAdd("Limiter: Limits must be consistent. However, uMax (=",
  Real2String2(DYNX(W_,189), true, 0)),") < uMin (="),Real2String2(DYNX(W_,190),
   true, 0)),")"));
PopAllMarks();
DYNX(W_,194) = divmacro(1,"1",DYNX(DP_,73),"controlCold.PI.Tt");
DYNX(W_,197) = DYNX(DP_,67);
DYNX(W_,200) = DYNX(DP_,69);
DYNX(W_,201) = DYNX(DP_,68);
DYNX(W_,221) = 1396.0182*DYNX(DP_,82)+0.086*sqr(DYNX(DP_,82));
DYNX(W_,224) = DYNX(W_,221);
DYNX(W_,223) = 1396.0182*DYNX(DP_,83)+0.086*sqr(DYNX(DP_,83));
DYNX(W_,225) = DYNX(W_,223);
DYNX(W_,217) = divmacro(DYNX(DP_,85),"powerBlock.Q_flow_ref",DYNX(W_,224)-
  DYNX(W_,225),"powerBlock.h_in_ref-powerBlock.h_out_ref");
DYNX(W_,218) = (PushModelContext(1,"Modelica.Media.Water.IF97_Utilities.BaseIF97.Basic.tsat(powerBlock.p_bo)")
  Modelica_Media_Water_IF97x_0Utilities_BaseIF97_Basic_tsat(DYNX(DP_,84)));
PopModelContext();
DYNX(W_,6) = DYNX(DP_,40);
InitialBoundSection
{
  struct DymStruc0 dummy_DymStruc0;
  dummy_DymStruc0 = (PushModelContext(1,"Modelica.Blocks.Types.ExternalCombiTable2D(\"optics\", \"C:/Users/del155/Documents/Dymola/GitHub/Version 0.10/SolarTherm/Data/example_optics.motab\", heliostatsField.optical.nu_table.table, Modelica.Blocks.Types.Smoothness.ContinuousDerivative, 1, 0)")
    Modelica_Blocks_Types_ExternalCombiTable2D_M("optics", "C:/Users/del155/Documents/Dymola/GitHub/Version 0.10/SolarTherm/Data/example_optics.motab",
     RealTemporaryDense( (Real*)(0), 2, 0, 2), 2, 1, 0));
  DYNX(W_,23) = dummy_DymStruc0.id_0member;
PopAllMarks();
}
DYNX(W_,24) = 0.0;
  {
    DYNX(W_,24) = (PushModelContext(1,"Modelica.Blocks.Tables.CombiTable2D.readTableData(\nheliostatsField.optical.nu_table.tableID, \nfalse, \nheliostatsField.optical.nu_table.verboseRead)")
      Modelica_Blocks_Tables_CombiTable2D_readTableData_M(DymStruc0_construct(
      (Integer)(DYNX(W_,23))), false, (Integer)(DYNX(DP_,11))));
  }
{
  struct DymStruc0 dummy_DymStruc0;
  dummy_DymStruc0 = (PushModelContext(1,"Modelica.Blocks.Types.ExternalCombiTimeTable(\"data\", \"C:/Users/del155/Documents/Dymola/GitHub/Version 0.10/SolarTherm/Data/example_TMY3.motab\", data.table.table, data.table.startTime, data.table.columns, Modelica.Blocks.Types.Smoothness.ContinuousDerivative, data.table.extrapolation, 0, 1)")
    Modelica_Blocks_Types_ExternalCombiTimeTable_M("data", "C:/Users/del155/Documents/Dymola/GitHub/Version 0.10/SolarTherm/Data/example_TMY3.motab",
     RealTemporaryDense( (Real*)(0), 2, 0, 2), DYNX(DP_,54), IntegerTemporaryDense( 
    &DYNX(DP_,42), 1, 10), 2, (Integer)(DYNX(DP_,52)), 0, 1));
  DYNX(W_,147) = dummy_DymStruc0.id_0member;
PopAllMarks();
}
DYNX(W_,150) = 0.0;
  {
    DYNX(W_,150) = (PushModelContext(1,"Modelica.Blocks.Sources.CombiTimeTable.readTableData(\ndata.table.tableID, \nfalse, \ndata.table.verboseRead)")
      Modelica_Blocks_Sources_CombiTimeTable_readTableData_M(DymStruc0_construct(
      (Integer)(DYNX(W_,147))), false, (Integer)(DYNX(DP_,41))));
  }
  DYNX(W_,135) = (PushModelContext(1,"Modelica.Blocks.Sources.CombiTimeTable.getTableTimeTmin(\ndata.table.tableID, \ndata.table.tableOnFileRead)")
    Modelica_Blocks_Sources_CombiTimeTable_getTableTimeTmin_M(DymStruc0_construct(
    (Integer)(DYNX(W_,147))), DYNX(W_,150)));
  DYNX(W_,136) = (PushModelContext(1,"Modelica.Blocks.Sources.CombiTimeTable.getTableTimeTmax(\ndata.table.tableID, \ndata.table.tableOnFileRead)")
    Modelica_Blocks_Sources_CombiTimeTable_getTableTimeTmax_M(DymStruc0_construct(
    (Integer)(DYNX(W_,147))), DYNX(W_,150)));
  DYNX(W_,133) = DYNX(W_,135);
  DYNX(W_,134) = DYNX(W_,136);
InitialSection2
DYNX(W_,152) = DYNTime;
PopModelContext();
InitialBoundSection
DYNX(W_,149) = (PushModelContext(1,"Modelica.Blocks.Sources.CombiTimeTable.getNextTimeEvent(\ndata.table.tableID, \ndata.table.timeScaled, \ndata.table.tableOnFileRead)")
  Modelica_Blocks_Sources_CombiTimeTable_getNextTimeEvent_M(DymStruc0_construct(
  (Integer)(DYNX(W_,147))), DYNX(W_,152), DYNX(W_,150)));
PopModelContext();
InitialSection2
DYNX(W_,36) = DYNX(Aux_,10);
DYNX(W_,148) = IF Less(DYNX(W_,149),"data.table.nextTimeEventScaled", 
  1.7976931348623157E+308,"1.7976931348623157E+308", 0) THEN DYNX(W_,149) ELSE 
  1.7976931348623157E+308;
DYNX(W_,89) = 1396.0182*DYNX(DP_,25)+0.086*sqr(DYNX(DP_,25));
DYNX(W_,113) = 1396.0182*DYNX(DP_,33)+0.086*sqr(DYNX(DP_,33));
DYNX(X_,4) = DYNX(W_,185);
DYNX(X_,2) = 0.01*(PushModelContext(1,"SolarTherm.Media.MoltenSalt.MoltenSalt_Utilities.rho_T(5.813953488372094*(sqrt(abs(1948866.81473124+0.344*tankCold.state_i.h))-1396.0182))")
  SolarTherm_Media_MoltenSalt_MoltenSaltx_0Utilities_rhox_0T(5.813953488372094*(
  sqrtGuarded(fabs(1948866.81473124+0.344*DYNX(W_,113)),"abs(1948866.81473124+0.344*tankCold.state_i.h)")
  -1396.0182)))*DYNX(W_,116)*DYNX(DP_,32);
PopModelContext();
DYNX(X_,3) = DYNX(W_,113);
DYNX(X_,0) = 0.01*(PushModelContext(1,"SolarTherm.Media.MoltenSalt.MoltenSalt_Utilities.rho_T(5.813953488372094*(sqrt(abs(1948866.81473124+0.344*tankHot.state_i.h))-1396.0182))")
  SolarTherm_Media_MoltenSalt_MoltenSaltx_0Utilities_rhox_0T(5.813953488372094*(
  sqrtGuarded(fabs(1948866.81473124+0.344*DYNX(W_,89)),"abs(1948866.81473124+0.344*tankHot.state_i.h)")
  -1396.0182)))*DYNX(W_,92)*DYNX(DP_,24);
PopModelContext();
DYNX(X_,1) = DYNX(W_,89);
DYNX(W_,37) = DYNX(Aux_,9);
DYNX(W_,77) = 5.813953488372094*(sqrtGuarded(fabs(1948866.81473124+0.344*
  DYNX(X_,1)),"abs(1948866.81473124+0.344*tankHot.medium.h)")-1396.0182);
DYNX(W_,76) = (PushModelContext(1,"SolarTherm.Media.MoltenSalt.MoltenSalt_Utilities.rho_T(tankHot.medium.T)")
  SolarTherm_Media_MoltenSalt_MoltenSaltx_0Utilities_rhox_0T(DYNX(W_,77)));
PopModelContext();
DYNX(W_,75) = divmacro(DYNX(X_,0),"tankHot.m",DYNX(W_,76),"tankHot.medium.d");
DYNX(W_,154) = divmacro(100*DYNX(W_,75),"100*tankHot.V",DYNX(W_,92),
  "tankHot.V_t");
DYNX(W_,157) = Greater(DYNX(W_,154),"controlHot.defocus_logic.level_ref", 
  DYNX(W_,155),"controlHot.defocus_logic.level_max", 1) AND Greater(DYNX(W_,154),
  "controlHot.defocus_logic.level_ref", DYNX(W_,156),"controlHot.defocus_logic.level_min",
   2);
DYNX(W_,101) = 5.813953488372094*(sqrtGuarded(fabs(1948866.81473124+0.344*
  DYNX(X_,3)),"abs(1948866.81473124+0.344*tankCold.medium.h)")-1396.0182);
DYNX(W_,100) = (PushModelContext(1,"SolarTherm.Media.MoltenSalt.MoltenSalt_Utilities.rho_T(tankCold.medium.T)")
  SolarTherm_Media_MoltenSalt_MoltenSaltx_0Utilities_rhox_0T(DYNX(W_,101)));
PopModelContext();
DYNX(W_,99) = divmacro(DYNX(X_,2),"tankCold.m",DYNX(W_,100),"tankCold.medium.d");
DYNX(W_,196) = divmacro(100*DYNX(W_,99),"100*tankCold.V",DYNX(W_,116),
  "tankCold.V_t");
DYNX(W_,199) = DYNX(W_,196);
DYNX(W_,202) = Greater(DYNX(W_,199),"controlCold.defocus_logic.level_ref", 
  DYNX(W_,200),"controlCold.defocus_logic.level_max", 3) AND Greater(
  DYNX(W_,199),"controlCold.defocus_logic.level_ref", DYNX(W_,201),
  "controlCold.defocus_logic.level_min", 4);
DYNX(W_,198) = Greater(DYNX(W_,196),"controlCold.hotTankLogic.level_ref", 
  DYNX(DP_,80),"controlCold.hotTankLogic.level_max", 5) AND Greater(DYNX(W_,196),
  "controlCold.hotTankLogic.level_ref", DYNX(W_,197),"controlCold.hotTankLogic.level_min",
   6);
DYNX(W_,158) = DYNX(W_,154);
DYNX(W_,166) = Greater(DYNX(W_,158),"controlHot.logic.level", DYNX(W_,161),
  "controlHot.logic.level_on", 7) AND Greater(DYNX(W_,158),"controlHot.logic.level",
   DYNX(W_,162),"controlHot.logic.level_off", 8);
DYNX(W_,164) = DYNX(Aux_,4);
InitialSection
DYNX(Aux_,0) = DYNX(W_,202);
DYNX(Aux_,1) = DYNX(W_,198);
DYNX(Aux_,2) = DYNX(W_,157);
DYNX(Aux_,3) = DYNX(W_,166);
InitialSection2
DYNX(W_,126) = DYNX(W_,140)+(PushModelContext(1,"Modelica.Blocks.Sources.CombiTimeTable.getTableValue(\ndata.table.tableID, \n4, \ndata.table.timeScaled, \ndata.table.nextTimeEventScaled, \ndata.table.nextTimeEventScaled_.start, \ndata.table.tableOnFileRead)")
  Modelica_Blocks_Sources_CombiTimeTable_getTableValue_M(DymStruc0_construct(
  (Integer)(DYNX(W_,147))), 4, DYNX(W_,152), DYNX(W_,149), DYNX(Aux_,8), 
  DYNX(W_,150)));
PopModelContext();
DYNX(W_,61) = 273.15+DYNX(W_,126);
{
  struct sun_solarPositionx_0Unique1_struct dummy_mult_=(PushModelContext(1,
    "sun.solarPosition_Unique1(time, sun.lon, sun.lat, sun.t_zone, sun.year)")
    sun_solarPositionx_0Unique1(DYNTime, DYNX(W_,3), DYNX(W_,4), DYNX(W_,5), 
    (Integer)(DYNX(W_,6))));
  DYNX(W_,0) = dummy_mult_.dec0_0_0member;
  DYNX(W_,1) = dummy_mult_.hra0_0_0member;
}
PopModelContext();
DYNX(W_,27) = RealBmax(0, asinGuarded(sin(0.017453292519943295*DYNX(W_,10))*sin(
  DYNX(W_,0))+cos(0.017453292519943295*DYNX(W_,10))*cos(DYNX(W_,0))*cos(
  DYNX(W_,1)),"sin(0.017453292519943295*heliostatsField.lat)*sin(sun.solar.dec)+cos(0.017453292519943295*heliostatsField.lat)*cos(sun.solar.dec)*cos(sun.solar.hra)"));
DYNX(W_,39) = DYNX(W_,144)+(PushModelContext(1,"Modelica.Blocks.Sources.CombiTimeTable.getTableValue(\ndata.table.tableID, \n8, \ndata.table.timeScaled, \ndata.table.nextTimeEventScaled, \ndata.table.nextTimeEventScaled_.start, \ndata.table.tableOnFileRead)")
  Modelica_Blocks_Sources_CombiTimeTable_getTableValue_M(DymStruc0_construct(
  (Integer)(DYNX(W_,147))), 8, DYNX(W_,152), DYNX(W_,149), DYNX(Aux_,8), 
  DYNX(W_,150)));
PopModelContext();
DYNX(W_,125) = DYNX(W_,138)+(PushModelContext(1,"Modelica.Blocks.Sources.CombiTimeTable.getTableValue(\ndata.table.tableID, \n2, \ndata.table.timeScaled, \ndata.table.nextTimeEventScaled, \ndata.table.nextTimeEventScaled_.start, \ndata.table.tableOnFileRead)")
  Modelica_Blocks_Sources_CombiTimeTable_getTableValue_M(DymStruc0_construct(
  (Integer)(DYNX(W_,147))), 2, DYNX(W_,152), DYNX(W_,149), DYNX(Aux_,8), 
  DYNX(W_,150)));
PopModelContext();
DYNX(W_,2) = RealBmax(DYNX(W_,125), 0);
DYNX(W_,17) = (PushModelContext(1,"SolarTherm.Models.Sources.SolarFunctions.eclipticLongitude(sun.solar.dec)")
  SolarTherm_Models_Sources_SolarFunctions_eclipticLongitude(DYNX(W_,0)));
PopModelContext();
DYNX(W_,18) = 57.29577951308232*DYNX(W_,17);
DYNX(W_,19) = 57.29577951308232*DYNX(W_,1);
DYNX(W_,20) = (PushModelContext(1,"Modelica.Blocks.Tables.CombiTable2D.getTableValue(\nheliostatsField.optical.nu_table.tableID, \nheliostatsField.optical.nu_table.u1, \nheliostatsField.optical.nu_table.u2, \nheliostatsField.optical.nu_table.tableOnFileRead)")
  Modelica_Blocks_Tables_CombiTable2D_getTableValue_M(DymStruc0_construct(
  (Integer)(DYNX(W_,23))), DYNX(W_,18), DYNX(W_,19), DYNX(W_,24)));
PopModelContext();
DYNX(W_,14) = RealBmax(0, DYNX(W_,20));
DYNX(W_,33) = Greater(DYNX(W_,27),"heliostatsField.ele", DYNX(DP_,3),
  "heliostatsField.ele_min", 9) AND Less(DYNX(W_,39),"heliostatsField.Wspd_internal",
   DYNX(DP_,8),"heliostatsField.Wspd_max", 10);
DYNX(W_,25) = IF DYNX(W_,33) THEN RealBmax(DYNX(DP_,2)*DYNX(DP_,0)*DYNX(DP_,1)*
  DYNX(W_,2)*DYNX(W_,14), 0) ELSE 0;
DYNX(W_,203) =  NOT DYNX(W_,202);
DYNX(W_,38) = DYNX(W_,157) OR DYNX(W_,203);
DYNX(W_,8) =  -(IF DYNX(W_,37) THEN (IF DYNX(W_,38) THEN RealBmin(DYNX(W_,42), 
  DYNX(W_,25)) ELSE DYNX(W_,25)) ELSE 0);
DYNX(W_,170) = DYNX(W_,198) AND DYNX(W_,37);
if (DymolaHomotopyLambda==0){
  BreakSectionCall(1);
}
else {

  { /* Non-linear system of equations to solve. */
    /* Nonlinear system of equations number = 2. */
  /* Introducing 12 common subexpressions used in 10 expressions */
  /* Of the common subexpressions 9 are reals, 0 are integers, and 3
     are booleans. */
  const char*const varnames_[]={"receiver.h_out"};
  const double nominal_[]={1};
  NonLinearSystemOfEquations(Jacobian__, residue__, x__, 1, 0, 2, 8, 
    DYNX(DYNhelp,46), 35, DYNX(did_->helpvari_vec,23), 23);
  SetInitVector(x__, 1, DYNX(W_,58), DYNX(W_,68));
  Residues;
    DYNX(W_,46) = RealBmax(DYNX(W_,68), DYNX(W_,58));
    DYNX(DYNhelp,81) = 0.344*DYNX(W_,46);
    DYNX(DYNhelp,82) = sqrtGuarded(fabs(1948866.81473124+DYNX(DYNhelp,81)),
      "abs(1948866.81473124+0.344*receiver.fluid_b.h_outflow)");
    DYNX(W_,153) = 5.813953488372094*(DYNX(DYNhelp,82)-1396.0182);
    DYNX(W_,173) = DYNX(DP_,64)-DYNX(W_,153);
    DYNX(W_,182) = DYNX(W_,181)*DYNX(W_,173);
    DYNX(W_,186) = DYNX(DP_,74)*DYNX(W_,182)+DYNX(DP_,75)*DYNX(X_,4);
    DYNX(DYNhelp,83) = GreaterS(DYNX(W_,186),"controlCold.PI.Add.y", 
      DYNX(W_,189),"controlCold.PI.limiter.uMax", 11);
    DYNX(W_,169) = homotopy(IF DYNX(DYNhelp,83) THEN DYNX(W_,189) ELSE IF LessS(
      DYNX(W_,186),"controlCold.PI.Add.y", DYNX(W_,190),"controlCold.PI.limiter.uMin",
       12) THEN DYNX(W_,190) ELSE DYNX(W_,186), DYNX(W_,186));
    DYNX(W_,43) = IF DYNX(W_,170) THEN DYNX(W_,169) ELSE 0.0;
    DYNX(W_,47) = 0.5*(DYNX(X_,3)+DYNX(W_,58));
    DYNX(DYNhelp,84) = 0.344*DYNX(W_,47);
    DYNX(DYNhelp,85) = sqrtGuarded(fabs(1948866.81473124+DYNX(DYNhelp,84)),
      "abs(1948866.81473124+0.344*receiver.medium.h)");
    DYNX(W_,7) = 5.813953488372094*(DYNX(DYNhelp,85)-1396.0182);
    DYNX(DYNhelp,86) = DYNX(W_,65)*5.670367E-008*DYNX(DP_,19);
    DYNX(W_,59) =  -DYNX(DYNhelp,86)*(powmacro(DYNX(W_,7),"heliostatsField.heat.T",4,
      "4")-powmacro(DYNX(W_,61),"receiver.Tamb",4,"4"));
  SetVector(residue__, 1,  -(DYNX(W_,59)-DYNX(DP_,18)*DYNX(W_,8)+DYNX(W_,43)*(
    DYNX(X_,3)-DYNX(W_,58))));

  Jacobian(Jacobian__)
  MatrixZeros(Jacobian__);
  DYNX(DYNhelp,87) = (IF 1948866.81473124+DYNX(DYNhelp,81) > 0 THEN 1 ELSE -1)*
    DYNX(W_,181)*DYNX(DP_,74)*homotopy(IF DYNX(DYNhelp,83) THEN 0.0 ELSE IF 
    LessS(DYNX(W_,186),"controlCold.PI.Add.y", DYNX(W_,190),"controlCold.PI.limiter.uMin",
     12) THEN 0.0 ELSE 1.0, 1.0)*(IF DYNX(W_,170) THEN 1.0 ELSE 0.0)*(
    DYNX(W_,58)-DYNX(X_,3));
  DYNX(DYNhelp,88) = DYNX(W_,68) > DYNX(W_,58);
  DYNX(DYNhelp,89) = divmacro(1.0,"1.0",DYNX(DYNhelp,82),"sqrt(abs(1948866.81473124+0.344*receiver.fluid_b.h_outflow))");
  DYNX(DYNhelp,90) = 1948866.81473124+DYNX(DYNhelp,84) > 0;
  DYNX(DYNhelp,91) = DYNX(DYNhelp,86)*powmacro(DYNX(W_,7),"heliostatsField.heat.T",3,
    "3");
  DYNX(DYNhelp,92) = divmacro(1.0,"1.0",DYNX(DYNhelp,85),"sqrt(abs(1948866.81473124+0.344*receiver.medium.h))");
  SetMatrixLeading(Jacobian__, 1, 1, 1, DYNX(W_,43)+DYNX(DYNhelp,89)*(-1.0)*
    DYNX(DYNhelp,87)*(IF DYNX(DYNhelp,88) THEN 0.0 ELSE 1.0)+DYNX(DYNhelp,92)*
    2.0*(IF DYNX(DYNhelp,90) THEN 1 ELSE -1)*DYNX(DYNhelp,91));

  SolveNonLinearSystemOfEquationsInit(Jacobian__, residue__, x__);
  DYNX(W_,58) = GetVector(x__, 1);
  EndNonLinearSystemOfEquationsInit(residue__, x__, 2);
   /* End of Non-Linear Equation Block */ }



}
BreakSectionFunctionCallNew(0);
BreakSectionFunctionEnd()
BreakSectionFunctionStart(2);
InitialSection2
Init_=false;InitializeData(2);Init_=true;
EndInitialSection

OutputSection

DynamicsSection
DYNX(W_,152) = DYNTime;
beginwhenBlock
whenModelica(GreaterEqualTimeMinor(PRE(DYNX(W_,148), 0), 0), 0) 
  DYNX(W_,149) = (PushModelContext(1,"Modelica.Blocks.Sources.CombiTimeTable.getNextTimeEvent(\ndata.table.tableID, \ndata.table.timeScaled, \ndata.table.tableOnFileRead)")
  Modelica_Blocks_Sources_CombiTimeTable_getNextTimeEvent_M(DymStruc0_construct(
  (Integer)(DYNX(W_,147))), DYNX(W_,152), DYNX(W_,150)));
endwhenModelica()
endwhenBlock

PopModelContext();
DYNX(DYNhelp,93) = (PushModelContext(1,"Modelica.Blocks.Sources.CombiTimeTable.getTableValue(\ndata.table.tableID, \n4, \ndata.table.timeScaled, \ndata.table.nextTimeEventScaled, \npre(data.table.nextTimeEventScaled), \ndata.table.tableOnFileRead)")
  Modelica_Blocks_Sources_CombiTimeTable_getTableValue_M(DymStruc0_construct(
  (Integer)(DYNX(W_,147))), 4, DYNX(W_,152), DYNX(W_,149), PRE(DYNX(W_,149), 1),
   DYNX(W_,150)));
PopModelContext();
DYNX(W_,126) = DYNX(W_,140)+DYNX(DYNhelp,93);
DYNX(W_,61) = 273.15+DYNX(W_,126);
{
  struct sun_solarPositionx_0Unique1_struct dummy_mult_=(PushModelContext(1,
    "sun.solarPosition_Unique1(time, sun.lon, sun.lat, sun.t_zone, sun.year)")
    sun_solarPositionx_0Unique1(DYNTime, DYNX(W_,3), DYNX(W_,4), DYNX(W_,5), 
    (Integer)(DYNX(W_,6))));
  DYNX(W_,0) = dummy_mult_.dec0_0_0member;
  DYNX(W_,1) = dummy_mult_.hra0_0_0member;
}
PopModelContext();
DYNX(DYNhelp,94) = 0.017453292519943295*DYNX(W_,10);
if (NewParameters_) {
DYNX(DYNhelp,95) = sin(DYNX(DYNhelp,94));
}
DYNX(DYNhelp,96) = sin(DYNX(W_,0));
if (NewParameters_) {
DYNX(DYNhelp,97) = cos(DYNX(DYNhelp,94));
}
DYNX(DYNhelp,98) = cos(DYNX(W_,0));
DYNX(DYNhelp,99) = cos(DYNX(W_,1));
DYNX(DYNhelp,100) = asinGuarded(DYNX(DYNhelp,95)*DYNX(DYNhelp,96)+
  DYNX(DYNhelp,97)*DYNX(DYNhelp,98)*DYNX(DYNhelp,99),"sin(0.017453292519943295*heliostatsField.lat)*sin(sun.solar.dec)+cos(0.017453292519943295*heliostatsField.lat)*cos(sun.solar.dec)*cos(sun.solar.hra)");
DYNX(W_,27) = RealBmax(0, DYNX(DYNhelp,100));
DYNX(DYNhelp,101) = (PushModelContext(1,"Modelica.Blocks.Sources.CombiTimeTable.getTableValue(\ndata.table.tableID, \n8, \ndata.table.timeScaled, \ndata.table.nextTimeEventScaled, \npre(data.table.nextTimeEventScaled), \ndata.table.tableOnFileRead)")
  Modelica_Blocks_Sources_CombiTimeTable_getTableValue_M(DymStruc0_construct(
  (Integer)(DYNX(W_,147))), 8, DYNX(W_,152), DYNX(W_,149), PRE(DYNX(W_,149), 1),
   DYNX(W_,150)));
PopModelContext();
DYNX(W_,39) = DYNX(W_,144)+DYNX(DYNhelp,101);
DYNX(W_,33) = Greater(DYNX(W_,27),"heliostatsField.ele", DYNX(DP_,3),
  "heliostatsField.ele_min", 9) AND Less(DYNX(W_,39),"heliostatsField.Wspd_internal",
   DYNX(DP_,8),"heliostatsField.Wspd_max", 10);
DYNX(DYNhelp,102) = (PushModelContext(1,"Modelica.Blocks.Sources.CombiTimeTable.getTableValue(\ndata.table.tableID, \n2, \ndata.table.timeScaled, \ndata.table.nextTimeEventScaled, \npre(data.table.nextTimeEventScaled), \ndata.table.tableOnFileRead)")
  Modelica_Blocks_Sources_CombiTimeTable_getTableValue_M(DymStruc0_construct(
  (Integer)(DYNX(W_,147))), 2, DYNX(W_,152), DYNX(W_,149), PRE(DYNX(W_,149), 1),
   DYNX(W_,150)));
PopModelContext();
DYNX(W_,125) = DYNX(W_,138)+DYNX(DYNhelp,102);
DYNX(W_,2) = RealBmax(DYNX(W_,125), 0);
DYNX(W_,17) = (PushModelContext(1,"SolarTherm.Models.Sources.SolarFunctions.eclipticLongitude(sun.solar.dec)")
  SolarTherm_Models_Sources_SolarFunctions_eclipticLongitude(DYNX(W_,0)));
PopModelContext();
DYNX(W_,18) = 57.29577951308232*DYNX(W_,17);
DYNX(W_,19) = 57.29577951308232*DYNX(W_,1);
DYNX(W_,20) = (PushModelContext(1,"Modelica.Blocks.Tables.CombiTable2D.getTableValue(\nheliostatsField.optical.nu_table.tableID, \nheliostatsField.optical.nu_table.u1, \nheliostatsField.optical.nu_table.u2, \nheliostatsField.optical.nu_table.tableOnFileRead)")
  Modelica_Blocks_Tables_CombiTable2D_getTableValue_M(DymStruc0_construct(
  (Integer)(DYNX(W_,23))), DYNX(W_,18), DYNX(W_,19), DYNX(W_,24)));
PopModelContext();
DYNX(W_,14) = RealBmax(0, DYNX(W_,20));
DYNX(W_,25) = IF DYNX(W_,33) THEN RealBmax(DYNX(DP_,2)*DYNX(DP_,0)*DYNX(DP_,1)*
  DYNX(W_,2)*DYNX(W_,14), 0) ELSE 0;
DYNX(W_,37) = PRE(DYNX(W_,37), 2);
  beginwhenBlock
  whenModelica(GreaterMinor(DYNX(W_,25),"heliostatsField.Q_raw", DYNX(W_,40),
    "heliostatsField.Q_start", 13), 1) 
    DYNX(W_,37) = true;
  endwhenModelica()

  whenModelica(LessMinor(DYNX(W_,25),"heliostatsField.Q_raw", DYNX(W_,41),
    "heliostatsField.Q_min", 14), 2) 
    DYNX(W_,37) = false;
  endwhenModelica()
  endwhenBlock

DYNX(DYNhelp,103) = fabs(1948866.81473124+0.344*DYNX(X_,1));
DYNX(DYNhelp,104) = sqrtGuarded(DYNX(DYNhelp,103),"abs(1948866.81473124+0.344*tankHot.medium.h)");
DYNX(W_,77) = 5.813953488372094*(DYNX(DYNhelp,104)-1396.0182);
DYNX(W_,76) = (PushModelContext(1,"SolarTherm.Media.MoltenSalt.MoltenSalt_Utilities.rho_T(tankHot.medium.T)")
  SolarTherm_Media_MoltenSalt_MoltenSaltx_0Utilities_rhox_0T(DYNX(W_,77)));
PopModelContext();
DYNX(W_,75) = divmacro(DYNX(X_,0),"tankHot.m",DYNX(W_,76),"tankHot.medium.d");
DYNX(W_,154) = divmacro(100*DYNX(W_,75),"100*tankHot.V",DYNX(W_,92),
  "tankHot.V_t");
DYNX(W_,157) = PRE(DYNX(W_,157), 3);
  beginwhenBlock
  whenModelica(GreaterMinor(DYNX(W_,154),"controlHot.defocus_logic.level_ref", 
    DYNX(W_,155),"controlHot.defocus_logic.level_max", 1), 3) 
    DYNX(W_,157) = true;
  endwhenModelica()

  whenModelica(LessMinor(DYNX(W_,154),"controlHot.defocus_logic.level_ref", 
    DYNX(W_,156),"controlHot.defocus_logic.level_min", 15), 4) 
    DYNX(W_,157) = false;
  endwhenModelica()
  endwhenBlock

DYNX(DYNhelp,105) = fabs(1948866.81473124+0.344*DYNX(X_,3));
DYNX(DYNhelp,106) = sqrtGuarded(DYNX(DYNhelp,105),"abs(1948866.81473124+0.344*tankCold.medium.h)");
DYNX(W_,101) = 5.813953488372094*(DYNX(DYNhelp,106)-1396.0182);
DYNX(W_,100) = (PushModelContext(1,"SolarTherm.Media.MoltenSalt.MoltenSalt_Utilities.rho_T(tankCold.medium.T)")
  SolarTherm_Media_MoltenSalt_MoltenSaltx_0Utilities_rhox_0T(DYNX(W_,101)));
PopModelContext();
DYNX(W_,99) = divmacro(DYNX(X_,2),"tankCold.m",DYNX(W_,100),"tankCold.medium.d");
DYNX(W_,196) = divmacro(100*DYNX(W_,99),"100*tankCold.V",DYNX(W_,116),
  "tankCold.V_t");
DYNX(W_,199) = DYNX(W_,196);
DYNX(W_,202) = PRE(DYNX(W_,202), 4);
  beginwhenBlock
  whenModelica(GreaterMinor(DYNX(W_,199),"controlCold.defocus_logic.level_ref", 
    DYNX(W_,200),"controlCold.defocus_logic.level_max", 3), 5) 
    DYNX(W_,202) = true;
  endwhenModelica()

  whenModelica(LessMinor(DYNX(W_,199),"controlCold.defocus_logic.level_ref", 
    DYNX(W_,201),"controlCold.defocus_logic.level_min", 16), 6) 
    DYNX(W_,202) = false;
  endwhenModelica()
  endwhenBlock

DYNX(W_,203) =  NOT DYNX(W_,202);
DYNX(W_,38) = DYNX(W_,157) OR DYNX(W_,203);
DYNX(W_,8) =  -(IF DYNX(W_,37) THEN (IF DYNX(W_,38) THEN RealBmin(DYNX(W_,42), 
  DYNX(W_,25)) ELSE DYNX(W_,25)) ELSE 0);
DYNX(W_,198) = PRE(DYNX(W_,198), 5);
  beginwhenBlock
  whenModelica(GreaterMinor(DYNX(W_,196),"controlCold.hotTankLogic.level_ref", 
    DYNX(DP_,80),"controlCold.hotTankLogic.level_max", 5), 7) 
    DYNX(W_,198) = true;
  endwhenModelica()

  whenModelica(LessMinor(DYNX(W_,196),"controlCold.hotTankLogic.level_ref", 
    DYNX(W_,197),"controlCold.hotTankLogic.level_min", 17), 8) 
    DYNX(W_,198) = false;
  endwhenModelica()
  endwhenBlock

DYNX(W_,170) = DYNX(W_,198) AND DYNX(W_,37);

{ /* Non-linear system of equations to solve. */
  /* Nonlinear system of equations number = 3. */
/* Introducing 37 common subexpressions and reusing 1 variables totally used in 10
   expressions */
/* Of the common subexpressions 32 are reals, 2 are integers, and 4
   are booleans. */
const char*const varnames_[]={"receiver.h_out"};
const double nominal_[]={1};
NonLinearSystemOfEquationsNH(Jacobian__, residue__, x__, 1, 0, 3, 9, 5, 
  DYNX(DYNhelp,107), 45, DYNX(did_->helpvari_vec,46), 23);
NonLinearSystemSave(DYNX(X_,4), 0);
NonLinearSystemSave(DYNX(W_,170), 1);
NonLinearSystemSave(DYNX(W_,8), 2);
NonLinearSystemSave(DYNX(W_,61), 3);
NonLinearSystemSave(DYNX(X_,3), 4);
SetInitVectorNH(x__, 1, DYNX(W_,58), Remember_(DYNX(W_,58), 0));
Residues;
  DYNX(W_,46) = RealBmax(DYNX(W_,68), DYNX(W_,58));
  DYNX(DYNhelp,152) = 0.344*DYNX(W_,46);
  DYNX(DYNhelp,153) = fabs(1948866.81473124+DYNX(DYNhelp,152));
  DYNX(DYNhelp,154) = sqrtGuarded(DYNX(DYNhelp,153),"abs(1948866.81473124+0.344*receiver.fluid_b.h_outflow)");
  DYNX(W_,153) = 5.813953488372094*(DYNX(DYNhelp,154)-1396.0182);
  DYNX(W_,173) = DYNX(DP_,64)-DYNX(W_,153);
  DYNX(W_,182) = DYNX(W_,181)*DYNX(W_,173);
  DYNX(W_,186) = DYNX(DP_,74)*DYNX(W_,182)+DYNX(DP_,75)*DYNX(X_,4);
  DYNX(DYNhelp,155) = GreaterS(DYNX(W_,186),"controlCold.PI.Add.y", DYNX(W_,189),
    "controlCold.PI.limiter.uMax", 11);
  DYNX(W_,169) = IF DYNX(DYNhelp,155) THEN DYNX(W_,189) ELSE IF LessS(
    DYNX(W_,186),"controlCold.PI.Add.y", DYNX(W_,190),"controlCold.PI.limiter.uMin",
     12) THEN DYNX(W_,190) ELSE DYNX(W_,186);
  DYNX(W_,43) = IF DYNX(W_,170) THEN DYNX(W_,169) ELSE 0.0;
  DYNX(W_,47) = 0.5*(DYNX(X_,3)+DYNX(W_,58));
  DYNX(DYNhelp,156) = 0.344*DYNX(W_,47);
  DYNX(DYNhelp,157) = fabs(1948866.81473124+DYNX(DYNhelp,156));
  DYNX(DYNhelp,158) = sqrtGuarded(DYNX(DYNhelp,157),"abs(1948866.81473124+0.344*receiver.medium.h)");
  DYNX(W_,7) = 5.813953488372094*(DYNX(DYNhelp,158)-1396.0182);
  DYNX(DYNhelp,159) = DYNX(W_,65)*5.670367E-008*DYNX(DP_,19);
  DYNX(W_,59) =  -DYNX(DYNhelp,159)*(powmacro(DYNX(W_,7),"heliostatsField.heat.T",4,
    "4")-powmacro(DYNX(W_,61),"receiver.Tamb",4,"4"));
SetVector(residue__, 1,  -(DYNX(W_,59)-DYNX(DP_,18)*DYNX(W_,8)+DYNX(W_,43)*(
  DYNX(X_,3)-DYNX(W_,58))));

Jacobian(Jacobian__)
MatrixZeros(Jacobian__);
DYNX(DYNhelp,160) = (IF 1948866.81473124+DYNX(DYNhelp,152) > 0 THEN 1 ELSE -1)*
  DYNX(W_,181)*DYNX(DP_,74)*(IF DYNX(DYNhelp,155) THEN 0.0 ELSE IF LessS(
  DYNX(W_,186),"controlCold.PI.Add.y", DYNX(W_,190),"controlCold.PI.limiter.uMin",
   12) THEN 0.0 ELSE 1.0)*(IF DYNX(W_,170) THEN 1.0 ELSE 0.0)*(DYNX(W_,58)-
  DYNX(X_,3));
DYNX(DYNhelp,161) = DYNX(W_,68) > DYNX(W_,58);
DYNX(DYNhelp,162) = divmacro(1.0,"1.0",DYNX(DYNhelp,154),"sqrt(abs(1948866.81473124+0.344*receiver.fluid_b.h_outflow))");
DYNX(DYNhelp,163) = 1948866.81473124+DYNX(DYNhelp,156) > 0;
DYNX(DYNhelp,164) = DYNX(DYNhelp,159)*powmacro(DYNX(W_,7),"heliostatsField.heat.T",3,
  "3");
DYNX(DYNhelp,165) = divmacro(1.0,"1.0",DYNX(DYNhelp,158),"sqrt(abs(1948866.81473124+0.344*receiver.medium.h))");
SetMatrixLeading(Jacobian__, 1, 1, 1, DYNX(W_,43)+DYNX(DYNhelp,162)*(-1.0)*
  DYNX(DYNhelp,160)*(IF DYNX(DYNhelp,161) THEN 0.0 ELSE 1.0)+DYNX(DYNhelp,165)*
  2.0*(IF DYNX(DYNhelp,163) THEN 1 ELSE -1)*DYNX(DYNhelp,164));

SolveNonLinearSystemOfEquationsNH(Jacobian__, residue__, x__, 3);
DYNX(W_,58) = GetVector(x__, 1);
EndNonLinearSystemOfEquationsNH(residue__, x__, 3);
 /* End of Non-Linear Equation Block */ }



DYNX(W_,188) = DYNX(W_,187)*DYNX(W_,173);
DYNX(W_,193) = DYNX(DP_,76)*DYNX(W_,169)+DYNX(DP_,77)*DYNX(W_,186);
DYNX(W_,195) = DYNX(W_,194)*DYNX(W_,193);
DYNX(F_,4) = DYNX(DP_,78)*DYNX(W_,188)+DYNX(DP_,79)*DYNX(W_,195);
DYNX(W_,165) = Greater(DYNX(W_,43),"receiver.fluid_a.m_flow", 0,"0", 18);
DYNX(W_,158) = DYNX(W_,154);
DYNX(W_,166) = PRE(DYNX(W_,166), 6);
  beginwhenBlock
  whenModelica(GreaterMinor(DYNX(W_,158),"controlHot.logic.level", DYNX(W_,161),
    "controlHot.logic.level_on", 7), 9) 
    DYNX(W_,166) = true;
  endwhenModelica()

  whenModelica(LessMinor(DYNX(W_,158),"controlHot.logic.level", DYNX(W_,162),
    "controlHot.logic.level_off", 19), 10) 
    DYNX(W_,166) = false;
  endwhenModelica()
  endwhenBlock

beginwhenBlock
whenModelica(DYNX(W_,165) OR DYNX(W_,166), 11) 
  DYNX(W_,168) = DYNTime;
endwhenModelica()
endwhenBlock

beginwhenBlock
whenModelica( NOT (DYNX(W_,165) OR DYNX(W_,166)), 12) 
  DYNX(W_,167) = DYNTime;
endwhenModelica()
endwhenBlock

DYNX(W_,164) = PRE(DYNX(W_,164), 7);
  beginwhenBlock
  whenModelica(GreaterMinor(DYNX(W_,168)-(DYNX(W_,167)+DYNX(DP_,62)),
    "controlHot.logic.t_on-(controlHot.logic.t_off+controlHot.logic.t_standby)",
     0,"0", 20), 13) 
    DYNX(W_,164) = true;
  endwhenModelica()

  whenModelica(GreaterMinor(DYNTime-DYNX(W_,168),"time-controlHot.logic.t_on", 
    DYNX(DP_,61),"controlHot.logic.t_start", 21), 14) 
    DYNX(W_,164) = false;
  endwhenModelica()
  endwhenBlock

DYNX(W_,163) = Less(DYNTime-DYNX(W_,167),"time-controlHot.logic.t_off", 
  DYNX(DP_,62),"controlHot.logic.t_standby", 22);
DYNX(W_,69) =  -(IF DYNX(W_,165) OR DYNX(W_,166) THEN (IF DYNX(W_,164) THEN 
  DYNX(W_,160) ELSE IF DYNX(W_,166) THEN DYNX(W_,159) ELSE RealBmin(DYNX(W_,43),
   DYNX(W_,159))) ELSE IF DYNX(W_,163) THEN DYNX(DP_,63) ELSE 0);
DYNX(F_,2) =  -(DYNX(W_,69)+DYNX(W_,43));
DYNX(W_,111) = 0.031415926535897934*DYNX(DP_,29)*DYNX(DP_,30)*DYNX(W_,196);
DYNX(W_,112) =  -DYNX(W_,111)*DYNX(DP_,31)*(DYNX(W_,101)-DYNX(W_,61));
DYNX(W_,114) = IF Less(DYNX(W_,101),"tankCold.medium.T", 553.15,"553.15", 23)
   THEN RealBmin( -DYNX(W_,112), DYNX(DP_,34)) ELSE 0;
DYNX(DYNhelp,166) = divmacro(1.0,"1.0",DYNX(W_,217),"powerBlock.m_flow_ref");
DYNX(W_,212) = RealBmax(DYNX(DP_,86),  -DYNX(DYNhelp,166)*DYNX(W_,69));
DYNX(W_,226) = Greater(DYNX(W_,212),"powerBlock.load", DYNX(DP_,86),
  "powerBlock.nu_min", 24);
DYNX(W_,206) = 5.813953488372094*(DYNX(DYNhelp,104)-1396.0182);
DYNX(W_,219) = divmacro(DYNX(W_,206)-DYNX(W_,218),"powerBlock.T_in-powerBlock.Tsat_ref",
  DYNX(DP_,82)-DYNX(W_,218),"powerBlock.T_in_ref-powerBlock.Tsat_ref");
DYNX(W_,210) = 1.060131*DYNX(W_,219)-0.054078*sqr(DYNX(W_,219))-0.006011;
DYNX(W_,215) = IF DYNX(W_,226) THEN DYNX(W_,210) ELSE 0;
 /* Linear system of equations to solve. */
/* Introducing 1 common subexpressions used in 1 expressions */
/* Of the common subexpressions 1 are reals, 0 are integers, and 0
   are booleans. */
DYNX(DYNhelp,167) = divmacro(1.0,"1.0",DYNX(DP_,85)*DYNX(W_,212),
  "powerBlock.Q_flow_ref*powerBlock.load");
DYNX(W_,205) = RememberSimple_(DYNX(W_,205), 1);
SolveScalarLinear(DYNX(DYNhelp,167),"1.0/(powerBlock.Q_flow_ref*powerBlock.load)",
   DYNX(W_,215),"powerBlock.k_q", DYNX(W_,205),"powerBlock.Q_flow");
 /* End of Equation Block */ 

 /* Linear system of equations to solve. */
DYNX(W_,204) = RememberSimple_(DYNX(W_,204), 2);
SolveScalarLinear(IF DYNX(W_,226) THEN  -DYNX(W_,69) ELSE 1.0,"(if powerBlock.logic then  -tankHot.fluid_b.m_flow else 1.0)",
    -(IF DYNX(W_,226) THEN DYNX(W_,205)+DYNX(W_,69)*DYNX(X_,1) ELSE  -
  DYNX(W_,225))," -(if powerBlock.logic then powerBlock.Q_flow+tankHot.fluid_b.m_flow*tankHot.medium.h else  -powerBlock.h_out_ref)",
   DYNX(W_,204),"powerBlock.fluid_a.h_outflow");
 /* End of Equation Block */ 

 /* Linear system of equations to solve. */
DYNX(F_,3) = RememberSimple_(DYNX(F_,3), 3);
SolveScalarLinear(DYNX(X_,2),"tankCold.m",  -(DYNX(F_,2)*DYNX(X_,3)-(
  DYNX(W_,112)+DYNX(W_,114))+DYNX(W_,69)*DYNX(W_,204)+DYNX(W_,43)*DYNX(X_,3)),
  " -(der(tankCold.m)*tankCold.medium.h-(tankCold.Q_losses+tankCold.W_net)+tankHot.fluid_b.m_flow*powerBlock.fluid_a.h_outflow+receiver.fluid_a.m_flow*tankCold.medium.h)",
   DYNX(F_,3),"der(tankCold.medium.h)");
 /* End of Equation Block */ 

DYNX(F_,0) = DYNX(W_,43)+DYNX(W_,69);
DYNX(W_,87) = 0.031415926535897934*DYNX(DP_,21)*DYNX(DP_,22)*DYNX(W_,154);
DYNX(W_,88) =  -DYNX(W_,87)*DYNX(DP_,23)*(DYNX(W_,77)-DYNX(W_,61));
DYNX(W_,90) = IF Less(DYNX(W_,77),"tankHot.medium.T", 773.15,"773.15", 25) THEN 
  RealBmin( -DYNX(W_,88), DYNX(DP_,26)) ELSE 0;
 /* Linear system of equations to solve. */
DYNX(F_,1) = RememberSimple_(DYNX(F_,1), 4);
SolveScalarLinear(DYNX(X_,0),"tankHot.m", DYNX(W_,88)+DYNX(W_,90)+DYNX(W_,43)*
  DYNX(W_,46)+DYNX(W_,69)*DYNX(X_,1)-DYNX(F_,0)*DYNX(X_,1),"tankHot.Q_losses+tankHot.W_net+receiver.fluid_a.m_flow*receiver.fluid_b.h_outflow+tankHot.fluid_b.m_flow*tankHot.medium.h-der(tankHot.m)*tankHot.medium.h",
   DYNX(F_,1),"der(tankHot.medium.h)");
 /* End of Equation Block */ 

DYNX(W_,227) = 1+0.00375*(DYNX(DP_,87)-DYNX(W_,61));
DYNX(W_,211) = 1.036423*DYNX(W_,219)-0.007885*sqr(DYNX(W_,219))-0.027262;
DYNX(W_,216) = IF DYNX(W_,226) THEN DYNX(W_,211) ELSE 0;
 /* Linear system of equations to solve. */
/* Introducing 1 common subexpressions used in 1 expressions */
/* Of the common subexpressions 1 are reals, 0 are integers, and 0
   are booleans. */
DYNX(DYNhelp,168) = divmacro(1.0,"1.0",DYNX(W_,227)*DYNX(DP_,81)*DYNX(W_,212),
  "powerBlock.nu_cool*powerBlock.W_des*powerBlock.load");
DYNX(F_,5) = RememberSimple_(DYNX(F_,5), 5);
SolveScalarLinear(DYNX(DYNhelp,168),"1.0/(powerBlock.nu_cool*powerBlock.W_des*powerBlock.load)",
   DYNX(W_,216),"powerBlock.k_w", DYNX(F_,5),"der(powerBlock.E_gross)");
 /* End of Equation Block */ 

DYNX(W_,32) = IF DYNX(W_,37) THEN  -divmacro(DYNX(W_,8),"heliostatsField.heat.Q_flow",
  DYNX(W_,25)+0.001,"heliostatsField.Q_raw+0.001") ELSE 1;
DYNX(W_,34) = IF Greater(DYNX(W_,27),"heliostatsField.ele", 0.01,"0.01", 26)
   THEN DYNX(DP_,0)*DYNX(DP_,2)*DYNX(W_,32)*DYNX(DP_,10) ELSE 0;
beginwhenBlock
whenModelica(GreaterMinor(DYNX(W_,27),"heliostatsField.ele", 0.01,"0.01", 26), 15) 
  DYNX(W_,36) = DYNTime;
endwhenModelica()
endwhenBlock

DYNX(W_,35) = IF LessTime(DYNX(W_,36)+DYNX(DP_,12), 1) THEN divmacro(DYNX(DP_,0)
  *DYNX(DP_,2)*DYNX(W_,32)*DYNX(DP_,9),"heliostatsField.n_h*heliostatsField.he_av*heliostatsField.damping*heliostatsField.E_start",
  DYNX(DP_,12),"heliostatsField.t_start") ELSE 0;
DYNX(W_,31) = DYNX(W_,34)+DYNX(W_,35);
DYNX(W_,93) =  -DYNX(DP_,28)*DYNX(W_,69);
DYNX(W_,117) = DYNX(DP_,36)*DYNX(W_,43);
DYNX(W_,91) = divmacro(DYNX(W_,90),"tankHot.W_net",DYNX(DP_,27),"tankHot.e_ht");
DYNX(W_,115) = divmacro(DYNX(W_,114),"tankCold.W_net",DYNX(DP_,35),
  "tankCold.e_ht");
DYNX(W_,214) = DYNX(W_,31)+DYNX(W_,93)+DYNX(W_,117)+DYNX(W_,91)+DYNX(W_,115);
DYNX(W_,213) = (1-DYNX(DP_,88))*DYNX(F_,5)+DYNX(DP_,89)+DYNX(W_,214);
DYNX(F_,6) = DYNX(F_,5)-DYNX(W_,213);
DYNX(F_,7) = 2.7777777777777777E-010*DYNX(F_,6)*DYNX(DP_,90);

AcceptedSection1
beginwhenBlock
whenModelica(GreaterEqualTimeMinor(PRE(DYNX(W_,148), 0), 0), 16) 
  DYNX(W_,148) = IF DYNX(W_,149) < 1.7976931348623157E+308 THEN DYNX(W_,149)
   ELSE 1.7976931348623157E+308;
endwhenModelica()
endwhenBlock

DYNX(DYNhelp,169) = (PushModelContext(1,"Modelica.Blocks.Sources.CombiTimeTable.getTableValue(\ndata.table.tableID, \n7, \ndata.table.timeScaled, \ndata.table.nextTimeEventScaled, \npre(data.table.nextTimeEventScaled), \ndata.table.tableOnFileRead)")
  Modelica_Blocks_Sources_CombiTimeTable_getTableValue_M(DymStruc0_construct(
  (Integer)(DYNX(W_,147))), 7, DYNX(W_,152), DYNX(W_,149), PRE(DYNX(W_,149), 1),
   DYNX(W_,150)));
PopModelContext();
DYNX(W_,128) = DYNX(W_,143)+DYNX(DYNhelp,169);
DYNX(W_,44) = 100.0*DYNX(W_,128);
AssertModelica(GreaterEqual(DYNX(W_,44),"receiver.fluid_a.p", 0.0,"0.0", 27),
  "receiver.fluid_a.p >= 0.0", StringAdd(StringAdd(StringAdd(StringAdd(
  StringAdd(StringAdd("Pressure (= ",Real2String2(DYNX(W_,44), true, 0)),
  " Pa) of medium \""),"MoltenSalt"),"\" is negative\n(Temperature = "),
  Real2String2(DYNX(W_,7), true, 0))," K)"));
PopAllMarks();
AssertModelica(GreaterEqual(DYNX(W_,44),"receiver.fluid_a.p", 0.0,"0.0", 27),
  "receiver.fluid_a.p >= 0.0", StringAdd(StringAdd(StringAdd(StringAdd(
  StringAdd(StringAdd("Pressure (= ",Real2String2(DYNX(W_,44), true, 0)),
  " Pa) of medium \""),"MoltenSalt"),"\" is negative\n(Temperature = "),
  Real2String2(DYNX(W_,77), true, 0))," K)"));
PopAllMarks();
AssertModelica(GreaterEqual(DYNX(W_,44),"receiver.fluid_a.p", 0.0,"0.0", 27),
  "receiver.fluid_a.p >= 0.0", StringAdd(StringAdd(StringAdd(StringAdd(
  StringAdd(StringAdd("Pressure (= ",Real2String2(DYNX(W_,44), true, 0)),
  " Pa) of medium \""),"MoltenSalt"),"\" is negative\n(Temperature = "),
  Real2String2(DYNX(W_,101), true, 0))," K)"));
PopAllMarks();

AcceptedSection2
DYNX(W_,26) = DYNX(W_,17);
DYNX(W_,28) = 1.5707963267948966-DYNX(W_,27);
DYNX(W_,29) = (PushModelContext(1,"SolarTherm.Models.Sources.SolarFunctions.aparentSolarZenith(sun.solar.dec, sun.solar.hra, heliostatsField.lat)")
  SolarTherm_Models_Sources_SolarFunctions_aparentSolarZenith(DYNX(W_,0), 
  DYNX(W_,1), DYNX(W_,10)));
PopModelContext();
DYNX(W_,30) = (PushModelContext(1,"SolarTherm.Models.Sources.SolarFunctions.solarAzimuth(sun.solar.dec, sun.solar.hra, heliostatsField.lat)")
  SolarTherm_Models_Sources_SolarFunctions_solarAzimuth(DYNX(W_,0), DYNX(W_,1), 
  DYNX(W_,10)));
PopModelContext();
DYNX(W_,48) = (PushModelContext(1,"SolarTherm.Media.MoltenSalt.MoltenSalt_Utilities.rho_T(heliostatsField.heat.T)")
  SolarTherm_Media_MoltenSalt_MoltenSaltx_0Utilities_rhox_0T(DYNX(W_,7)));
PopModelContext();
DYNX(W_,51) = DYNX(W_,47)-divmacro(DYNX(W_,44),"receiver.fluid_a.p",DYNX(W_,48),
  "receiver.medium.d");
DYNX(W_,56) = DYNX(W_,7)-273.15;
DYNX(W_,57) = 1E-005*DYNX(W_,44);
DYNX(W_,60) = DYNX(W_,43)*(DYNX(W_,58)-DYNX(X_,3));
DYNX(W_,80) = DYNX(X_,1)-divmacro(DYNX(W_,44),"receiver.fluid_a.p",DYNX(W_,76),
  "tankHot.medium.d");
DYNX(W_,85) = DYNX(W_,77)-273.15;
DYNX(W_,86) = 1E-005*DYNX(W_,44);
DYNX(W_,104) = DYNX(X_,3)-divmacro(DYNX(W_,44),"receiver.fluid_a.p",DYNX(W_,100),
  "tankCold.medium.d");
DYNX(W_,109) = DYNX(W_,101)-273.15;
DYNX(W_,110) = 1E-005*DYNX(W_,44);
DYNX(DYNhelp,170) = (PushModelContext(1,"Modelica.Blocks.Sources.CombiTimeTable.getTableValue(\ndata.table.tableID, \n1, \ndata.table.timeScaled, \ndata.table.nextTimeEventScaled, \npre(data.table.nextTimeEventScaled), \ndata.table.tableOnFileRead)")
  Modelica_Blocks_Sources_CombiTimeTable_getTableValue_M(DymStruc0_construct(
  (Integer)(DYNX(W_,147))), 1, DYNX(W_,152), DYNX(W_,149), PRE(DYNX(W_,149), 1),
   DYNX(W_,150)));
PopModelContext();
DYNX(W_,118) = DYNX(W_,137)+DYNX(DYNhelp,170);
DYNX(DYNhelp,171) = (PushModelContext(1,"Modelica.Blocks.Sources.CombiTimeTable.getTableValue(\ndata.table.tableID, \n3, \ndata.table.timeScaled, \ndata.table.nextTimeEventScaled, \npre(data.table.nextTimeEventScaled), \ndata.table.tableOnFileRead)")
  Modelica_Blocks_Sources_CombiTimeTable_getTableValue_M(DymStruc0_construct(
  (Integer)(DYNX(W_,147))), 3, DYNX(W_,152), DYNX(W_,149), PRE(DYNX(W_,149), 1),
   DYNX(W_,150)));
PopModelContext();
DYNX(W_,119) = DYNX(W_,139)+DYNX(DYNhelp,171);
DYNX(DYNhelp,172) = (PushModelContext(1,"Modelica.Blocks.Sources.CombiTimeTable.getTableValue(\ndata.table.tableID, \n5, \ndata.table.timeScaled, \ndata.table.nextTimeEventScaled, \npre(data.table.nextTimeEventScaled), \ndata.table.tableOnFileRead)")
  Modelica_Blocks_Sources_CombiTimeTable_getTableValue_M(DymStruc0_construct(
  (Integer)(DYNX(W_,147))), 5, DYNX(W_,152), DYNX(W_,149), PRE(DYNX(W_,149), 1),
   DYNX(W_,150)));
PopModelContext();
DYNX(W_,127) = DYNX(W_,141)+DYNX(DYNhelp,172);
DYNX(W_,120) = 273.15+DYNX(W_,127);
DYNX(DYNhelp,173) = (PushModelContext(1,"Modelica.Blocks.Sources.CombiTimeTable.getTableValue(\ndata.table.tableID, \n6, \ndata.table.timeScaled, \ndata.table.nextTimeEventScaled, \npre(data.table.nextTimeEventScaled), \ndata.table.tableOnFileRead)")
  Modelica_Blocks_Sources_CombiTimeTable_getTableValue_M(DymStruc0_construct(
  (Integer)(DYNX(W_,147))), 6, DYNX(W_,152), DYNX(W_,149), PRE(DYNX(W_,149), 1),
   DYNX(W_,150)));
PopModelContext();
DYNX(W_,121) = DYNX(W_,142)+DYNX(DYNhelp,173);
DYNX(DYNhelp,174) = (PushModelContext(1,"Modelica.Blocks.Sources.CombiTimeTable.getTableValue(\ndata.table.tableID, \n9, \ndata.table.timeScaled, \ndata.table.nextTimeEventScaled, \npre(data.table.nextTimeEventScaled), \ndata.table.tableOnFileRead)")
  Modelica_Blocks_Sources_CombiTimeTable_getTableValue_M(DymStruc0_construct(
  (Integer)(DYNX(W_,147))), 9, DYNX(W_,152), DYNX(W_,149), PRE(DYNX(W_,149), 1),
   DYNX(W_,150)));
PopModelContext();
DYNX(W_,129) = DYNX(W_,145)+DYNX(DYNhelp,174);
DYNX(W_,122) = 0.017453292519943295*DYNX(W_,129);
DYNX(DYNhelp,175) = (PushModelContext(1,"Modelica.Blocks.Sources.CombiTimeTable.getTableValue(\ndata.table.tableID, \n10, \ndata.table.timeScaled, \ndata.table.nextTimeEventScaled, \npre(data.table.nextTimeEventScaled), \ndata.table.tableOnFileRead)")
  Modelica_Blocks_Sources_CombiTimeTable_getTableValue_M(DymStruc0_construct(
  (Integer)(DYNX(W_,147))), 10, DYNX(W_,152), DYNX(W_,149), PRE(DYNX(W_,149), 1),
   DYNX(W_,150)));
PopModelContext();
DYNX(W_,123) = DYNX(W_,146)+DYNX(DYNhelp,175);
DYNX(DYNhelp,176) = fabs(1948866.81473124+0.344*DYNX(W_,204));
DYNX(DYNhelp,177) = sqrtGuarded(DYNX(DYNhelp,176),"abs(1948866.81473124+0.344*powerBlock.fluid_a.h_outflow)");
DYNX(W_,207) = 5.813953488372094*(DYNX(DYNhelp,177)-1396.0182);

DefaultSection
CrossingSection
/* Start of reinit equations */
beginwhenBlock
whenModelica(DYNX(W_,170), 17) 
  reinit(DYNX(X_,4), divmacro(DYNX(W_,176),"controlCold.PI.y_start",DYNX(W_,178),
  "controlCold.PI.Kp")+DYNX(W_,173));
endwhenModelica()
endwhenBlock

/* End of reinit equations */
DefaultSection
InitializeData(1)
EndTranslatedEquations

#include <dsblock6.c>

PreNonAliasNew(0)
StartNonAlias(0)
DeclareVariable("sun.solar.dec", "Solar declination angle [rad|deg]", 0.0, \
0.0,0.0,0.0,0,520)
DeclareVariable("sun.solar.hra", "Solar hour angle [rad|deg]", 0.0, 0.0,0.0,0.0,\
0,520)
DeclareVariable("sun.solar.dni", "Direct Solar Irradiance [W/m2]", 0.0, 0.0,0.0,\
0.0,0,520)
DeclareVariable("sun.lon", "Longitude (+ve East) [deg]", 0.0, 0.0,0.0,0.0,0,513)
DeclareVariable("sun.lat", "Latitude (+ve North) [deg]", 0.0, 0.0,0.0,0.0,0,513)
DeclareVariable("sun.t_zone", "Local time zone (UCT=0) [h]", 0.0, 0.0,0.0,0.0,0,513)
DeclareVariable("sun.year", "Year [:#(type=Integer)]", 0, 0.0,0.0,0.0,0,517)
DeclareAlias2("sun.dec", "Solar declination angle [rad|deg]", "sun.solar.dec", 1,\
 5, 0, 0)
DeclareAlias2("sun.hra", "Solar hour angle [rad|deg]", "sun.solar.hra", 1, 5, 1,\
 0)
DeclareAlias2("sun.dni", "", "sun.solar.dni", 1, 5, 2, 0)
DeclareAlias2("heliostatsField.solar.dec", "Solar declination angle [rad|deg]", \
"sun.solar.dec", 1, 5, 0, 4)
DeclareAlias2("heliostatsField.solar.hra", "Solar hour angle [rad|deg]", \
"sun.solar.hra", 1, 5, 1, 4)
DeclareAlias2("heliostatsField.solar.dni", "Direct Solar Irradiance [W/m2]", \
"sun.solar.dni", 1, 5, 2, 4)
DeclareVariable("heliostatsField.heat.T", "Port temperature [K|degC]", 288.15, \
0.0,0.0,300.0,0,520)
DeclareVariable("heliostatsField.heat.Q_flow", "Heat flow rate (positive if flowing from outside into the component) [W]",\
 0.0, 0.0,0.0,0.0,0,776)
DeclareVariable("heliostatsField.lon", "Longitude (+ve East) [deg]", 0.0, \
0.0,0.0,0.0,0,513)
DeclareVariable("heliostatsField.lat", "Latitude (+ve North) [deg]", 0.0, \
0.0,0.0,0.0,0,513)
DeclareParameter("heliostatsField.n_h", "Number of heliostats [:#(type=Integer)]",\
 0, 6377, 0.0,0.0,0.0,0,564)
DeclareParameter("heliostatsField.A_h", "Heliostat's Area [m2]", 1, 144.375, \
0.0,0.0,0.0,0,560)
DeclareParameter("heliostatsField.he_av", "Heliostat availability", 2, 0.99, \
0.0,0.0,0.0,0,560)
DeclareVariable("heliostatsField.use_on", "= true to display when solar field is connected [:#(type=Boolean)]",\
 true, 0.0,0.0,0.0,0,1539)
DeclareVariable("heliostatsField.use_defocus", "= true to use defocus strategy [:#(type=Boolean)]",\
 true, 0.0,0.0,0.0,0,1539)
DeclareVariable("heliostatsField.use_wind", "= true to use Wind-stop strategy [:#(type=Boolean)]",\
 true, 0.0,0.0,0.0,0,1539)
DeclareParameter("heliostatsField.ele_min", "Heliostat stow deploy angle [rad|deg]",\
 3, 0.13962634015955, 0.0,0.0,0.0,0,560)
DeclareParameter("heliostatsField.Q_design", "Receiver design thermal power (with heat losses) [W]",\
 4, 330000000, 0.0,0.0,0.0,0,560)
DeclareParameter("heliostatsField.nu_start", "Receiver energy start-up fraction",\
 5, 0.6, 0.0,0.0,0.0,0,560)
DeclareParameter("heliostatsField.nu_min", "Minimum receiver turndown energy fraction",\
 6, 0.3, 0.0,0.0,0.0,0,560)
DeclareParameter("heliostatsField.nu_defocus", "Receiver limiter energy fraction at defocus state",\
 7, 1, 0.0,0.0,0.0,0,560)
DeclareParameter("heliostatsField.Wspd_max", "Wind stow speed [m/s]", 8, 15, \
0.0,0.0,0.0,0,560)
DeclareParameter("heliostatsField.E_start", "Start-up energy of a single heliostat [J]",\
 9, 90000.0, 0.0,0.0,0.0,0,560)
DeclareParameter("heliostatsField.W_track", "Tracking power for a single heliostat [W]",\
 10, 55.0, 0.0,0.0,0.0,0,560)
DeclareVariable("heliostatsField.optical.nu", "Total optical efficiency [1]", \
0.0, 0.0,1E+100,0.0,0,512)
DeclareAlias2("heliostatsField.optical.dec", "[rad|deg]", "sun.solar.dec", 1, 5,\
 0, 0)
DeclareAlias2("heliostatsField.optical.hra", "[rad|deg]", "sun.solar.hra", 1, 5,\
 1, 0)
DeclareVariable("heliostatsField.optical.lat", "Latitude from heliostat field model [deg]",\
 0.0, 0.0,0.0,0.0,0,513)
DeclareVariable("heliostatsField.optical.angles", "Table angles [:#(type=SolarTherm.Types.solar_angles)]",\
 1, 1.0,4.0,0.0,0,517)
DeclareVariable("heliostatsField.optical.angle1", "[rad|deg]", 0.0, 0.0,0.0,0.0,\
0,512)
DeclareAlias2("heliostatsField.optical.angle2", "[rad|deg]", "sun.solar.hra", 1,\
 5, 1, 0)
DeclareVariable("heliostatsField.optical.nu_table.u1", "Connector of Real input signal 1",\
 0.0, 0.0,0.0,0.0,0,512)
DeclareVariable("heliostatsField.optical.nu_table.u2", "Connector of Real input signal 2",\
 0.0, 0.0,0.0,0.0,0,512)
DeclareVariable("heliostatsField.optical.nu_table.y", "Connector of Real output signal",\
 0.0, 0.0,0.0,0.0,0,512)
DeclareVariable("heliostatsField.optical.nu_table.tableOnFile", "= true, if table is defined on file or in function usertab [:#(type=Boolean)]",\
 true, 0.0,0.0,0.0,0,515)
DeclareParameter("heliostatsField.optical.nu_table.verboseRead", \
"= true, if info message that file is loading is to be printed [:#(type=Boolean)]",\
 11, true, 0.0,0.0,0.0,0,562)
DeclareVariable("heliostatsField.optical.nu_table.smoothness", "Smoothness of table interpolation [:#(type=Modelica.Blocks.Types.Smoothness)]",\
 2, 1.0,5.0,0.0,0,517)
DeclareVariable("heliostatsField.optical.nu_table.tableID.id", "[:#(type=Integer)]",\
 0, 0.0,0.0,0.0,0,2565)
DeclareVariable("heliostatsField.optical.nu_table.tableOnFileRead", \
"= 1, if table was successfully read from file", 0.0, 0.0,0.0,0.0,0,2561)
DeclareAlias2("heliostatsField.optical.angle2_input.y", "Value of Real output", \
"heliostatsField.optical.nu_table.u2", 1, 5, 19, 0)
DeclareAlias2("heliostatsField.optical.angle1_input.y", "Value of Real output", \
"heliostatsField.optical.nu_table.u1", 1, 5, 18, 0)
DeclareVariable("heliostatsField.Q_raw", "[W]", 0.0, 0.0,0.0,0.0,0,512)
DeclareAlias2("heliostatsField.Q_net", "[W]", "heliostatsField.heat.Q_flow", -1,\
 5, 8, 0)
DeclareAlias2("heliostatsField.on", "[:#(type=Boolean)]", "heliostatsField.on_internal", 1,\
 5, 37, 65)
DeclareAlias2("heliostatsField.defocus", "[:#(type=Boolean)]", "heliostatsField.defocus_internal", 1,\
 5, 38, 65)
DeclareAlias2("heliostatsField.Wspd", "", "heliostatsField.Wspd_internal", 1, 5,\
 39, 0)
DeclareVariable("heliostatsField.elo", "[rad|deg]", 0.0, 0.0,0.0,0.0,0,512)
DeclareVariable("heliostatsField.ele", "[rad|deg]", 0.0, 0.0,0.0,0.0,0,512)
DeclareVariable("heliostatsField.zen", "[rad|deg]", 0.0, 0.0,0.0,0.0,0,512)
DeclareVariable("heliostatsField.zen2", "[rad|deg]", 0.0, 0.0,0.0,0.0,0,512)
DeclareVariable("heliostatsField.azi", "[rad|deg]", 0.0, 0.0,0.0,0.0,0,512)
DeclareVariable("heliostatsField.W_loss", "[W]", 0.0, 0.0,0.0,0.0,0,512)
DeclareVariable("heliostatsField.damping", "", 0.0, 0.0,0.0,0.0,0,512)
DeclareVariable("heliostatsField.on_hf", "[:#(type=Boolean)]", false, 0.0,0.0,\
0.0,0,642)
DeclareVariable("heliostatsField.W_loss1", "[W]", 0.0, 0.0,0.0,0.0,0,2560)
DeclareVariable("heliostatsField.W_loss2", "[W]", 0.0, 0.0,0.0,0.0,0,2560)
DeclareParameter("heliostatsField.t_start", "Start-up traking delay [s]", 12, 3600,\
 0.0,0.0,0.0,0,2608)
DeclareVariable("heliostatsField.t_on", "Sunrise time instant [s]", 0.0, \
0.0,0.0,0.0,0,2704)
DeclareVariable("heliostatsField.on_internal", "Needed to connect to conditional connector [:#(type=Boolean)]",\
 false, 0.0,0.0,0.0,0,2706)
DeclareVariable("heliostatsField.defocus_internal", "Needed to connect to conditional connector [:#(type=Boolean)]",\
 false, 0.0,0.0,0.0,0,2690)
DeclareVariable("heliostatsField.Wspd_internal", "Needed to connect to conditional connector",\
 0.0, 0.0,0.0,0.0,0,2560)
DeclareVariable("heliostatsField.Q_start", "Heliostat field start power [W]", \
0.0, 0.0,0.0,0.0,0,2561)
DeclareVariable("heliostatsField.Q_min", "Heliostat field turndown power [W]", \
0.0, 0.0,0.0,0.0,0,2561)
DeclareVariable("heliostatsField.Q_defocus", "Heat flow rate limiter at defocus state [W]",\
 0.0, 0.0,0.0,0.0,0,2561)
DeclareAlias2("receiver.heat.T", "Port temperature [K|degC]", "heliostatsField.heat.T", 1,\
 5, 7, 4)
DeclareAlias2("receiver.heat.Q_flow", "Heat flow rate (positive if flowing from outside into the component) [W]",\
 "heliostatsField.heat.Q_flow", -1, 5, 8, 132)
DeclareVariable("receiver.fluid_a.m_flow", "Mass flow rate from the connection point into the component [kg/s]",\
 0.0, -100000.0,100000.0,0.0,0,776)
DeclareVariable("receiver.fluid_a.p", "Thermodynamic pressure in the connection point [Pa|bar]",\
 100000.0, 0.0,100000000.0,100000.0,0,520)
DeclareVariable("receiver.fluid_a.h_outflow", "Specific thermodynamic enthalpy close to the connection point if m_flow < 0 [J/kg]",\
 0, -10000000000.0,10000000000.0,1000000.0,0,521)
DeclareAlias2("receiver.fluid_b.m_flow", "Mass flow rate from the connection point into the component [kg/s]",\
 "receiver.fluid_a.m_flow", -1, 5, 43, 132)
DeclareAlias2("receiver.fluid_b.p", "Thermodynamic pressure in the connection point [Pa|bar]",\
 "receiver.fluid_a.p", 1, 5, 44, 4)
DeclareVariable("receiver.fluid_b.h_outflow", "Specific thermodynamic enthalpy close to the connection point if m_flow < 0 [J/kg]",\
 0.0, -10000000000.0,10000000000.0,1000000.0,0,520)
DeclareAlias2("receiver.medium.p", "Absolute pressure of medium [Pa|bar]", \
"receiver.fluid_a.p", 1, 5, 44, 0)
DeclareVariable("receiver.medium.h", "Specific enthalpy of medium [J/kg]", 0.0, \
-10000000000.0,10000000000.0,1000000.0,0,512)
DeclareVariable("receiver.medium.d", "Density of medium [kg/m3|g/cm3]", 1, 0.0,\
100000.0,1.0,0,512)
DeclareAlias2("receiver.medium.T", "Temperature of medium [K|degC]", \
"heliostatsField.heat.T", 1, 5, 7, 0)
DeclareVariable("receiver.medium.X[1]", "Mass fractions (= (component mass)/total mass  m_i/m) [kg/kg]",\
 0.5, 0.0,1.0,0.1,0,513)
DeclareVariable("receiver.medium.X[2]", "Mass fractions (= (component mass)/total mass  m_i/m) [kg/kg]",\
 0.5, 0.0,1.0,0.1,0,513)
DeclareVariable("receiver.medium.u", "Specific internal energy of medium [J/kg]",\
 0.0, -100000000.0,100000000.0,1000000.0,0,512)
DeclareVariable("receiver.medium.R", "Gas constant (of mixture if applicable) [J/(kg.K)]",\
 90.9293729084188, 0.0,10000000.0,1000.0,0,513)
DeclareVariable("receiver.medium.MM", "Molar mass (of mixture or single fluid) [kg/mol]",\
 0.091438, 0.001,0.25,0.032,0,513)
DeclareAlias2("receiver.medium.state.p", "Absolute pressure of medium [Pa|bar]",\
 "receiver.fluid_a.p", 1, 5, 44, 0)
DeclareAlias2("receiver.medium.state.h", "Specific enthalpy [J/kg]", \
"receiver.medium.h", 1, 5, 47, 0)
DeclareVariable("receiver.medium.preferredMediumStates", "= true if StateSelect.prefer shall be used for the independent property variables of the medium [:#(type=Boolean)]",\
 false, 0.0,0.0,0.0,0,515)
DeclareVariable("receiver.medium.standardOrderComponents", "If true, and reducedX = true, the last element of X will be computed from the other ones [:#(type=Boolean)]",\
 true, 0.0,0.0,0.0,0,515)
DeclareVariable("receiver.medium.T_degC", "Temperature of medium in [degC] [degC;]",\
 0.0, 0.0,0.0,0.0,0,512)
DeclareVariable("receiver.medium.p_bar", "Absolute pressure of medium in [bar] [bar]",\
 0.0, 0.0,0.0,0.0,0,512)
DeclareAlias2("receiver.h_in", "[J/kg]", "tankCold.medium.h", 1, 1, 3, 0)
DeclareVariable("receiver.h_out", "[J/kg]", 0.0, 0.0,0.0,0.0,0,512)
DeclareParameter("receiver.H_rcv", "Receiver height [m]", 13, 18.67, 0.0,0.0,0.0,\
0,560)
DeclareParameter("receiver.D_rcv", "Receiver diameter [m]", 14, 15, 0.0,1E+100,\
0.0,0,560)
DeclareParameter("receiver.N_pa", "Number of panels [:#(type=Integer)]", 15, 20,\
 0.0,0.0,0.0,0,564)
DeclareParameter("receiver.D_tb", "Tube outer diameter [m]", 16, 0.04, 0.0,\
1E+100,0.0,0,560)
DeclareParameter("receiver.t_tb", "Tube wall thickness [m]", 17, 0.00125, 0.0,\
1E+100,0.0,0,560)
DeclareParameter("receiver.ab", "Coating absortance [1]", 18, 0.94, 0.0,1E+100,\
0.0,0,560)
DeclareParameter("receiver.em", "Coating Emitance [1]", 19, 0.88, 0.0,1E+100,0.0,\
0,560)
DeclareVariable("receiver.Q_loss", "[W]", 0.0, 0.0,0.0,0.0,0,512)
DeclareVariable("receiver.Q_rcv", "[W]", 0.0, 0.0,0.0,0.0,0,512)
DeclareVariable("receiver.Tamb", "", 288.15, 0.0,1E+100,300.0,0,512)
DeclareVariable("receiver.w_pa", "Panel width [m]", 0.0, 0.0,0.0,0.0,0,2561)
DeclareVariable("receiver.N_tb_pa", "Number of tubes", 0.0, 0.0,0.0,0.0,0,2561)
DeclareVariable("receiver.V_rcv", "[m3]", 0.0, 0.0,0.0,0.0,0,2561)
DeclareVariable("receiver.A", "Area [m2]", 0.0, 0.0,0.0,0.0,0,2561)
DeclareVariable("receiver.state_0.p", "Absolute pressure of medium [Pa|bar]", \
100000.0, 0.0,100000000.0,100000.0,0,2561)
DeclareVariable("receiver.state_0.h", "Specific enthalpy [J/kg]", 0.0, \
-10000000000.0,10000000000.0,1000000.0,0,2561)
DeclareVariable("receiver.h_0", "[J/kg]", 0.0, 0.0,0.0,0.0,0,2561)
DeclareParameter("receiver.T_0", "Start value of temperature [K|degC]", 20, \
563.15, 0.0,1E+100,300.0,0,2608)
DeclareAlias2("DNI_input.y", "Value of Real output", "sun.solar.dni", 1, 5, 2, 0)
DeclareAlias2("Tamb_input.y", "Value of Real output", "receiver.Tamb", 1, 5, 61,\
 0)
DeclareAlias2("tankHot.fluid_a.m_flow", "Mass flow rate from the connection point into the component [kg/s]",\
 "receiver.fluid_a.m_flow", 1, 5, 43, 132)
DeclareAlias2("tankHot.fluid_a.p", "Thermodynamic pressure in the connection point [Pa|bar]",\
 "receiver.fluid_a.p", 1, 5, 44, 4)
DeclareAlias2("tankHot.fluid_a.h_outflow", "Specific thermodynamic enthalpy close to the connection point if m_flow < 0 [J/kg]",\
 "tankHot.medium.h", 1, 1, 1, 4)
DeclareVariable("tankHot.fluid_b.m_flow", "Mass flow rate from the connection point into the component [kg/s]",\
 0.0, -100000.0,100000.0,0.0,0,776)
DeclareAlias2("tankHot.fluid_b.p", "Thermodynamic pressure in the connection point [Pa|bar]",\
 "receiver.fluid_a.p", 1, 5, 44, 4)
DeclareAlias2("tankHot.fluid_b.h_outflow", "Specific thermodynamic enthalpy close to the connection point if m_flow < 0 [J/kg]",\
 "tankHot.medium.h", 1, 1, 1, 4)
DeclareParameter("tankHot.D", "Diameter [m]", 21, 18.667, 0.0,1E+100,0.0,0,560)
DeclareParameter("tankHot.H", "Height [m]", 22, 20, 0.0,1E+100,0.0,0,560)
DeclareVariable("tankHot.use_p_top", "= true to get p_top from an input connector [:#(type=Boolean)]",\
 true, 0.0,0.0,0.0,0,1539)
DeclareVariable("tankHot.p_fixed", "Fixed value of pressure [Pa|bar]", 101325, \
0.0,1E+100,100000.0,0,513)
DeclareVariable("tankHot.enable_losses", "= true enable thermal losses with environment [:#(type=Boolean)]",\
 true, 0.0,0.0,0.0,0,1539)
DeclareParameter("tankHot.alpha", "Constant heat transfer coefficient with the ambient [W/(m2.K)]",\
 23, 3, 0.0,0.0,0.0,0,560)
DeclareVariable("tankHot.use_L", "= true to display level as output variable [:#(type=Boolean)]",\
 true, 0.0,0.0,0.0,0,1539)
DeclareParameter("tankHot.L_start", "Start value of level in %", 24, 30, \
0.0,0.0,0.0,0,560)
DeclareParameter("tankHot.T_start", "Start value of temperature [K|degC]", 25, \
847.15, 0.0,1E+100,300.0,0,560)
DeclareVariable("tankHot.T_set", "Tank Heater Temperature Set-Point [K|degC]", \
773.15, 0.0,1E+100,300.0,0,513)
DeclareParameter("tankHot.W_max", "Hot Tank Heater Capacity [W]", 26, \
3000000000.0, 0.0,0.0,0.0,0,560)
DeclareParameter("tankHot.e_ht", "Tank Heater Efficiency [1]", 27, 0.99, 0.0,\
1E+100,0.0,0,560)
DeclareVariable("tankHot.V", "[m3]", 0.0, 0.0,0.0,0.0,0,512)
DeclareState("tankHot.m", "[kg]", 0, 0.0, 0.0,1E+100,0.0,0,544)
DeclareDerivative("tankHot.der(m)", "[kg/s]", 0.0, 0.0,0.0,0.0,0,512)
DeclareAlias2("tankHot.medium.p", "Absolute pressure of medium [Pa|bar]", \
"receiver.fluid_a.p", 1, 5, 44, 0)
DeclareState("tankHot.medium.h", "Specific enthalpy of medium [J/kg]", 1, 0.0, \
-10000000000.0,10000000000.0,1000000.0,0,544)
DeclareDerivative("tankHot.medium.der(h)", "der(Specific enthalpy of medium) [m2/s3]",\
 0.0, 0.0,0.0,0.0,0,512)
DeclareVariable("tankHot.medium.d", "Density of medium [kg/m3|g/cm3]", 1, 0.0,\
100000.0,1.0,0,512)
DeclareVariable("tankHot.medium.T", "Temperature of medium [K|degC]", 800, \
573.15,873.15,300.0,0,512)
DeclareVariable("tankHot.medium.X[1]", "Mass fractions (= (component mass)/total mass  m_i/m) [kg/kg]",\
 0.5, 0.0,1.0,0.1,0,513)
DeclareVariable("tankHot.medium.X[2]", "Mass fractions (= (component mass)/total mass  m_i/m) [kg/kg]",\
 0.5, 0.0,1.0,0.1,0,513)
DeclareVariable("tankHot.medium.u", "Specific internal energy of medium [J/kg]",\
 0.0, -100000000.0,100000000.0,1000000.0,0,512)
DeclareVariable("tankHot.medium.R", "Gas constant (of mixture if applicable) [J/(kg.K)]",\
 90.9293729084188, 0.0,10000000.0,1000.0,0,513)
DeclareVariable("tankHot.medium.MM", "Molar mass (of mixture or single fluid) [kg/mol]",\
 0.091438, 0.001,0.25,0.032,0,513)
DeclareAlias2("tankHot.medium.state.p", "Absolute pressure of medium [Pa|bar]", \
"receiver.fluid_a.p", 1, 5, 44, 0)
DeclareAlias2("tankHot.medium.state.h", "Specific enthalpy [J/kg]", \
"tankHot.medium.h", 1, 1, 1, 0)
DeclareVariable("tankHot.medium.preferredMediumStates", "= true if StateSelect.prefer shall be used for the independent property variables of the medium [:#(type=Boolean)]",\
 false, 0.0,0.0,0.0,0,515)
DeclareVariable("tankHot.medium.standardOrderComponents", "If true, and reducedX = true, the last element of X will be computed from the other ones [:#(type=Boolean)]",\
 true, 0.0,0.0,0.0,0,515)
DeclareVariable("tankHot.medium.T_degC", "Temperature of medium in [degC] [degC;]",\
 0.0, 0.0,0.0,0.0,0,512)
DeclareVariable("tankHot.medium.p_bar", "Absolute pressure of medium in [bar] [bar]",\
 0.0, 0.0,0.0,0.0,0,512)
DeclareVariable("tankHot.A", "[m2]", 0.0, 0.0,0.0,0.0,0,512)
DeclareVariable("tankHot.Q_losses", "[W]", 0.0, 0.0,0.0,0.0,0,512)
DeclareAlias2("tankHot.state_i.p", "Absolute pressure of medium [Pa|bar]", \
"receiver.fluid_a.p", 1, 5, 44, 0)
DeclareVariable("tankHot.state_i.h", "Specific enthalpy [J/kg]", 0.0, \
-10000000000.0,10000000000.0,1000000.0,0,513)
DeclareVariable("tankHot.W_net", "[W]", 0.0, 0.0,0.0,0.0,0,512)
DeclareVariable("tankHot.W_loss", "[W]", 0.0, 0.0,0.0,0.0,0,512)
DeclareAlias2("tankHot.L", "Tank level in %", "controlHot.defocus_logic.level_ref", 1,\
 5, 154, 0)
DeclareAlias2("tankHot.p_top", "", "receiver.fluid_a.p", 1, 5, 44, 0)
DeclareAlias2("tankHot.T_amb", "", "receiver.Tamb", 1, 5, 61, 0)
DeclareVariable("tankHot.V_t", "[m3]", 0.0, 0.0,0.0,0.0,0,2561)
DeclareAlias2("tankHot.L_internal", "", "controlHot.defocus_logic.level_ref", 1,\
 5, 154, 1024)
DeclareAlias2("tankHot.p_top_internal", "", "receiver.fluid_a.p", 1, 5, 44, 1024)
DeclareAlias2("tankHot.T_amb_internal", "", "receiver.Tamb", 1, 5, 61, 1024)
DeclareAlias2("pumpHot.fluid_a.m_flow", "Mass flow rate from the connection point into the component [kg/s]",\
 "tankHot.fluid_b.m_flow", -1, 5, 69, 132)
DeclareAlias2("pumpHot.fluid_a.p", "Thermodynamic pressure in the connection point [Pa|bar]",\
 "receiver.fluid_a.p", 1, 5, 44, 4)
DeclareAlias2("pumpHot.fluid_a.h_outflow", "Specific thermodynamic enthalpy close to the connection point if m_flow < 0 [J/kg]",\
 "tankHot.medium.h", 1, 1, 1, 4)
DeclareAlias2("pumpHot.fluid_b.m_flow", "Mass flow rate from the connection point into the component [kg/s]",\
 "tankHot.fluid_b.m_flow", 1, 5, 69, 132)
DeclareAlias2("pumpHot.fluid_b.p", "Thermodynamic pressure in the connection point [Pa|bar]",\
 "receiver.fluid_a.p", 1, 5, 44, 4)
DeclareAlias2("pumpHot.fluid_b.h_outflow", "Specific thermodynamic enthalpy close to the connection point if m_flow < 0 [J/kg]",\
 "tankHot.medium.h", 1, 1, 1, 4)
DeclareAlias2("pumpHot.m_flow", "", "tankHot.fluid_b.m_flow", -1, 5, 69, 0)
DeclareParameter("pumpHot.k_loss", "[J/kg]", 28, 550.0, 0.0,0.0,0.0,0,560)
DeclareVariable("pumpHot.W_loss", "[W]", 0.0, 0.0,0.0,0.0,0,512)
DeclareAlias2("tankCold.fluid_a.m_flow", "Mass flow rate from the connection point into the component [kg/s]",\
 "tankHot.fluid_b.m_flow", -1, 5, 69, 132)
DeclareAlias2("tankCold.fluid_a.p", "Thermodynamic pressure in the connection point [Pa|bar]",\
 "receiver.fluid_a.p", 1, 5, 44, 4)
DeclareAlias2("tankCold.fluid_a.h_outflow", "Specific thermodynamic enthalpy close to the connection point if m_flow < 0 [J/kg]",\
 "tankCold.medium.h", 1, 1, 3, 4)
DeclareAlias2("tankCold.fluid_b.m_flow", "Mass flow rate from the connection point into the component [kg/s]",\
 "receiver.fluid_a.m_flow", -1, 5, 43, 132)
DeclareAlias2("tankCold.fluid_b.p", "Thermodynamic pressure in the connection point [Pa|bar]",\
 "receiver.fluid_a.p", 1, 5, 44, 4)
DeclareAlias2("tankCold.fluid_b.h_outflow", "Specific thermodynamic enthalpy close to the connection point if m_flow < 0 [J/kg]",\
 "tankCold.medium.h", 1, 1, 3, 4)
DeclareParameter("tankCold.D", "Diameter [m]", 29, 18.667, 0.0,1E+100,0.0,0,560)
DeclareParameter("tankCold.H", "Height [m]", 30, 20, 0.0,1E+100,0.0,0,560)
DeclareVariable("tankCold.use_p_top", "= true to get p_top from an input connector [:#(type=Boolean)]",\
 true, 0.0,0.0,0.0,0,1539)
DeclareVariable("tankCold.p_fixed", "Fixed value of pressure [Pa|bar]", 101325, \
0.0,1E+100,100000.0,0,513)
DeclareVariable("tankCold.enable_losses", "= true enable thermal losses with environment [:#(type=Boolean)]",\
 true, 0.0,0.0,0.0,0,1539)
DeclareParameter("tankCold.alpha", "Constant heat transfer coefficient with the ambient [W/(m2.K)]",\
 31, 3, 0.0,0.0,0.0,0,560)
DeclareVariable("tankCold.use_L", "= true to display level as output variable [:#(type=Boolean)]",\
 true, 0.0,0.0,0.0,0,1539)
DeclareParameter("tankCold.L_start", "Start value of level in %", 32, 70, \
0.0,0.0,0.0,0,560)
DeclareParameter("tankCold.T_start", "Start value of temperature [K|degC]", 33, \
563.15, 0.0,1E+100,300.0,0,560)
DeclareVariable("tankCold.T_set", "Tank Heater Temperature Set-Point [K|degC]", \
553.15, 0.0,1E+100,300.0,0,513)
DeclareParameter("tankCold.W_max", "Hot Tank Heater Capacity [W]", 34, \
3000000000.0, 0.0,0.0,0.0,0,560)
DeclareParameter("tankCold.e_ht", "Tank Heater Efficiency [1]", 35, 0.99, 0.0,\
1E+100,0.0,0,560)
DeclareVariable("tankCold.V", "[m3]", 0.0, 0.0,0.0,0.0,0,512)
DeclareState("tankCold.m", "[kg]", 2, 0.0, 0.0,1E+100,0.0,0,544)
DeclareDerivative("tankCold.der(m)", "[kg/s]", 0.0, 0.0,0.0,0.0,0,512)
DeclareAlias2("tankCold.medium.p", "Absolute pressure of medium [Pa|bar]", \
"receiver.fluid_a.p", 1, 5, 44, 0)
DeclareState("tankCold.medium.h", "Specific enthalpy of medium [J/kg]", 3, 0.0, \
-10000000000.0,10000000000.0,1000000.0,0,544)
DeclareDerivative("tankCold.medium.der(h)", "der(Specific enthalpy of medium) [m2/s3]",\
 0.0, 0.0,0.0,0.0,0,512)
DeclareVariable("tankCold.medium.d", "Density of medium [kg/m3|g/cm3]", 1, 0.0,\
100000.0,1.0,0,512)
DeclareVariable("tankCold.medium.T", "Temperature of medium [K|degC]", 800, \
573.15,873.15,300.0,0,512)
DeclareVariable("tankCold.medium.X[1]", "Mass fractions (= (component mass)/total mass  m_i/m) [kg/kg]",\
 0.5, 0.0,1.0,0.1,0,513)
DeclareVariable("tankCold.medium.X[2]", "Mass fractions (= (component mass)/total mass  m_i/m) [kg/kg]",\
 0.5, 0.0,1.0,0.1,0,513)
DeclareVariable("tankCold.medium.u", "Specific internal energy of medium [J/kg]",\
 0.0, -100000000.0,100000000.0,1000000.0,0,512)
DeclareVariable("tankCold.medium.R", "Gas constant (of mixture if applicable) [J/(kg.K)]",\
 90.9293729084188, 0.0,10000000.0,1000.0,0,513)
DeclareVariable("tankCold.medium.MM", "Molar mass (of mixture or single fluid) [kg/mol]",\
 0.091438, 0.001,0.25,0.032,0,513)
DeclareAlias2("tankCold.medium.state.p", "Absolute pressure of medium [Pa|bar]",\
 "receiver.fluid_a.p", 1, 5, 44, 0)
DeclareAlias2("tankCold.medium.state.h", "Specific enthalpy [J/kg]", \
"tankCold.medium.h", 1, 1, 3, 0)
DeclareVariable("tankCold.medium.preferredMediumStates", "= true if StateSelect.prefer shall be used for the independent property variables of the medium [:#(type=Boolean)]",\
 false, 0.0,0.0,0.0,0,515)
DeclareVariable("tankCold.medium.standardOrderComponents", "If true, and reducedX = true, the last element of X will be computed from the other ones [:#(type=Boolean)]",\
 true, 0.0,0.0,0.0,0,515)
DeclareVariable("tankCold.medium.T_degC", "Temperature of medium in [degC] [degC;]",\
 0.0, 0.0,0.0,0.0,0,512)
DeclareVariable("tankCold.medium.p_bar", "Absolute pressure of medium in [bar] [bar]",\
 0.0, 0.0,0.0,0.0,0,512)
DeclareVariable("tankCold.A", "[m2]", 0.0, 0.0,0.0,0.0,0,512)
DeclareVariable("tankCold.Q_losses", "[W]", 0.0, 0.0,0.0,0.0,0,512)
DeclareAlias2("tankCold.state_i.p", "Absolute pressure of medium [Pa|bar]", \
"receiver.fluid_a.p", 1, 5, 44, 0)
DeclareVariable("tankCold.state_i.h", "Specific enthalpy [J/kg]", 0.0, \
-10000000000.0,10000000000.0,1000000.0,0,513)
DeclareVariable("tankCold.W_net", "[W]", 0.0, 0.0,0.0,0.0,0,512)
DeclareVariable("tankCold.W_loss", "[W]", 0.0, 0.0,0.0,0.0,0,512)
DeclareAlias2("tankCold.L", "Tank level in %", "controlCold.hotTankLogic.level_ref", 1,\
 5, 196, 0)
DeclareAlias2("tankCold.p_top", "", "receiver.fluid_a.p", 1, 5, 44, 0)
DeclareAlias2("tankCold.T_amb", "", "receiver.Tamb", 1, 5, 61, 0)
DeclareVariable("tankCold.V_t", "[m3]", 0.0, 0.0,0.0,0.0,0,2561)
DeclareAlias2("tankCold.L_internal", "", "controlCold.hotTankLogic.level_ref", 1,\
 5, 196, 1024)
DeclareAlias2("tankCold.p_top_internal", "", "receiver.fluid_a.p", 1, 5, 44, 1024)
DeclareAlias2("tankCold.T_amb_internal", "", "receiver.Tamb", 1, 5, 61, 1024)
DeclareAlias2("pumpCold.fluid_a.m_flow", "Mass flow rate from the connection point into the component [kg/s]",\
 "receiver.fluid_a.m_flow", 1, 5, 43, 132)
DeclareAlias2("pumpCold.fluid_a.p", "Thermodynamic pressure in the connection point [Pa|bar]",\
 "receiver.fluid_a.p", 1, 5, 44, 4)
DeclareAlias2("pumpCold.fluid_a.h_outflow", "Specific thermodynamic enthalpy close to the connection point if m_flow < 0 [J/kg]",\
 "tankCold.medium.h", 1, 1, 3, 4)
DeclareAlias2("pumpCold.fluid_b.m_flow", "Mass flow rate from the connection point into the component [kg/s]",\
 "receiver.fluid_a.m_flow", -1, 5, 43, 132)
DeclareAlias2("pumpCold.fluid_b.p", "Thermodynamic pressure in the connection point [Pa|bar]",\
 "receiver.fluid_a.p", 1, 5, 44, 4)
DeclareAlias2("pumpCold.fluid_b.h_outflow", "Specific thermodynamic enthalpy close to the connection point if m_flow < 0 [J/kg]",\
 "tankCold.medium.h", 1, 1, 3, 4)
DeclareAlias2("pumpCold.m_flow", "", "receiver.fluid_a.m_flow", 1, 5, 43, 0)
DeclareParameter("pumpCold.k_loss", "[J/kg]", 36, 150.0, 0.0,0.0,0.0,0,560)
DeclareVariable("pumpCold.W_loss", "[W]", 0.0, 0.0,0.0,0.0,0,512)
DeclareParameter("data.lon", "Longitude (+ve East) [deg]", 37, 133.889, 0.0,0.0,\
0.0,0,560)
DeclareParameter("data.lat", "Latitude (+ve North) [deg]", 38, -23.795, 0.0,0.0,\
0.0,0,560)
DeclareParameter("data.t_zone", "Local time zone (UCT=0) [h]", 39, 9.5, 0.0,0.0,\
0.0,0,560)
DeclareParameter("data.year", "Year [:#(type=Integer)]", 40, 1996, 0.0,0.0,0.0,0,564)
DeclareVariable("data.GHI", "[W/m2]", 0.0, 0.0,0.0,0.0,0,512)
DeclareAlias2("data.DNI", "[W/m2]", "sun.solar.dni", 1, 5, 2, 0)
DeclareVariable("data.DHI", "[W/m2]", 0.0, 0.0,0.0,0.0,0,512)
DeclareAlias2("data.Tdry", "[K|degC]", "receiver.Tamb", 1, 5, 61, 0)
DeclareVariable("data.Tdew", "[K|degC]", 288.15, 0.0,1E+100,300.0,0,512)
DeclareVariable("data.RH", "", 0.0, 0.0,0.0,0.0,0,512)
DeclareAlias2("data.Pres", "[Pa|bar]", "receiver.fluid_a.p", 1, 5, 44, 0)
DeclareAlias2("data.Wspd", "[m/s]", "heliostatsField.Wspd_internal", 1, 5, 39, 0)
DeclareVariable("data.Wdir", "[rad|deg]", 0.0, 0.0,0.0,0.0,0,512)
DeclareVariable("data.Albedo", "", 0.0, 0.0,0.0,0.0,0,512)
DeclareVariable("data.table.nout", "Number of outputs [:#(type=Integer)]", 10, \
1.0,1E+100,0.0,0,2565)
DeclareAlias2("data.table.y[1]", "Connector of Real output signals", "data.GHI", 1,\
 5, 118, 1024)
DeclareVariable("data.table.y[2]", "Connector of Real output signals", 0.0, \
0.0,0.0,0.0,0,2560)
DeclareAlias2("data.table.y[3]", "Connector of Real output signals", "data.DHI", 1,\
 5, 119, 1024)
DeclareVariable("data.table.y[4]", "Connector of Real output signals", 0.0, \
0.0,0.0,0.0,0,2560)
DeclareVariable("data.table.y[5]", "Connector of Real output signals", 0.0, \
0.0,0.0,0.0,0,2560)
DeclareAlias2("data.table.y[6]", "Connector of Real output signals", "data.RH", 1,\
 5, 121, 1024)
DeclareVariable("data.table.y[7]", "Connector of Real output signals", 0.0, \
0.0,0.0,0.0,0,2560)
DeclareAlias2("data.table.y[8]", "Connector of Real output signals", \
"heliostatsField.Wspd_internal", 1, 5, 39, 1024)
DeclareVariable("data.table.y[9]", "Connector of Real output signals", 0.0, \
0.0,0.0,0.0,0,2560)
DeclareAlias2("data.table.y[10]", "Connector of Real output signals", \
"data.Albedo", 1, 5, 123, 1024)
DeclareVariable("data.table.tableOnFile", "= true, if table is defined on file or in function usertab [:#(type=Boolean)]",\
 true, 0.0,0.0,0.0,0,2563)
DeclareParameter("data.table.verboseRead", "= true, if info message that file is loading is to be printed [:#(type=Boolean)]",\
 41, true, 0.0,0.0,0.0,0,2610)
DeclareParameter("data.table.columns[1]", "Columns of table to be interpolated [:#(type=Integer)]",\
 42, 2, 0.0,0.0,0.0,0,2612)
DeclareParameter("data.table.columns[2]", "Columns of table to be interpolated [:#(type=Integer)]",\
 43, 3, 0.0,0.0,0.0,0,2612)
DeclareParameter("data.table.columns[3]", "Columns of table to be interpolated [:#(type=Integer)]",\
 44, 4, 0.0,0.0,0.0,0,2612)
DeclareParameter("data.table.columns[4]", "Columns of table to be interpolated [:#(type=Integer)]",\
 45, 5, 0.0,0.0,0.0,0,2612)
DeclareParameter("data.table.columns[5]", "Columns of table to be interpolated [:#(type=Integer)]",\
 46, 6, 0.0,0.0,0.0,0,2612)
DeclareParameter("data.table.columns[6]", "Columns of table to be interpolated [:#(type=Integer)]",\
 47, 7, 0.0,0.0,0.0,0,2612)
DeclareParameter("data.table.columns[7]", "Columns of table to be interpolated [:#(type=Integer)]",\
 48, 8, 0.0,0.0,0.0,0,2612)
DeclareParameter("data.table.columns[8]", "Columns of table to be interpolated [:#(type=Integer)]",\
 49, 9, 0.0,0.0,0.0,0,2612)
DeclareParameter("data.table.columns[9]", "Columns of table to be interpolated [:#(type=Integer)]",\
 50, 10, 0.0,0.0,0.0,0,2612)
DeclareParameter("data.table.columns[10]", "Columns of table to be interpolated [:#(type=Integer)]",\
 51, 11, 0.0,0.0,0.0,0,2612)
DeclareVariable("data.table.smoothness", "Smoothness of table interpolation [:#(type=Modelica.Blocks.Types.Smoothness)]",\
 2, 1.0,5.0,0.0,0,2565)
DeclareParameter("data.table.extrapolation", "Extrapolation of data outside the definition range [:#(type=Modelica.Blocks.Types.Extrapolation)]",\
 52, 2, 1.0,4.0,0.0,0,2612)
DeclareParameter("data.table.offset[1]", "Offsets of output signals", 53, 0, \
0.0,0.0,0.0,0,2608)
DeclareParameter("data.table.startTime", "Output = offset for time < startTime [s]",\
 54, 0, 0.0,0.0,0.0,0,2608)
DeclareVariable("data.table.timeScale", "Time scale of first table column [s]", 1,\
 1E-015,1E+100,0.0,0,2561)
DeclareVariable("data.table.t_min", "Minimum abscissa value defined in table [s]",\
 0.0, 0.0,0.0,0.0,0,2561)
DeclareVariable("data.table.t_max", "Maximum abscissa value defined in table [s]",\
 0.0, 0.0,0.0,0.0,0,2561)
DeclareVariable("data.table.t_minScaled", "Minimum (scaled) abscissa value defined in table",\
 0.0, 0.0,0.0,0.0,0,2561)
DeclareVariable("data.table.t_maxScaled", "Maximum (scaled) abscissa value defined in table",\
 0.0, 0.0,0.0,0.0,0,2561)
DeclareVariable("data.table.p_offset[1]", "Offsets of output signals", 0.0, \
0.0,0.0,0.0,0,2561)
DeclareVariable("data.table.p_offset[2]", "Offsets of output signals", 0.0, \
0.0,0.0,0.0,0,2561)
DeclareVariable("data.table.p_offset[3]", "Offsets of output signals", 0.0, \
0.0,0.0,0.0,0,2561)
DeclareVariable("data.table.p_offset[4]", "Offsets of output signals", 0.0, \
0.0,0.0,0.0,0,2561)
DeclareVariable("data.table.p_offset[5]", "Offsets of output signals", 0.0, \
0.0,0.0,0.0,0,2561)
DeclareVariable("data.table.p_offset[6]", "Offsets of output signals", 0.0, \
0.0,0.0,0.0,0,2561)
DeclareVariable("data.table.p_offset[7]", "Offsets of output signals", 0.0, \
0.0,0.0,0.0,0,2561)
DeclareVariable("data.table.p_offset[8]", "Offsets of output signals", 0.0, \
0.0,0.0,0.0,0,2561)
DeclareVariable("data.table.p_offset[9]", "Offsets of output signals", 0.0, \
0.0,0.0,0.0,0,2561)
DeclareVariable("data.table.p_offset[10]", "Offsets of output signals", 0.0, \
0.0,0.0,0.0,0,2561)
DeclareVariable("data.table.tableID.id", "[:#(type=Integer)]", 0, 0.0,0.0,0.0,0,2565)
DeclareVariable("data.table.nextTimeEvent", "Next time event instant [s]", 0, \
0.0,0.0,0.0,0,2704)
DeclareVariable("data.table.nextTimeEventScaled", "Next scaled time event instant",\
 0, 0.0,0.0,0.0,0,2704)
DeclareVariable("data.table.tableOnFileRead", "= 1, if table was successfully read from file",\
 0.0, 0.0,0.0,0.0,0,2561)
DeclareVariable("data.table.DBL_MAX", "", 1.7976931348623157E+308, 0.0,0.0,0.0,0,2561)
DeclareVariable("data.table.timeScaled", "Scaled time", 0.0, 0.0,0.0,0.0,0,2560)
DeclareAlias2("temperature.fluid_a.m_flow", "Mass flow rate from the connection point into the component [kg/s]",\
 "receiver.fluid_a.m_flow", 1, 5, 43, 132)
DeclareAlias2("temperature.fluid_a.p", "Thermodynamic pressure in the connection point [Pa|bar]",\
 "receiver.fluid_a.p", 1, 5, 44, 4)
DeclareAlias2("temperature.fluid_a.h_outflow", "Specific thermodynamic enthalpy close to the connection point if m_flow < 0 [J/kg]",\
 "tankHot.medium.h", 1, 1, 1, 4)
DeclareAlias2("temperature.fluid_b.m_flow", "Mass flow rate from the connection point into the component [kg/s]",\
 "receiver.fluid_a.m_flow", -1, 5, 43, 132)
DeclareAlias2("temperature.fluid_b.p", "Thermodynamic pressure in the connection point [Pa|bar]",\
 "receiver.fluid_a.p", 1, 5, 44, 4)
DeclareAlias2("temperature.fluid_b.h_outflow", "Specific thermodynamic enthalpy close to the connection point if m_flow < 0 [J/kg]",\
 "receiver.fluid_b.h_outflow", 1, 5, 46, 4)
DeclareVariable("temperature.T", "[K|degC]", 0.0, 0.0,1E+100,0.0,0,512)
DeclareAlias2("temperature.state.p", "Absolute pressure of medium [Pa|bar]", \
"receiver.fluid_a.p", 1, 5, 44, 0)
DeclareAlias2("temperature.state.h", "Specific enthalpy [J/kg]", \
"receiver.fluid_b.h_outflow", 1, 5, 46, 0)
DeclareAlias2("Pres_input.y", "Value of Real output", "receiver.fluid_a.p", 1, 5,\
 44, 0)
DeclareParameter("controlHot.m_flow_on", "Constant mass flow rate on [kg/s]", 55,\
 682.544, 0.0,0.0,0.0,0,560)
DeclareParameter("controlHot.m_flow_off", "Constant mass flow rate off [kg/s]", 56,\
 0, 0.0,0.0,0.0,0,560)
DeclareParameter("controlHot.L_on", "Level of start discharge", 57, 10, 0.0,0.0,\
0.0,0,560)
DeclareParameter("controlHot.L_off", "Level of stop discharge", 58, 5, 0.0,0.0,\
0.0,0,560)
DeclareParameter("controlHot.L_df_on", "Level of start defocus", 59, 120, \
0.0,0.0,0.0,0,560)
DeclareParameter("controlHot.L_df_off", "Level of stop defocus", 60, 123, \
0.0,0.0,0.0,0,560)
DeclareAlias2("controlHot.L_mea", "", "controlHot.defocus_logic.level_ref", 1, 5,\
 154, 0)
DeclareAlias2("controlHot.m_flow", "", "tankHot.fluid_b.m_flow", -1, 5, 69, 0)
DeclareVariable("controlHot.defocus_logic.level_ref", "", 0.0, 0.0,0.0,0.0,0,512)
DeclareVariable("controlHot.defocus_logic.level_max", "", 0.0, 0.0,0.0,0.0,0,513)
DeclareVariable("controlHot.defocus_logic.level_min", "", 0.0, 0.0,0.0,0.0,0,513)
DeclareVariable("controlHot.defocus_logic.y", "[:#(type=Boolean)]", false, \
0.0,0.0,0.0,0,642)
DeclareAlias2("controlHot.defocus", "[:#(type=Boolean)]", "controlHot.defocus_logic.y", 1,\
 5, 157, 65)
DeclareAlias2("controlHot.m_flow_in", "", "receiver.fluid_a.m_flow", 1, 5, 43, 0)
DeclareVariable("controlHot.logic.level", "", 0.0, 0.0,0.0,0.0,0,512)
DeclareAlias2("controlHot.logic.m_flow", "", "tankHot.fluid_b.m_flow", -1, 5, 69,\
 0)
DeclareParameter("controlHot.logic.t_start", "[s]", 61, 1800.0, 0.0,0.0,0.0,0,560)
DeclareParameter("controlHot.logic.t_standby", "[s]", 62, 7200, 0.0,0.0,0.0,0,560)
DeclareVariable("controlHot.logic.m_flow_max", "", 0.0, 0.0,0.0,0.0,0,513)
DeclareVariable("controlHot.logic.m_flow_startup", "", 0.0, 0.0,0.0,0.0,0,513)
DeclareParameter("controlHot.logic.m_flow_standby", "", 63, 0, 0.0,0.0,0.0,0,560)
DeclareVariable("controlHot.logic.level_on", "", 0.0, 0.0,0.0,0.0,0,513)
DeclareVariable("controlHot.logic.level_off", "", 0.0, 0.0,0.0,0.0,0,513)
DeclareVariable("controlHot.logic.standby", "[:#(type=Boolean)]", false, \
0.0,0.0,0.0,0,642)
DeclareVariable("controlHot.logic.startup", "[:#(type=Boolean)]", false, \
0.0,0.0,0.0,0,658)
DeclareVariable("controlHot.logic.on_charge", "[:#(type=Boolean)]", false, \
0.0,0.0,0.0,0,642)
DeclareVariable("controlHot.logic.on_discharge", "[:#(type=Boolean)]", false, \
0.0,0.0,0.0,0,642)
DeclareVariable("controlHot.logic.t_off", "[s]", 0.0, 0.0,0.0,0.0,0,640)
DeclareVariable("controlHot.logic.t_on", "[s]", 0.0, 0.0,0.0,0.0,0,640)
DeclareAlias2("controlHot.logic.m_flow_in", "", "receiver.fluid_a.m_flow", 1, 5,\
 43, 0)
DeclareParameter("controlCold.T_ref", "Setpoint of temperature [K|degC]", 64, \
847.15, 0.0,1E+100,300.0,0,560)
DeclareParameter("controlCold.m_flow_max", "Maximum mass flow rate [kg/s]", 65, 1400,\
 0.0,0.0,0.0,0,560)
DeclareParameter("controlCold.m_flow_min", "Mass flow rate when control off [kg/s]",\
 66, 0, 0.0,0.0,0.0,0,560)
DeclareParameter("controlCold.L_off", "Level of stop discharge", 67, 0, 0.0,0.0,\
0.0,0,560)
DeclareParameter("controlCold.L_df_on", "Level of start defocus", 68, 5, \
0.0,0.0,0.0,0,560)
DeclareParameter("controlCold.L_df_off", "Level of stop defocus", 69, 7, \
0.0,0.0,0.0,0,560)
DeclareParameter("controlCold.y_start", "Initial value of output", 70, 1000, \
0.0,0.0,0.0,0,560)
DeclareParameter("controlCold.Ti", "Integer constant", 71, 0.1, 0.0,0.0,0.0,0,560)
DeclareParameter("controlCold.Kp", "Proportional constant", 72, -1000, 0.0,0.0,\
0.0,0,560)
DeclareVariable("controlCold.switch.u1", "Connector of first Real input signal",\
 0.0, 0.0,0.0,0.0,0,512)
DeclareVariable("controlCold.switch.u2", "Connector of Boolean input signal [:#(type=Boolean)]",\
 false, 0.0,0.0,0.0,0,642)
DeclareVariable("controlCold.switch.u3", "Connector of second Real input signal",\
 0, 0.0,0.0,0.0,0,513)
DeclareAlias2("controlCold.switch.y", "Connector of Real output signal", \
"receiver.fluid_a.m_flow", 1, 5, 43, 0)
DeclareVariable("controlCold.m_flow_off_input.y", "Value of Real output", 0.0, \
0.0,0.0,0.0,0,513)
DeclareAlias2("controlCold.feedback.u1", "", "controlCold.T_ref", 1, 7, 64, 0)
DeclareAlias2("controlCold.feedback.u2", "", "temperature.T", 1, 5, 153, 0)
DeclareVariable("controlCold.feedback.y", "", 0.0, 0.0,0.0,0.0,0,512)
DeclareAlias2("controlCold.PI.u", "Connector of Real input signal", \
"controlCold.feedback.y", 1, 5, 173, 0)
DeclareAlias2("controlCold.PI.y", "Connector of Real output signal", \
"controlCold.switch.u1", 1, 5, 169, 0)
DeclareVariable("controlCold.PI.Ti", "Time Constant of Integrator [s]", 0.5, \
1E-060,1E+100,0.0,0,513)
DeclareVariable("controlCold.PI.initType", "Type of initialization (1: no init, 2: steady state, 3: initial state, 4: initial output) [:#(type=Modelica.Blocks.Types.InitPID)]",\
 4, 1.0,5.0,0.0,0,517)
DeclareVariable("controlCold.PI.y_start", "Initial value of output", 0.0, \
0.0,0.0,0.0,0,513)
DeclareVariable("controlCold.PI.unitTime", "[s]", 1, 0.0,0.0,0.0,0,1537)
DeclareVariable("controlCold.PI.Kp", "", 0.0, 0.0,0.0,0.0,0,513)
DeclareVariable("controlCold.PI.uMax", "", 0.0, 0.0,0.0,0.0,0,513)
DeclareVariable("controlCold.PI.uMin", "", 0.0, 0.0,0.0,0.0,0,513)
DeclareParameter("controlCold.PI.Tt", "[s]", 73, 1, 0.0,0.0,0.0,0,560)
DeclareVariable("controlCold.PI.P.k", "Gain value multiplied with input signal [1]",\
 1, 0.0,0.0,0.0,0,513)
DeclareAlias2("controlCold.PI.P.u", "Input signal connector", "controlCold.feedback.y", 1,\
 5, 173, 0)
DeclareVariable("controlCold.PI.P.y", "Output signal connector", 0.0, 0.0,0.0,\
0.0,0,512)
DeclareVariable("controlCold.PI.I.k", "Integrator gain [1]", 1.0, 0.0,0.0,0.0,0,513)
DeclareVariable("controlCold.PI.I.initType", "Type of initialization (1: no init, 2: steady state, 3,4: initial output) [:#(type=Modelica.Blocks.Types.Init)]",\
 4, 1.0,4.0,0.0,0,517)
DeclareVariable("controlCold.PI.I.y_start", "Initial or guess value of output (= state)",\
 0.0, 0.0,0.0,0.0,0,513)
DeclareAlias2("controlCold.PI.I.u", "Connector of Real input signal", \
"controlCold.PI.I.der(y)", 1, 6, 4, 0)
DeclareState("controlCold.PI.I.y", "Connector of Real output signal", 4, 0.0, \
0.0,0.0,0.0,0,544)
DeclareDerivative("controlCold.PI.I.der(y)", "der(Connector of Real output signal)",\
 0.0, 0.0,0.0,0.0,0,512)
DeclareAlias2("controlCold.PI.Add.u1", "Connector of Real input signal 1", \
"controlCold.PI.P.y", 1, 5, 182, 0)
DeclareAlias2("controlCold.PI.Add.u2", "Connector of Real input signal 2", \
"controlCold.PI.I.y", 1, 1, 4, 0)
DeclareVariable("controlCold.PI.Add.y", "Connector of Real output signal", 0.0, \
0.0,0.0,0.0,0,512)
DeclareParameter("controlCold.PI.Add.k1", "Gain of upper input", 74, 1, 0.0,0.0,\
0.0,0,560)
DeclareParameter("controlCold.PI.Add.k2", "Gain of lower input", 75, 1, 0.0,0.0,\
0.0,0,560)
DeclareVariable("controlCold.PI.P1.k", "Gain value multiplied with input signal [1]",\
 1, 0.0,0.0,0.0,0,513)
DeclareAlias2("controlCold.PI.P1.u", "Input signal connector", "controlCold.feedback.y", 1,\
 5, 173, 0)
DeclareVariable("controlCold.PI.P1.y", "Output signal connector", 0.0, 0.0,0.0,\
0.0,0,512)
DeclareVariable("controlCold.PI.limiter.uMax", "Upper limits of input signals", 1,\
 0.0,0.0,0.0,0,513)
DeclareVariable("controlCold.PI.limiter.uMin", "Lower limits of input signals", \
0.0, 0.0,0.0,0.0,0,513)
DeclareVariable("controlCold.PI.limiter.strict", "= true, if strict limits with noEvent(..) [:#(type=Boolean)]",\
 false, 0.0,0.0,0.0,0,515)
DeclareVariable("controlCold.PI.limiter.limitsAtInit", "Has no longer an effect and is only kept for backwards compatibility (the implementation uses now the homotopy operator) [:#(type=Boolean)]",\
 true, 0.0,0.0,0.0,0,515)
DeclareAlias2("controlCold.PI.limiter.u", "Connector of Real input signal", \
"controlCold.PI.Add.y", 1, 5, 186, 0)
DeclareAlias2("controlCold.PI.limiter.y", "Connector of Real output signal", \
"controlCold.switch.u1", 1, 5, 169, 0)
DeclareAlias2("controlCold.PI.add1.u1", "Connector of Real input signal 1", \
"controlCold.switch.u1", 1, 5, 169, 0)
DeclareAlias2("controlCold.PI.add1.u2", "Connector of Real input signal 2", \
"controlCold.PI.Add.y", 1, 5, 186, 0)
DeclareVariable("controlCold.PI.add1.y", "Connector of Real output signal", 0.0,\
 0.0,0.0,0.0,0,512)
DeclareParameter("controlCold.PI.add1.k1", "Gain of upper input", 76, 1, \
0.0,0.0,0.0,0,560)
DeclareParameter("controlCold.PI.add1.k2", "Gain of lower input", 77, -1, \
0.0,0.0,0.0,0,560)
DeclareVariable("controlCold.PI.gain1.k", "Gain value multiplied with input signal [1]",\
 1, 0.0,0.0,0.0,0,513)
DeclareAlias2("controlCold.PI.gain1.u", "Input signal connector", \
"controlCold.PI.add1.y", 1, 5, 193, 0)
DeclareVariable("controlCold.PI.gain1.y", "Output signal connector", 0.0, \
0.0,0.0,0.0,0,512)
DeclareAlias2("controlCold.PI.add2.u1", "Connector of Real input signal 1", \
"controlCold.PI.P1.y", 1, 5, 188, 0)
DeclareAlias2("controlCold.PI.add2.u2", "Connector of Real input signal 2", \
"controlCold.PI.gain1.y", 1, 5, 195, 0)
DeclareAlias2("controlCold.PI.add2.y", "Connector of Real output signal", \
"controlCold.PI.I.der(y)", 1, 6, 4, 0)
DeclareParameter("controlCold.PI.add2.k1", "Gain of upper input", 78, 1, \
0.0,0.0,0.0,0,560)
DeclareParameter("controlCold.PI.add2.k2", "Gain of lower input", 79, 1, \
0.0,0.0,0.0,0,560)
DeclareAlias2("controlCold.PI.reset", "[:#(type=Boolean)]", "controlCold.switch.u2", 1,\
 5, 170, 65)
DeclareAlias2("controlCold.T_ref_input.y", "Value of Real output", \
"controlCold.T_ref", 1, 7, 64, 0)
DeclareAlias2("controlCold.L_mea", "", "controlCold.hotTankLogic.level_ref", 1, 5,\
 196, 0)
DeclareAlias2("controlCold.m_flow", "", "receiver.fluid_a.m_flow", 1, 5, 43, 0)
DeclareAlias2("controlCold.sf_on", "[:#(type=Boolean)]", "heliostatsField.on_internal", 1,\
 5, 37, 65)
DeclareAlias2("controlCold.T_mea", "", "temperature.T", 1, 5, 153, 0)
DeclareVariable("controlCold.hotTankLogic.level_ref", "", 0.0, 0.0,0.0,0.0,0,512)
DeclareParameter("controlCold.hotTankLogic.level_max", "", 80, 30, 0.0,0.0,0.0,0,560)
DeclareVariable("controlCold.hotTankLogic.level_min", "", 0.0, 0.0,0.0,0.0,0,513)
DeclareVariable("controlCold.hotTankLogic.y", "[:#(type=Boolean)]", false, \
0.0,0.0,0.0,0,642)
DeclareAlias2("controlCold.and1.u1", "Connector of first Boolean input signal [:#(type=Boolean)]",\
 "controlCold.hotTankLogic.y", 1, 5, 198, 65)
DeclareAlias2("controlCold.and1.u2", "Connector of second Boolean input signal [:#(type=Boolean)]",\
 "heliostatsField.on_internal", 1, 5, 37, 65)
DeclareAlias2("controlCold.and1.y", "Connector of Boolean output signal [:#(type=Boolean)]",\
 "controlCold.switch.u2", 1, 5, 170, 65)
DeclareVariable("controlCold.defocus_logic.level_ref", "", 0.0, 0.0,0.0,0.0,0,512)
DeclareVariable("controlCold.defocus_logic.level_max", "", 0.0, 0.0,0.0,0.0,0,513)
DeclareVariable("controlCold.defocus_logic.level_min", "", 0.0, 0.0,0.0,0.0,0,513)
DeclareVariable("controlCold.defocus_logic.y", "[:#(type=Boolean)]", false, \
0.0,0.0,0.0,0,642)
DeclareAlias2("controlCold.not1.u", "Connector of Boolean input signal [:#(type=Boolean)]",\
 "controlCold.defocus_logic.y", 1, 5, 202, 65)
DeclareAlias2("controlCold.not1.y", "Connector of Boolean output signal [:#(type=Boolean)]",\
 "controlCold.defocus", 1, 5, 203, 65)
DeclareVariable("controlCold.defocus", "[:#(type=Boolean)]", false, 0.0,0.0,0.0,\
0,642)
DeclareAlias2("powerBlock.fluid_a.m_flow", "Mass flow rate from the connection point into the component [kg/s]",\
 "tankHot.fluid_b.m_flow", -1, 5, 69, 132)
DeclareAlias2("powerBlock.fluid_a.p", "Thermodynamic pressure in the connection point [Pa|bar]",\
 "receiver.fluid_a.p", 1, 5, 44, 4)
DeclareVariable("powerBlock.fluid_a.h_outflow", "Specific thermodynamic enthalpy close to the connection point if m_flow < 0 [J/kg]",\
 0.0, -10000000000.0,10000000000.0,1000000.0,0,520)
DeclareAlias2("powerBlock.fluid_b.m_flow", "Mass flow rate from the connection point into the component [kg/s]",\
 "tankHot.fluid_b.m_flow", 1, 5, 69, 132)
DeclareAlias2("powerBlock.fluid_b.p", "Thermodynamic pressure in the connection point [Pa|bar]",\
 "receiver.fluid_a.p", 1, 5, 44, 4)
DeclareAlias2("powerBlock.fluid_b.h_outflow", "Specific thermodynamic enthalpy close to the connection point if m_flow < 0 [J/kg]",\
 "powerBlock.fluid_a.h_outflow", 1, 5, 204, 4)
DeclareAlias2("powerBlock.W_net", "Net electric power output [W|MW]", \
"powerBlock.der(E_net)", 1, 6, 6, 0)
DeclareParameter("powerBlock.W_des", "Design turbine gross output [W]", 81, \
111000000.0, 0.0,0.0,0.0,0,560)
DeclareParameter("powerBlock.T_in_ref", "HTF inlet temperature (design) [K|degC]",\
 82, 847.15, 0.0,1E+100,300.0,0,560)
DeclareParameter("powerBlock.T_out_ref", "HTF outlet temperature (design) [K|degC]",\
 83, 563.15, 0.0,1E+100,300.0,0,560)
DeclareParameter("powerBlock.p_bo", "Boiler operating pressure [Pa|bar]", 84, 10000000,\
 0.0,1E+100,100000.0,0,560)
DeclareParameter("powerBlock.Q_flow_ref", "Design thermal power [W]", 85, \
294118000.0, 0.0,0.0,0.0,0,560)
DeclareParameter("powerBlock.nu_min", "Minimum turbine operation", 86, 0.5, \
0.0,0.0,0.0,0,560)
DeclareVariable("powerBlock.Q_flow", "Cycle heat addition [W]", 0, 0.0,0.0,0.0,0,512)
DeclareVariable("powerBlock.T_in", "[K|degC]", 288.15, 0.0,1E+100,300.0,0,512)
DeclareVariable("powerBlock.T_out", "[K|degC]", 288.15, 0.0,1E+100,300.0,0,512)
DeclareVariable("powerBlock.enable_losses", "= true enable thermal losses with environment [:#(type=Boolean)]",\
 true, 0.0,0.0,0.0,0,1539)
DeclareParameter("powerBlock.T_des", "Ambient temperature at design [K|degC]", 87,\
 316.15, 0.0,1E+100,300.0,0,560)
DeclareVariable("powerBlock.external_parasities", "= true enable parasities as an input [:#(type=Boolean)]",\
 true, 0.0,0.0,0.0,0,1539)
DeclareParameter("powerBlock.nu_net", "Estimated gross to net conversion factor at the power block",\
 88, 0.9, 0.0,0.0,0.0,0,560)
DeclareParameter("powerBlock.W_base", "Power consumed at all times", 89, \
610500.0, 0.0,0.0,0.0,0,560)
DeclareAlias2("powerBlock.T_amb", "", "receiver.Tamb", 1, 5, 61, 0)
DeclareAlias2("powerBlock.cycle.T_ND", "", "powerBlock.T_ND", 1, 5, 219, 0)
DeclareVariable("powerBlock.cycle.k_q", "Non-design heat fraction", 0.0, \
0.0,0.0,0.0,0,512)
DeclareVariable("powerBlock.cycle.k_w", "Non-design gross power fraction", 0.0, \
0.0,0.0,0.0,0,512)
DeclareVariable("powerBlock.load", "", 0.0, 0.0,0.0,0.0,0,512)
DeclareAlias2("powerBlock.W_gross", "Parasitic losses power [W]", \
"powerBlock.der(E_gross)", 1, 6, 5, 0)
DeclareVariable("powerBlock.W_loss", "Parasitic losses power [W]", 0.0, 0.0,0.0,\
0.0,0,512)
DeclareState("powerBlock.E_gross", "[J|MWh]", 5, 0, 0.0,0.0,0.0,0,560)
DeclareDerivative("powerBlock.der(E_gross)", "[W]", 0.0, 0.0,0.0,0.0,0,512)
DeclareState("powerBlock.E_net", "[J|MWh]", 6, 0, 0.0,0.0,0.0,0,560)
DeclareDerivative("powerBlock.der(E_net)", "[W]", 0.0, 0.0,0.0,0.0,0,512)
DeclareAlias2("powerBlock.parasities", "", "powerBlock.parasities_internal", 1, 5,\
 214, 0)
DeclareVariable("powerBlock.parasities_internal", "", 0.0, 0.0,0.0,0.0,0,2560)
DeclareVariable("powerBlock.k_q", "", 0.0, 0.0,0.0,0.0,0,2560)
DeclareVariable("powerBlock.k_w", "", 0.0, 0.0,0.0,0.0,0,2560)
DeclareAlias2("powerBlock.h_in", "[J/kg]", "tankHot.medium.h", 1, 1, 1, 1024)
DeclareAlias2("powerBlock.h_out", "[J/kg]", "powerBlock.fluid_a.h_outflow", 1, 5,\
 204, 1024)
DeclareVariable("powerBlock.m_flow_ref", "[kg/s]", 0.0, 0.0,0.0,0.0,0,2561)
DeclareVariable("powerBlock.Tsat_ref", "[K|degC]", 288.15, 0.0,1E+100,300.0,0,2561)
DeclareVariable("powerBlock.T_ND", "", 0.0, 0.0,0.0,0.0,0,2560)
DeclareAlias2("powerBlock.state_in.p", "Absolute pressure of medium [Pa|bar]", \
"receiver.fluid_a.p", 1, 5, 44, 1024)
DeclareAlias2("powerBlock.state_in.h", "Specific enthalpy [J/kg]", \
"tankHot.medium.h", 1, 1, 1, 1024)
DeclareAlias2("powerBlock.state_out.p", "Absolute pressure of medium [Pa|bar]", \
"receiver.fluid_a.p", 1, 5, 44, 1024)
DeclareAlias2("powerBlock.state_out.h", "Specific enthalpy [J/kg]", \
"powerBlock.fluid_a.h_outflow", 1, 5, 204, 1024)
DeclareVariable("powerBlock.state_in_ref.p", "Absolute pressure of medium [Pa|bar]",\
 100000.0, 0.0,100000000.0,100000.0,0,2561)
DeclareVariable("powerBlock.state_in_ref.h", "Specific enthalpy [J/kg]", 0.0, \
-10000000000.0,10000000000.0,1000000.0,0,2561)
DeclareVariable("powerBlock.state_out_ref.p", "Absolute pressure of medium [Pa|bar]",\
 100000.0, 0.0,100000000.0,100000.0,0,2561)
DeclareVariable("powerBlock.state_out_ref.h", "Specific enthalpy [J/kg]", 0.0, \
-10000000000.0,10000000000.0,1000000.0,0,2561)
DeclareVariable("powerBlock.h_in_ref", "[J/kg]", 0.0, 0.0,0.0,0.0,0,2561)
DeclareVariable("powerBlock.h_out_ref", "[J/kg]", 0.0, 0.0,0.0,0.0,0,2561)
DeclareVariable("powerBlock.logic", "[:#(type=Boolean)]", false, 0.0,0.0,0.0,0,2690)
DeclareVariable("powerBlock.nu_cool", "", 0.0, 0.0,0.0,0.0,0,2560)
DeclareAlias2("powerBlock.T_amb_internal", "", "receiver.Tamb", 1, 5, 61, 1024)
DeclareAlias2("Wspd_input.y", "Value of Real output", "heliostatsField.Wspd_internal", 1,\
 5, 39, 0)
DeclareAlias2("market.W_net", "[W|MW]", "powerBlock.der(E_net)", 1, 6, 6, 0)
DeclareAlias2("market.price.price", "Energy price in dollars per mega Watt hour [AUD/MWh]",\
 "market.price.price_annual", 1, 7, 90, 0)
DeclareParameter("market.price.price_annual", "Energy price in dollars per mega Watt hour [AUD/MWh]",\
 90, 80, 0.0,0.0,0.0,0,560)
DeclareState("market.profit", "[AUD]", 7, 0.0, 0.0,0.0,0.0,0,560)
DeclareDerivative("market.der(profit)", "[(AUD)/s]", 0.0, 0.0,0.0,0.0,0,512)
DeclareAlias2("parasities_input.y", "Value of Real output", "powerBlock.parasities_internal", 1,\
 5, 214, 0)
DeclareAlias2("or1.u1", "Connector of first Boolean input signal [:#(type=Boolean)]",\
 "controlHot.defocus_logic.y", 1, 5, 157, 65)
DeclareAlias2("or1.u2", "Connector of second Boolean input signal [:#(type=Boolean)]",\
 "controlCold.defocus", 1, 5, 203, 65)
DeclareAlias2("or1.y", "Connector of Boolean output signal [:#(type=Boolean)]", \
"heliostatsField.defocus_internal", 1, 5, 38, 65)
EndNonAlias(0)

#define DymolaHaveUpdateInitVars 1
#include <dsblock5.c>

DYMOLA_STATIC void UpdateInitVars(double*time, double* X_, double* XD_, double* U_, double* DP_, int IP_[], Dymola_bool LP_[], double* F_, double* Y_, double* W_, double QZ_[], double duser_[], int iuser_[], void*cuser_[],struct DYNInstanceData*did_) {
static Real initStore[2];
if (DYNHReject) DYNX(W_,58)=initStore[0]; else initStore[0]=DYNX(W_,58);
}
StartDataBlock
StartPreBlock
pre(DYNX(W_,202),"controlCold.defocus_logic.y", false, 4);
pre(DYNX(W_,198),"controlCold.hotTankLogic.y", false, 5);
pre(DYNX(W_,157),"controlHot.defocus_logic.y", false, 3);
pre(DYNX(W_,166),"controlHot.logic.on_discharge", false, 6);
pre(DYNX(W_,164),"controlHot.logic.startup", false, 7);
pre(DYNX(W_,148),"data.table.nextTimeEvent", 0, 0);
pre(DYNX(W_,149),"data.table.nextTimeEventScaled", 0, 1);
pre(DYNX(W_,37),"heliostatsField.on_internal", false, 2);
EndPreBlock
StartEqBlock
DoRemember_(DYNX(F_,5), 0.0, 5);
DoRemember_(DYNX(F_,3), 0.0, 3);
DoRemember_(DYNX(F_,1), 0.0, 4);
DoRemember_(DYNX(W_,205), 0, 1);
DoRemember_(DYNX(W_,204), 0.0, 2);
DoRemember_(DYNX(W_,58), DYNX(W_,68), 0);
EndEqBlock
UpdateQEvaluate(18)
EndDataBlock
  BreakSectionStart(1);

  { /* Non-linear system of equations to solve. */
    /* Nonlinear system of equations number = 1. */
  /* Introducing 11 common subexpressions used in 9 expressions */
  /* Of the common subexpressions 9 are reals, 0 are integers, and 2
     are booleans. */
  const char*const varnames_[]={"receiver.h_out"};
  const double nominal_[]={1};
  NonLinearSystemOfEquations(Jacobian__, residue__, x__, 1, 0, 1, 7, 
    DYNX(DYNhelp,0), 35, DYNX(did_->helpvari_vec,0), 23);
  SetInitVector(x__, 1, DYNX(W_,58), DYNX(W_,68));
  Residues;
    DYNX(W_,47) = 0.5*(DYNX(X_,3)+DYNX(W_,58));
    DYNX(DYNhelp,35) = 0.344*DYNX(W_,47);
    DYNX(DYNhelp,36) = sqrtGuarded(fabs(1948866.81473124+DYNX(DYNhelp,35)),
      "abs(1948866.81473124+0.344*receiver.medium.h)");
    DYNX(W_,7) = 5.813953488372094*(DYNX(DYNhelp,36)-1396.0182);
    DYNX(DYNhelp,37) = DYNX(W_,65)*5.670367E-008*DYNX(DP_,19);
    DYNX(W_,59) =  -DYNX(DYNhelp,37)*(powmacro(DYNX(W_,7),"heliostatsField.heat.T",4,
      "4")-powmacro(DYNX(W_,61),"receiver.Tamb",4,"4"));
    DYNX(W_,46) = RealBmax(DYNX(W_,68), DYNX(W_,58));
    DYNX(DYNhelp,38) = 0.344*DYNX(W_,46);
    DYNX(DYNhelp,39) = sqrtGuarded(fabs(1948866.81473124+DYNX(DYNhelp,38)),
      "abs(1948866.81473124+0.344*receiver.fluid_b.h_outflow)");
    DYNX(W_,153) = 5.813953488372094*(DYNX(DYNhelp,39)-1396.0182);
    DYNX(W_,173) = DYNX(DP_,64)-DYNX(W_,153);
    DYNX(W_,182) = DYNX(W_,181)*DYNX(W_,173);
    DYNX(W_,169) = DYNX(DP_,74)*DYNX(W_,182)+DYNX(DP_,75)*DYNX(X_,4);
    DYNX(W_,43) = IF DYNX(W_,170) THEN DYNX(W_,169) ELSE 0.0;
  SetVector(residue__, 1,  -(DYNX(W_,59)-DYNX(DP_,18)*DYNX(W_,8)+DYNX(W_,43)*(
    DYNX(X_,3)-DYNX(W_,58))));

  Jacobian(Jacobian__)
  MatrixZeros(Jacobian__);
  DYNX(DYNhelp,40) = 1948866.81473124+DYNX(DYNhelp,35) > 0;
  DYNX(DYNhelp,41) = DYNX(DYNhelp,37)*powmacro(DYNX(W_,7),"heliostatsField.heat.T",3,
    "3");
  DYNX(DYNhelp,42) = divmacro(1.0,"1.0",DYNX(DYNhelp,36),"sqrt(abs(1948866.81473124+0.344*receiver.medium.h))");
  DYNX(DYNhelp,43) = (IF 1948866.81473124+DYNX(DYNhelp,38) > 0 THEN 1 ELSE -1)*
    DYNX(W_,181)*DYNX(DP_,74)*(IF DYNX(W_,170) THEN 1.0 ELSE 0.0)*(DYNX(W_,58)-
    DYNX(X_,3));
  DYNX(DYNhelp,44) = DYNX(W_,68) > DYNX(W_,58);
  DYNX(DYNhelp,45) = divmacro(1.0,"1.0",DYNX(DYNhelp,39),"sqrt(abs(1948866.81473124+0.344*receiver.fluid_b.h_outflow))");
  SetMatrixLeading(Jacobian__, 1, 1, 1, DYNX(W_,43)+DYNX(DYNhelp,42)*2.0*(IF 
    DYNX(DYNhelp,40) THEN 1 ELSE -1)*DYNX(DYNhelp,41)+DYNX(DYNhelp,45)*(-1.0)*
    DYNX(DYNhelp,43)*(IF DYNX(DYNhelp,44) THEN 0.0 ELSE 1.0));

  SolveNonLinearSystemOfEquationsInit(Jacobian__, residue__, x__);
  DYNX(W_,58) = GetVector(x__, 1);
  EndNonLinearSystemOfEquationsInit(residue__, x__, 1);
   /* End of Non-Linear Equation Block */ }



  DYNX(W_,186) = DYNX(W_,169);
  BreakSectionEnd()

BreakSectionFunctionStart(0);
BreakSectionFunctionCallNew(2);
BreakSectionFunctionEnd()
